import{_ as C,k as h,W as q,K as x,r as g,o as i,f as a,l as t,F as O,z as E,D as s,Q as b,X as y,Y as _,p as N,B as m,j as U,G as k,Z as S,A as v,c as f,T as V,R,E as w,q as T}from"./index-8b6c92a2.js";import{H as B}from"./HansonTable-ba5e3732.js";import"./_commonjs-dynamic-modules-302442b1.js";h();const A={components:{HansonTable:B},data(){return{stay_on_page:"false",table_column_error:!1,table_name:"",parent_table_name:"",table_column_name:"",table_column_type:"",table_column_options:{required:"false",unique:"false",foreign_key:"false",references_table:"",references_column:"",relation_type:"",default:""},table_columns:[]}},computed:{crumbs(){return[{label:"Home",route:"/",order:1,name:"Home"},{label:"Tables",route:"/tables",order:2,name:"Tables"},{label:"Create Table",route:"/tables/create",order:3,name:"CreateTable"}]}},methods:{addTableColumn(){this.tableColmnError!=!0&&(this.table_columns.push({name:this.table_column_name,type:this.table_column_type,options:this.table_column_options}),this.table_column_name="",this.table_column_type="",this.clearOptions())},removeTableColumn(){this.table_columns.pop()},options(){document.getElementById("menu-full-dropdown").classList.toggle("hidden")},closeOptions(){document.getElementById("menu-full-dropdown").classList.add("hidden")},updateOptions(r,e,u,p,o,n,d){const c={required:r,unique:e,foreign_key:u,references_table:p,references_column:o,relation_type:n,default:d};this.table_column_options=c},saveOptions(r,e,u,p,o,n,d){this.closeOptions();const c={required:r,unique:e,foreign_key:u,references_table:p,references_column:o,relation_type:n,default:d};this.table_column_options=c,console.log(this.table_column_options)},removeTableColumnAt(r){this.table_columns.splice(r,1)},createTable(){this.table_columns.forEach(e=>{for(const[u,p]of Object.entries(e.options))p=="true"&&(e.options[u]=!0),p=="false"&&(e.options[u]=!1);e.options.required==!1&&e.options.unique==!1&&delete e.options.default,e.options.foreign_key==!1?(delete e.options.foreign_key,delete e.options.references_table,delete e.options.references_column,delete e.options.relation_type):(delete e.options.required,delete e.options.unique,delete e.options.default)});const r={name:this.table_name,parent:this.parent_table_name,schema:this.table_columns};console.log(r),q(r).then(e=>{console.log(e),this.stay_on_page=="true"?this.$router.push({name:"CreateTable",query:{stay_on_page:"true"}}):(h().getTables(),this.$router.push({name:"Tables"}))}).catch(e=>{console.log(e),x().$patch({message:e.response.data.message,status:e.response.status,error:e.response.data.error})})},disableDefault(){return this.table_column_options.required=="true"&&this.table_column_options.default==""},validateNameUnique(){this.table_columns.forEach(r=>{r.name==this.table_column_name&&(this.table_column_name="",x().$patch({message:"Column name must be unique",status:"400",error:"Column name must be unique"}),this.tableColmnError=!0)})},clearOptions(){this.table_column_options={required:"false",unique:"false",foreign_key:"false",references_table:"",references_column:"",relation_type:"",default:""},this.tableColmnError=!1}},mounted(){this.$route.query.stay_on_page=="true"&&(this.stay_on_page="true")}},M={class:"pl-5 w-full max-w-xl flex px-5 py-5","aria-label":"Breadcrumb"},D={class:"inline-flex items-center space-x-1 md:space-x-3"},I={class:"mb-4"},H={class:"mb-4"},z={class:"mb-4"},F={class:"sm:inline-flex sm:space-x-4"},G={class:"flex space-x-4"},L={id:"menu-full-dropdown",class:"hidden"},j={key:0,class:"bg-rock-blue-200 dark:bg-pickled-600 shadow px-4 py-3 rounded-md w-[330px] absolute mx-auto right-1/3 z-10 menu-for-fk"},K={class:"space-y-2"},Y={class:"border-b border-pickled-200 flex"},J={class:"border-b border-pickled-200 flex"},Q={class:"border-b border-pickled-200 flex"},W={class:"flex"},Z={key:0,class:"border-b border-pickled-200 flex"},P={key:1,class:"border-b border-pickled-200 flex"},X={key:2,class:"border-b border-pickled-200 flex"},$={class:"overflow-x-auto"},ee={class:"mb-4 mx-10 mt-5"},oe={class:"flex items-center mb-4"},te=["disabled"];function le(r,e,u,p,o,n){const d=g("router-link"),c=g("HansonTable");return i(),a("div",null,[t("nav",M,[t("ol",D,[(i(!0),a(O,null,E(n.crumbs,l=>(i(),a("li",{class:"inline-flex items-center",key:l.order},[l.name==="Home"?(i(),f(d,{key:0,to:l.route,class:"inline-flex items-center text-sm font-medium text-pickled-700 hover:text-rock-blue-600 dark:text-pickled-400 dark:hover:text-rock-blue-50"},{default:k(()=>[e[28]||(e[28]=t("svg",{"aria-hidden":"true",class:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})],-1)),w(" "+T(l.label),1)]),_:2},1032,["to"])):(i(),f(d,{key:1,to:l.route,class:"inline-flex items-center text-sm font-medium text-pickled-700 hover:text-rock-blue-600 dark:text-pickled-400 dark:hover:text-rock-blue-50"},{default:k(()=>[e[29]||(e[29]=t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-chevron-right w-4 h-4 mr-2"},[t("polyline",{points:"9 18 15 12 9 6"})],-1)),w(" "+T(l.label),1)]),_:2},1032,["to"]))]))),128))])]),e[48]||(e[48]=t("h1",{class:"text-3xl font-bold my-4 mx-10"},"Create Tables",-1)),e[49]||(e[49]=t("h3",{class:"text-lg mb-6 mx-10"},"Use this form for creating tables",-1)),t("form",{onSubmit:e[25]||(e[25]=v((...l)=>n.createTable&&n.createTable(...l),["prevent"])),class:"mx-10 overflow-x-auto"},[t("div",I,[e[30]||(e[30]=t("label",{for:"table_name",class:"block text-sm font-medium"},"Table Name",-1)),s(t("input",{type:"text",class:"mt-1 p-2 border rounded-md w-full bg-rock-blue-300 dark:bg-pickled-600 text-pickled-900 dark:text-rock-blue-100 focus:ring-rock-blue-400 dark:focus:ring-rock-blue-400 dark:ring-offset-pickled-800 focus:ring-2",id:"table_name","onUpdate:modelValue":e[0]||(e[0]=l=>o.table_name=l),placeholder:"Enter table name"},null,512),[[b,o.table_name]])]),t("div",H,[e[31]||(e[31]=t("label",{for:"parent_table_name",class:"block text-sm font-medium"},"Parent",-1)),s(t("input",{type:"text",class:"mt-1 p-2 border rounded-md w-full bg-rock-blue-300 dark:bg-pickled-600 text-pickled-900 dark:text-rock-blue-100 focus:ring-rock-blue-400 dark:focus:ring-rock-blue-400 dark:ring-offset-pickled-800 focus:ring-2",id:"parent_table_name","onUpdate:modelValue":e[1]||(e[1]=l=>o.parent_table_name=l),placeholder:"Enter table name"},null,512),[[b,o.parent_table_name]])]),t("div",z,[e[46]||(e[46]=t("label",{for:"table_columns",class:"block text-sm font-medium"},"Table Schema",-1)),t("div",F,[s(t("input",{onKeyup:[e[2]||(e[2]=y((...l)=>n.addTableColumn&&n.addTableColumn(...l),["enter"])),e[3]||(e[3]=y((...l)=>n.clearOptions&&n.clearOptions(...l),["esc"]))],onClick:e[4]||(e[4]=(...l)=>n.clearOptions&&n.clearOptions(...l)),onBlur:e[5]||(e[5]=(...l)=>n.clearOptions&&n.clearOptions(...l)),onFocus:e[6]||(e[6]=(...l)=>n.clearOptions&&n.clearOptions(...l)),onChange:e[7]||(e[7]=l=>n.validateNameUnique()),type:"text",class:"mt-1 p-2 border rounded-md w-full bg-rock-blue-300 dark:bg-pickled-600 text-pickled-900 dark:text-rock-blue-100 focus:ring-rock-blue-400 dark:focus:ring-rock-blue-400 dark:ring-offset-pickled-800 focus:ring-2",id:"table_column_name","onUpdate:modelValue":e[8]||(e[8]=l=>o.table_column_name=l),placeholder:"Column name"},null,544),[[b,o.table_column_name]]),t("div",G,[s(t("select",{class:"mt-1 p-2 border rounded-md w-full mt-5 sm:mt-0 bg-rock-blue-300 dark:bg-pickled-600 text-pickled-900 dark:text-rock-blue-100 focus:ring-rock-blue-400 dark:focus:ring-rock-blue-400 dark:ring-offset-pickled-800 focus:ring-2",id:"table_column_type","onUpdate:modelValue":e[9]||(e[9]=l=>o.table_column_type=l),onChange:e[10]||(e[10]=(...l)=>n.options&&n.options(...l)),"aria-placeholder":"Select type of column",placeholder:"Select"},e[32]||(e[32]=[N('<option value="" selected disabled>Select a type</option><option value="varchar">String</option><option value="integer">Integer</option><option value="timestamptz">UTC timestamps</option><option value="timestamp">timestamp</option><option value="bigint">Big Integer</option><option value="boolean">Boolean</option><option value="date">Date</option><option value="time">Time</option><option value="text">Text</option><option value="uuid">UUID</option><option value="json">JSON</option><option value="jsonb">JSONB</option><option value="float">Float</option><option value="double">Double</option><option value="decimal">Decimal</option><option value="enum">Enum</option><option value="array">Array</option><option value="geometry">Geometry</option><option value="geography">Geography</option><option value="cidr">CIDR</option><option value="inet">INET</option><option value="macaddr">MACADDR</option><option value="tsvector">TSVECTOR</option><option value="tsquery">TSQUERY</option><option value="int4range">INT4RANGE</option><option value="int8range">INT8RANGE</option><option value="numrange">NUMRANGE</option><option value="tsrange">TSRANGE</option><option value="tstzrange">TSTZRANGE</option><option value="daterange">DATERANGE</option><option value="int2">INT2</option><option value="int4">INT4</option><option value="int8">INT8</option><option value="float4">FLOAT4</option><option value="float8">FLOAT8</option><option value="numeric">NUMERIC</option><option value="money">MONEY</option><option value="char">CHAR</option><option value="serial">SERIAL</option>',40)]),544),[[_,o.table_column_type]]),o.table_column_type?(i(),a("button",{key:0,id:"menu-full-dropdown-button",onClick:e[11]||(e[11]=(...l)=>n.options&&n.options(...l)),type:"button",class:"px-2 py-2 bg-rock-blue text-rock-blue-100 rounded-full"},e[33]||(e[33]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-rock-blue-500"},[t("path",{"fill-rule":"evenodd",d:"M12 3a9 9 0 100 18 9 9 0 000-18zM7 9a1 1 0 011-1h8a1 1 0 110 2H8a1 1 0 01-1-1zm1 4a1 1 0 100 2h6a1 1 0 100-2H8z","clip-rule":"evenodd"})],-1)]))):m("",!0),t("button",{type:"button",class:"px-2 sm:px-2 py-2 sm:py-2 bg-rock-blue text-pickled-800 rounded-full",onClick:e[12]||(e[12]=(...l)=>n.addTableColumn&&n.addTableColumn(...l))},e[34]||(e[34]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1)]))]),t("div",L,[U(S,{type:"transition",name:"slide_down","enter-active-class":"animate__fadeInDownBig","leave-active-class":"animate__fadeOutUpBig"},{default:k(()=>[o.table_column_type?(i(),a("div",j,[t("ul",K,[t("li",Y,[e[36]||(e[36]=t("a",{href:"#",class:"w-[100] block px-4 py-2 text-sm dark:text-rock-blue-100 text-pickled-900 flex-1"},"Required",-1)),s(t("select",{class:"mt-0 p-2 border rounded-lg w-[100] bg-rock-blue-300 dark:bg-pickled-600 dark:text-rock-blue-100 text-pickled-900 flex-end focus:ring-rock-blue-400 dark:focus:ring-rock-blue-400 dark:ring-offset-pickled-800 focus:ring-2",id:"table_column_options.required","onUpdate:modelValue":e[13]||(e[13]=l=>o.table_column_options.required=l),onChange:e[14]||(e[14]=l=>n.updateOptions(o.table_column_options.required,o.table_column_options.unique,o.table_column_options.foreign_key,o.table_column_options.references_table,o.table_column_options.references_column,o.table_column_options.relation_type,o.table_column_options.default)),type:"checkbox"},e[35]||(e[35]=[t("option",{value:"true"},"True",-1),t("option",{value:"false"},"False",-1)]),544),[[_,o.table_column_options.required]])]),t("li",J,[e[38]||(e[38]=t("a",{href:"#",class:"w-[100] block px-4 py-2 text-sm text-pickled-900 dark:text-rock-blue-100 flex-1"},"Unique",-1)),s(t("select",{class:"mt-0 p-2 border rounded-lg w-[100] bg-rock-blue-300 dark:bg-pickled-600 dark:text-rock-blue-100 text-pickled-900 flex-end focus:ring-rock-blue-400 dark:focus:ring-rock-blue-400 dark:ring-offset-pickled-800 focus:ring-2",id:"table_column_options.unique","onUpdate:modelValue":e[15]||(e[15]=l=>o.table_column_options.unique=l),onChange:e[16]||(e[16]=l=>n.updateOptions(o.table_column_options.required,o.table_column_options.unique,o.table_column_options.foreign_key,o.table_column_options.references_table,o.table_column_options.references_column,o.table_column_options.relation_type,o.table_column_options.default)),type:"checkbox"},e[37]||(e[37]=[t("option",{value:"true"},"True",-1),t("option",{value:"false"},"False",-1)]),544),[[_,o.table_column_options.unique]])]),t("li",Q,[e[40]||(e[40]=t("a",{href:"#",class:"W-[100] block px-4 py-2 text-sm dark:text-rock-blue-100 text-pickled-900 flex-1"},"Foreign Key",-1)),s(t("select",{class:"mt-0 p-2 border rounded-lg w-[100] bg-rock-blue-300 dark:bg-pickled-600 dark:text-rock-blue-100 text-pickled-900 flex-end",id:"table_column_options.foreign_key","onUpdate:modelValue":e[17]||(e[17]=l=>o.table_column_options.foreign_key=l),onChange:e[18]||(e[18]=l=>n.updateOptions(o.table_column_options.required,o.table_column_options.unique,o.table_column_options.foreign_key,o.table_column_options.references_table,o.table_column_options.references_column,o.table_column_options.relation_type,o.table_column_options.default)),type:"checkbox"},e[39]||(e[39]=[t("option",{value:"true"},"True",-1),t("option",{value:"false"},"False",-1)]),544),[[_,o.table_column_options.foreign_key]])]),t("li",W,[e[41]||(e[41]=t("a",{href:"#",class:"px-4 py-2 text-sm text-pickled-900 dark:text-rock-blue-100 w-[100] flex-1"},"Default",-1)),s(t("input",{type:"text",class:"mt-1 p-2 border rounded-md w-[200] bg-rock-blue-300 dark:bg-pickled-600 text-pickled-900 dark:text-rock-blue-100",id:"table_column_options.default","onUpdate:modelValue":e[19]||(e[19]=l=>o.table_column_options.default=l),placeholder:"Default"},null,512),[[b,o.table_column_options.default]])]),o.table_column_options.foreign_key=="true"?(i(),a("li",Z,[e[42]||(e[42]=t("a",{href:"#",class:"px-4 py-2 text-sm text-pickled-900 dark:text-rock-blue-100 w-[100] flex-1"},"References Table",-1)),s(t("input",{type:"text",class:"mt-1 p-2 border rounded-md w-[100] bg-rock-blue-300 dark:bg-pickled-600 text-pickled-900 dark:text-rock-blue-100 flex-end",id:"table_column_options.references_table","onUpdate:modelValue":e[20]||(e[20]=l=>o.table_column_options.references_table=l),placeholder:"Table to reference"},null,512),[[b,o.table_column_options.references_table]])])):m("",!0),o.table_column_options.foreign_key=="true"?(i(),a("li",P,[e[43]||(e[43]=t("a",{href:"#",class:"px-4 py-2 text-sm text-pickled-900 dark:text-rock-blue-100 w-[100] flex-1"},"References Column",-1)),s(t("input",{type:"text",class:"mt-1 p-2 border rounded-md w-[100] bg-rock-blue-300 dark:bg-pickled-600 text-pickled-900 dark:text-rock-blue-100 flex-end",id:"table_column_options.references_column","onUpdate:modelValue":e[21]||(e[21]=l=>o.table_column_options.references_column=l),placeholder:""},null,512),[[b,o.table_column_options.references_column]])])):m("",!0),o.table_column_options.foreign_key=="true"?(i(),a("li",X,[e[45]||(e[45]=t("a",{href:"#",class:"px-4 py-2 text-sm text-pickled-900 dark:text-rock-blue-100 w-[100] flex-1"},"Reference Type",-1)),s(t("select",{class:"mt-0 p-2 border rounded-lg w-[100] text-pickled-900 bg-rock-blue-300 dark:bg-pickled-600 dark:text-rock-blue-100 flex-end",id:"table_column_options.relation_type","onUpdate:modelValue":e[22]||(e[22]=l=>o.table_column_options.relation_type=l),onChange:e[23]||(e[23]=l=>n.updateOptions(o.table_column_options.required,o.table_column_options.unique,o.table_column_options.foreign_key,o.table_column_options.references_table,o.table_column_options.references_column,o.table_column_options.relation_type,o.table_column_options.default)),type:"checkbox"},e[44]||(e[44]=[t("option",{value:"one-to-one"},"One to One",-1),t("option",{value:"one-to-many"},"One to Many",-1),t("option",{value:"many-to-one"},"Many to One",-1),t("option",{value:"many-to-many"},"Many to Many",-1)]),544),[[_,o.table_column_options.relation_type]])])):m("",!0)]),t("button",{type:"button",onClick:e[24]||(e[24]=v(l=>n.saveOptions(o.table_column_options.required,o.table_column_options.unique,o.table_column_options.foreign_key,o.table_column_options.references_table,o.table_column_options.references_column,o.table_column_options.relation_type,o.table_column_options.default),["prevent"])),class:"px-8 py-1 mt-5 bg-rock-blue text-rock-blue-100 rounded-md text-sm w-full text-center"}," Save ")])):m("",!0)]),_:1})])])])],32),t("div",$,[o.table_columns.length>0?(i(),f(c,{key:0,columns:o.table_columns,table_data:o.table_columns,class:"mx-5 table-width-less-aside z-10"},null,8,["columns","table_data"])):m("",!0)]),t("div",ee,[t("div",oe,[s(t("input",{"onUpdate:modelValue":e[26]||(e[26]=l=>o.stay_on_page=l),id:"default-checkbox",type:"checkbox",value:"",class:"w-4 h-4 text-rock-blue-600 bg-pickled-800 border-pickled-300 rounded focus:ring-rock-blue-400 dark:focus:ring-rock-blue-400 dark:ring-offset-pickled-800 focus:ring-2 dark:bg-pickled-700 dark:border-pickled-600"},null,512),[[V,o.stay_on_page]]),e[47]||(e[47]=t("label",{for:"default-checkbox",class:"ms-2 text-sm font-medium text-pickled-900 dark:text-pickled-300"},"Stay on form?",-1))])]),t("button",{disabled:o.table_columns.length==0,class:R([o.table_columns.length==0?"opacity-50":"","px-4 py-2 bg-rock-blue dark:text-rock-blue-100 text-pickled-900 rounded-md mx-10"]),onClick:e[27]||(e[27]=(...l)=>n.createTable&&n.createTable(...l)),type:"submit"}," Create Table ",10,te)])}const ie=C(A,[["render",le]]);export{ie as default};
