import{Q as Oe,d as I,n as Q,a as u,b as g,q as W,r as C,m as k,o as de,S as ei,E as y,k as P,P as m,N as we,l as lt,y as O,L as fe,I as ue,f as $,B as A,U as ws,a8 as Ke,C as je,c as X,v as ge,K as ye,G as Se,g as wt,h as le,e as ie,z as oi,u as Z,x as tt,p as hi,_ as Es,H as it,O as He,a9 as xs,aa as hs,ab as Ds,T as As,j as Os,ac as T,M as Ts,a3 as Is,a4 as Dt,a5 as Ls,a6 as Bs,ad as ui,a7 as ve,ae as pi}from"./index-5664b482.js";import{r as At,w as Ns,I as V,D as j,T as Et,d as ci,e as us,m as Ms,P as si,z as D,S as Me,n as K,Q as J,J as Vs,c as ps,b as cs,h as ds,F as Ws,A as Ps,t as ot,p as Fs,B as di,f as Rs,o as fi,v as li,x as Te,y as fs,u as Hs,C as qs}from"./template-f56979d0.js";var js=globalThis&&globalThis.__extends||function(){var d=function(l,e){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},d(l,e)};return function(l,e){d(l,e);function t(){this.constructor=l}l.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),pe=globalThis&&globalThis.__decorate||function(d,l,e,t){var i=arguments.length,s=i<3?l:t===null?t=Object.getOwnPropertyDescriptor(l,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(d,l,e,t);else for(var r=d.length-1;r>=0;r--)(a=d[r])&&(s=(i<3?a(s):i>3?a(l,e,s):a(l,e))||s);return i>3&&s&&Object.defineProperty(l,e,s),s},Ot="e-label",Tt="e-ripple-container",It="e-rtl",Lt="e-radio-wrapper",zs=["title","class","style","disabled","readonly","name","value","id"],mi=function(d){js(l,d);function l(t,i){var s=d.call(this,t,i)||this;return s.isFocused=!1,s}e=l,l.prototype.changeHandler=function(t){this.checked=!0,this.dataBind();var i=this.element.getAttribute("value");i=this.isVue&&i?this.element.value:this.value;var s=typeof this.value;this.isVue&&s==="boolean"&&(i=i==="true"),this.trigger("change",{value:i,event:t}),this.isAngular&&t.stopPropagation()},l.prototype.updateChange=function(){for(var t,i,s=this.getRadioGroup(),a=0;a<s.length;a++)t=s[a],t!==this.element&&(i=Oe(t,e),i.checked=!1,this.tagName==="EJS-RADIOBUTTON"&&(i.angularValue=this.value))},l.prototype.destroy=function(){var t=this,i=this.wrapper;d.prototype.destroy.call(this),i&&(this.disabled||this.unWireEvents(),this.tagName==="INPUT"?(i.parentNode&&i.parentNode.insertBefore(this.element,i),I(i),this.element.checked=!1,["name","value","disabled"].forEach(function(s){t.element.removeAttribute(s)})):(["role","aria-checked","class"].forEach(function(s){i.removeAttribute(s)}),i.innerHTML="",this.element=this.wrapper,this.refreshing&&(["e-control","e-radio","e-lib"].forEach(function(s){t.element.classList.add(s)}),Q("ej2_instances",[this],this.element))))},l.prototype.focusHandler=function(){this.isFocused=!0},l.prototype.focusOutHandler=function(){var t=this.getLabel();t&&t.classList.remove("e-focus")},l.prototype.getModuleName=function(){return"radio"},l.prototype.getSelectedValue=function(){for(var t,i=this.getRadioGroup(),s=0,a=i.length;s<a;s++)if(t=i[s],t.checked)return t.value;return""},l.prototype.getRadioGroup=function(){return document.querySelectorAll('input.e-radio[name="'+this.element.getAttribute("name")+'"]')},l.prototype.getPersistData=function(){return this.addOnPersist(["checked"])},l.prototype.getWrapper=function(){return this.element.parentElement?this.element.parentElement:null},l.prototype.getLabel=function(){return this.element.nextElementSibling?this.element.nextElementSibling:null},l.prototype.initialize=function(){u(this.initialCheckedValue)&&(this.initialCheckedValue=this.checked),this.initWrapper(),this.updateHtmlAttribute(),this.name&&this.element.setAttribute("name",this.name);var t=this.element.getAttribute("value"),i=typeof this.value;this.isVue&&i==="boolean"&&(t=t==="true"),(this.isVue?this.value&&i!=="boolean"&&!t:this.value)&&this.element.setAttribute("value",this.value),this.checked&&(this.element.checked=!0),this.disabled&&this.setDisabled()},l.prototype.initWrapper=function(){var t=this.element.parentElement;t.classList.contains(Lt)||(t=this.createElement("div",{className:Lt}),this.element.parentNode&&this.element.parentNode.insertBefore(t,this.element));var i=this.createElement("label",{attrs:{for:this.element.id}});t.appendChild(this.element),t.appendChild(i),t.classList.add("e-wrapper"),this.enableRtl&&i.classList.add(It),this.cssClass&&g([t],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.label&&this.setText(this.label)},l.prototype.keyUpHandler=function(){this.isFocused&&this.getLabel().classList.add("e-focus")},l.prototype.labelMouseDownHandler=function(t){var i=this.getLabel().getElementsByClassName(Tt)[0];At(t,i)},l.prototype.labelMouseLeaveHandler=function(t){var i=this.getLabel().getElementsByClassName(Tt)[0];if(i){for(var s=i.querySelectorAll(".e-ripple-element"),a=s.length-1;a>0;a--)i.removeChild(i.childNodes[a]);At(t,i)}},l.prototype.labelMouseUpHandler=function(t){var i=this.getLabel().getElementsByClassName(Tt)[0];if(i){for(var s=i.querySelectorAll(".e-ripple-element"),a=s.length-1;a>0;a--)i.removeChild(i.childNodes[a]);At(t,i)}},l.prototype.formResetHandler=function(){this.checked=this.initialCheckedValue,this.initialCheckedValue&&W(this.element,{checked:"true"})},l.prototype.onPropertyChanged=function(t,i){for(var s=this.getWrapper(),a=this.getLabel(),r=0,n=Object.keys(t);r<n.length;r++){var h=n[r];switch(h){case"checked":t.checked&&this.updateChange(),this.element.checked=t.checked;break;case"disabled":t.disabled?(this.setDisabled(),this.unWireEvents()):(this.element.disabled=!1,this.wireEvents());break;case"cssClass":i.cssClass&&C([s],i.cssClass.split(" ")),t.cssClass&&g([s],t.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":t.enableRtl?a.classList.add(It):a.classList.remove(It);break;case"label":this.setText(t.label);break;case"labelPosition":t.labelPosition==="Before"?a.classList.add("e-right"):a.classList.remove("e-right");break;case"name":this.element.setAttribute("name",t.name);break;case"value":var p=typeof this.htmlAttributes.value;if(!u(this.htmlAttributes)&&(this.htmlAttributes.value||p==="boolean"&&!this.htmlAttributes.value))break;this.element.setAttribute("value",t.value);break;case"htmlAttributes":this.updateHtmlAttribute();break}}},l.prototype.preRender=function(){var t=this.element;if(this.formElement=k(this.element,"form"),this.tagName=this.element.tagName,t=Ns(this.createElement,"EJS-RADIOBUTTON","radio",t,Lt),this.element=t,this.element.getAttribute("type")!=="radio"&&this.element.setAttribute("type","radio"),this.element.id||(this.element.id=de("e-"+this.getModuleName())),this.tagName==="EJS-RADIOBUTTON"){var i=this.element.getAttribute("formcontrolname");i&&(this.setProperties({name:i},!0),this.element.setAttribute("name",i))}},l.prototype.render=function(){this.initialize(),this.disabled||this.wireEvents(),this.renderComplete(),this.wrapper=this.getWrapper()},l.prototype.setDisabled=function(){this.element.disabled=!0},l.prototype.setText=function(t){var i=this.getLabel(),s=i.getElementsByClassName(Ot)[0];s?s.textContent=t:(t=this.enableHtmlSanitizer?ei.sanitize(t):t,s=this.createElement("span",{className:Ot,innerHTML:t}),i.appendChild(s)),this.labelPosition==="Before"?this.getLabel().classList.add("e-right"):this.getLabel().classList.remove("e-right")},l.prototype.updateHtmlAttribute=function(){if(!u(this.htmlAttributes))for(var t=0,i=Object.keys(this.htmlAttributes);t<i.length;t++){var s=i[t],a=this.element.parentElement;zs.indexOf(s)>-1?s==="class"?g([a],this.htmlAttributes[""+s].replace(/\s+/g," ").trim().split(" ")):s==="title"||s==="style"?a.setAttribute(s,this.htmlAttributes[""+s]):this.element.setAttribute(s,this.htmlAttributes[""+s]):a.setAttribute(s,this.htmlAttributes[""+s])}},l.prototype.unWireEvents=function(){var t=this.wrapper;y.remove(this.element,"change",this.changeHandler),y.remove(this.element,"focus",this.focusHandler),y.remove(this.element,"focusout",this.focusOutHandler),y.remove(this.element,"keyup",this.keyUpHandler);var i=t.getElementsByTagName("label")[0];i&&(y.remove(i,"mousedown",this.labelMouseDownHandler),y.remove(i,"mouseup",this.labelMouseUpHandler),y.remove(i,"mouseleave",this.labelMouseLeaveHandler)),this.formElement&&y.remove(this.formElement,"reset",this.formResetHandler)},l.prototype.wireEvents=function(){var t=this.getLabel();y.add(this.element,"change",this.changeHandler,this),y.add(this.element,"keyup",this.keyUpHandler,this),y.add(this.element,"focus",this.focusHandler,this),y.add(this.element,"focusout",this.focusOutHandler,this);var i=t.getElementsByClassName(Ot)[0];i&&(y.add(i,"mousedown",this.labelMouseDownHandler,this),y.add(i,"mouseup",this.labelMouseUpHandler,this),y.add(i,"mouseleave",this.labelMouseLeaveHandler,this)),this.formElement&&y.add(this.formElement,"reset",this.formResetHandler,this)},l.prototype.click=function(){this.element.click()},l.prototype.focusIn=function(){this.element.focus()};var e;return pe([P()],l.prototype,"change",void 0),pe([P()],l.prototype,"created",void 0),pe([m(!1)],l.prototype,"checked",void 0),pe([m("")],l.prototype,"cssClass",void 0),pe([m(!1)],l.prototype,"disabled",void 0),pe([m("")],l.prototype,"label",void 0),pe([m("After")],l.prototype,"labelPosition",void 0),pe([m("")],l.prototype,"name",void 0),pe([m("")],l.prototype,"value",void 0),pe([m(!0)],l.prototype,"enableHtmlSanitizer",void 0),pe([m({})],l.prototype,"htmlAttributes",void 0),l=e=pe([we],l),l}(lt),Gs=globalThis&&globalThis.__extends||function(){var d=function(l,e){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},d(l,e)};return function(l,e){d(l,e);function t(){this.constructor=l}l.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),U=globalThis&&globalThis.__decorate||function(d,l,e,t){var i=arguments.length,s=i<3?l:t===null?t=Object.getOwnPropertyDescriptor(l,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(d,l,e,t);else for(var r=d.length-1;r>=0;r--)(a=d[r])&&(s=(i<3?a(s):i>3?a(l,e,s):a(l,e))||s);return i>3&&s&&Object.defineProperty(l,e,s),s},Us="e-control-wrapper e-numeric",Bt="e-input-group-icon",Nt="e-spin-up",_s="e-spin-down",Mt="e-error",Ve="increment",$e="decrement",Ys=new RegExp("^(-)?(\\d*)$"),Ks=".",$s="e-numerictextbox",Xs="e-control",vi="e-input-focus",Qs="e-numeric-hidden",gi=["title","style","class"],yi=0,bi=function(d){Gs(l,d);function l(e,t){var i=d.call(this,e,t)||this;return i.isVue=!1,i.preventChange=!1,i.isAngular=!1,i.isDynamicChange=!1,i.numericOptions=e,i}return l.prototype.preRender=function(){this.isPrevFocused=!1,this.decimalSeparator=".",this.intRegExp=new RegExp("/^(-)?(d*)$/"),this.isCalled=!1;var e=O("ej2_instances",this.element);if(this.cloneElement=this.element.cloneNode(!0),C([this.cloneElement],[Xs,$s,"e-lib"]),this.angularTagName=null,this.formEle=k(this.element,"form"),this.element.tagName==="EJS-NUMERICTEXTBOX"){this.angularTagName=this.element.tagName;var t=this.createElement("input"),i=0;for(i;i<this.element.attributes.length;i++){var s=this.element.attributes[i].nodeName;s!=="id"&&s!=="class"?(t.setAttribute(this.element.attributes[i].nodeName,this.element.attributes[i].nodeValue),t.innerHTML=this.element.innerHTML):s==="class"&&t.setAttribute(s,this.element.className.split(" ").filter(function(r){return r.indexOf("ng-")!==0}).join(" "))}this.element.hasAttribute("name")&&this.element.removeAttribute("name"),this.element.classList.remove("e-control","e-numerictextbox"),this.element.appendChild(t),this.element=t,Q("ej2_instances",e,this.element)}W(this.element,{role:"spinbutton",tabindex:"0",autocomplete:"off"});var a={incrementTitle:"Increment value",decrementTitle:"Decrement value",placeholder:this.placeholder};this.l10n=new fe("numerictextbox",a,this.locale),this.l10n.getConstant("placeholder")!==""&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",de("numerictextbox")),this.isValidState=!0,this.inputStyle=null,this.inputName=null,this.cultureInfo={},this.initCultureInfo(),this.initCultureFunc(),this.prevValue=this.value,this.updateHTMLAttrToElement(),this.checkAttributes(!1),this.formEle&&(this.inputEleValue=this.value),this.validateMinMax(),this.validateStep(),this.placeholder===null&&this.updatePlaceholder()},l.prototype.render=function(){this.element.tagName.toLowerCase()==="input"&&(this.createWrapper(),this.showSpinButton&&this.spinBtnCreation(),this.setElementWidth(this.width),this.container.classList.contains("e-input-group")||this.container.classList.add("e-input-group"),this.changeValue(this.value===null||isNaN(this.value)?null:this.strictMode?this.trimValue(this.value):this.value),this.wireEvents(),this.value!==null&&!isNaN(this.value)&&this.decimals&&this.setProperties({value:this.roundNumber(this.value,this.decimals)},!0),(this.element.getAttribute("value")||this.value)&&(this.element.setAttribute("value",this.element.value),this.hiddenInput.setAttribute("value",this.hiddenInput.value)),this.elementPrevValue=this.element.value,this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),!u(k(this.element,"fieldset"))&&k(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete())},l.prototype.checkAttributes=function(e){for(var t=e?u(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","step","disabled","readonly","style","name","placeholder"],i=0,s=t;i<s.length;i++){var a=s[i];if(!u(this.element.getAttribute(a)))switch(a){case"disabled":if(u(this.numericOptions)||this.numericOptions.enabled===void 0||e){var r=!(this.element.getAttribute(a)==="disabled"||this.element.getAttribute(a)===""||this.element.getAttribute(a)==="true");this.setProperties({enabled:r},!e)}break;case"readonly":if(u(this.numericOptions)||this.numericOptions.readonly===void 0||e){var n=this.element.getAttribute(a)==="readonly"||this.element.getAttribute(a)===""||this.element.getAttribute(a)==="true";this.setProperties({readonly:n},!e)}break;case"placeholder":(u(this.numericOptions)||this.numericOptions.placeholder===void 0||e)&&this.setProperties({placeholder:this.element.placeholder},!e);break;case"value":if(u(this.numericOptions)||this.numericOptions.value===void 0||e){var h=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(a));this.setProperties(Q(a,h,{}),!e)}break;case"min":if(u(this.numericOptions)||this.numericOptions.min===void 0||e){var p=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(a));p!==null&&!isNaN(p)&&this.setProperties(Q(a,p,{}),!e)}break;case"max":if(u(this.numericOptions)||this.numericOptions.max===void 0||e){var o=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(a));o!==null&&!isNaN(o)&&this.setProperties(Q(a,o,{}),!e)}break;case"step":if(u(this.numericOptions)||this.numericOptions.step===void 0||e){var f=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(a));f!==null&&!isNaN(f)&&this.setProperties(Q(a,f,{}),!e)}break;case"style":this.inputStyle=this.element.getAttribute(a);break;case"name":this.inputName=this.element.getAttribute(a);break;default:{var c=this.instance.getNumberParser({format:"n"})(this.element.getAttribute(a));(c!==null&&!isNaN(c)||a==="value")&&this.setProperties(Q(a,c,{}),!0)}break}}},l.prototype.updatePlaceholder=function(){this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0)},l.prototype.initCultureFunc=function(){this.instance=new ue(this.locale)},l.prototype.initCultureInfo=function(){this.cultureInfo.format=this.format,O("currency",this)!==null&&(Q("currency",this.currency,this.cultureInfo),this.setProperties({currencyCode:this.currency},!0))},l.prototype.createWrapper=function(){var e=this.cssClass;!u(this.cssClass)&&this.cssClass!==""&&(e=this.getNumericValidClassList(this.cssClass));var t=V.createInput({element:this.element,floatLabelType:this.floatLabelType,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:e,enableRtl:this.enableRtl,showClearButton:this.showClearButton,enabled:this.enabled}},this.createElement);this.inputWrapper=t,this.container=t.container,this.container.setAttribute("class",Us+" "+this.container.getAttribute("class")),this.updateHTMLAttrToWrapper(),this.readonly&&W(this.element,{"aria-readonly":"true"}),this.hiddenInput=this.createElement("input",{attrs:{type:"text",validateHidden:"true","aria-label":"hidden",class:Qs}}),this.inputName=this.inputName!==null?this.inputName:this.element.id,this.element.removeAttribute("name"),this.isAngular&&this.angularTagName==="EJS-NUMERICTEXTBOX"&&this.cloneElement.id.length>0?W(this.hiddenInput,{name:this.cloneElement.id}):W(this.hiddenInput,{name:this.inputName}),this.container.insertBefore(this.hiddenInput,this.container.childNodes[1]),this.updateDataAttribute(!1),this.inputStyle!==null&&W(this.container,{style:this.inputStyle})},l.prototype.updateDataAttribute=function(e){var t={};if(e)t=this.htmlAttributes;else for(var i=0;i<this.element.attributes.length;i++)t[this.element.attributes[i].name]=this.element.getAttribute(this.element.attributes[i].name);for(var s=0,a=Object.keys(t);s<a.length;s++){var r=a[s];r.indexOf("data")===0&&this.hiddenInput.setAttribute(r,t[""+r])}},l.prototype.updateHTMLAttrToElement=function(){if(!u(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];gi.indexOf(i)<0&&this.element.setAttribute(i,this.htmlAttributes[""+i])}},l.prototype.updateCssClass=function(e,t){V.setCssClass(this.getNumericValidClassList(e),[this.container],this.getNumericValidClassList(t))},l.prototype.getNumericValidClassList=function(e){var t=e;return!u(e)&&e!==""&&(t=e.replace(/\s+/g," ").trim()),t},l.prototype.updateHTMLAttrToWrapper=function(){if(!u(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(gi.indexOf(i)>-1)if(i==="class"){var s=this.getNumericValidClassList(this.htmlAttributes[""+i]);s!==""&&g([this.container],s.split(" "))}else if(i==="style"){var a=this.container.getAttribute(i);a=u(a)?this.htmlAttributes[""+i]:a+this.htmlAttributes[""+i],this.container.setAttribute(i,a)}else this.container.setAttribute(i,this.htmlAttributes[""+i])}},l.prototype.setElementWidth=function(e){u(e)||(typeof e=="number"?this.container.style.width=$(e):typeof e=="string"&&(this.container.style.width=e.match(/px|%|em/)?e:$(e)))},l.prototype.spinBtnCreation=function(){this.spinDown=V.appendSpan(Bt+" "+_s,this.container,this.createElement),W(this.spinDown,{title:this.l10n.getConstant("decrementTitle")}),this.spinUp=V.appendSpan(Bt+" "+Nt,this.container,this.createElement),W(this.spinUp,{title:this.l10n.getConstant("incrementTitle")}),this.wireSpinBtnEvents()},l.prototype.validateMinMax=function(){typeof this.min=="number"&&!isNaN(this.min)||this.setProperties({min:-Number.MAX_VALUE},!0),typeof this.max=="number"&&!isNaN(this.max)||this.setProperties({max:Number.MAX_VALUE},!0),this.decimals!==null&&(this.min!==-Number.MAX_VALUE&&this.setProperties({min:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.min))},!0),this.max!==Number.MAX_VALUE&&this.setProperties({max:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.max))},!0)),this.setProperties({min:this.min>this.max?this.max:this.min},!0),this.min!==-Number.MAX_VALUE&&W(this.element,{"aria-valuemin":this.min.toString()}),this.max!==Number.MAX_VALUE&&W(this.element,{"aria-valuemax":this.max.toString()})},l.prototype.formattedValue=function(e,t){return this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(t)},l.prototype.validateStep=function(){this.decimals!==null&&this.setProperties({step:this.instance.getNumberParser({format:"n"})(this.formattedValue(this.decimals,this.step))},!0)},l.prototype.action=function(e,t){this.isInteract=!0;var i=this.isFocused?this.instance.getNumberParser({format:"n"})(this.element.value):this.value;this.changeValue(this.performAction(i,this.step,e)),this.raiseChangeEvent(t)},l.prototype.checkErrorClass=function(){this.isValidState?C([this.container],Mt):g([this.container],Mt),W(this.element,{"aria-invalid":this.isValidState?"false":"true"})},l.prototype.bindClearEvent=function(){this.showClearButton&&y.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)},l.prototype.resetHandler=function(e){e.preventDefault(),(!this.inputWrapper.clearButton.classList.contains("e-clear-icon-hide")||this.inputWrapper.container.classList.contains("e-static-clear"))&&this.clear(e),this.isInteract=!0,this.raiseChangeEvent(e)},l.prototype.clear=function(e){this.setProperties({value:null},!0),this.setElementValue(""),this.hiddenInput.value="";var t=k(this.element,"form");if(t){var i=this.element.nextElementSibling,s=document.createEvent("KeyboardEvent");s.initEvent("keyup",!1,!0),i.dispatchEvent(s)}},l.prototype.resetFormHandler=function(){this.element.tagName==="EJS-NUMERICTEXTBOX"?this.updateValue(null):this.updateValue(this.inputEleValue)},l.prototype.setSpinButton=function(){u(this.spinDown)||W(this.spinDown,{title:this.l10n.getConstant("decrementTitle"),"aria-label":this.l10n.getConstant("decrementTitle")}),u(this.spinUp)||W(this.spinUp,{title:this.l10n.getConstant("incrementTitle"),"aria-label":this.l10n.getConstant("incrementTitle")})},l.prototype.wireEvents=function(){y.add(this.element,"focus",this.focusHandler,this),y.add(this.element,"blur",this.focusOutHandler,this),y.add(this.element,"keydown",this.keyDownHandler,this),y.add(this.element,"keyup",this.keyUpHandler,this),y.add(this.element,"input",this.inputHandler,this),y.add(this.element,"keypress",this.keyPressHandler,this),y.add(this.element,"change",this.changeHandler,this),y.add(this.element,"paste",this.pasteHandler,this),this.enabled&&(this.bindClearEvent(),this.formEle&&y.add(this.formEle,"reset",this.resetFormHandler,this))},l.prototype.wireSpinBtnEvents=function(){y.add(this.spinUp,A.touchStartEvent,this.mouseDownOnSpinner,this),y.add(this.spinDown,A.touchStartEvent,this.mouseDownOnSpinner,this),y.add(this.spinUp,A.touchEndEvent,this.mouseUpOnSpinner,this),y.add(this.spinDown,A.touchEndEvent,this.mouseUpOnSpinner,this),y.add(this.spinUp,A.touchMoveEvent,this.touchMoveOnSpinner,this),y.add(this.spinDown,A.touchMoveEvent,this.touchMoveOnSpinner,this)},l.prototype.unwireEvents=function(){y.remove(this.element,"focus",this.focusHandler),y.remove(this.element,"blur",this.focusOutHandler),y.remove(this.element,"keyup",this.keyUpHandler),y.remove(this.element,"input",this.inputHandler),y.remove(this.element,"keydown",this.keyDownHandler),y.remove(this.element,"keypress",this.keyPressHandler),y.remove(this.element,"change",this.changeHandler),y.remove(this.element,"paste",this.pasteHandler),this.formEle&&y.remove(this.formEle,"reset",this.resetFormHandler)},l.prototype.unwireSpinBtnEvents=function(){y.remove(this.spinUp,A.touchStartEvent,this.mouseDownOnSpinner),y.remove(this.spinDown,A.touchStartEvent,this.mouseDownOnSpinner),y.remove(this.spinUp,A.touchEndEvent,this.mouseUpOnSpinner),y.remove(this.spinDown,A.touchEndEvent,this.mouseUpOnSpinner),y.remove(this.spinUp,A.touchMoveEvent,this.touchMoveOnSpinner),y.remove(this.spinDown,A.touchMoveEvent,this.touchMoveOnSpinner)},l.prototype.changeHandler=function(e){e.stopPropagation(),this.element.value.length||this.setProperties({value:null},!0);var t=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(t,e)},l.prototype.raiseChangeEvent=function(e){if(this.inputValue=u(this.inputValue)||isNaN(this.inputValue)?null:this.inputValue,this.prevValue!==this.value||this.prevValue!==this.inputValue){var t={};this.changeEventArgs={value:this.value,previousValue:this.prevValue,isInteracted:this.isInteract,isInteraction:this.isInteract,event:e},e&&(this.changeEventArgs.event=e),this.changeEventArgs.event===void 0&&(this.changeEventArgs.isInteracted=!1,this.changeEventArgs.isInteraction=!1),ws(t,this.changeEventArgs),this.prevValue=this.value,this.isInteract=!1,this.elementPrevValue=this.element.value,this.preventChange=!1,this.trigger("change",t)}},l.prototype.pasteHandler=function(){var e=this;if(!(!this.enabled||this.readonly)){var t=this.element.value;setTimeout(function(){e.numericRegex().test(e.element.value)||e.setElementValue(t)})}},l.prototype.preventHandler=function(){var e=this,t=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);setTimeout(function(){if(e.element.selectionStart>0){var i=e.element.selectionStart,s=e.element.selectionStart-1,a=0,r=e.element.value.split(""),n=Ke(e.locale),h=O("decimal",n),p=h.charCodeAt(0);e.element.value[s]===" "&&e.element.selectionStart>0&&!t?(u(e.prevVal)?e.element.value=e.element.value.trim():s!==0?e.element.value=e.prevVal:s===0&&(e.element.value=e.element.value.trim()),e.element.setSelectionRange(s,s)):isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&e.element.value[e.element.selectionStart-1].charCodeAt(0)!==45?(r.indexOf(e.element.value[e.element.selectionStart-1])!==r.lastIndexOf(e.element.value[e.element.selectionStart-1])&&e.element.value[e.element.selectionStart-1].charCodeAt(0)===p||e.element.value[e.element.selectionStart-1].charCodeAt(0)!==p)&&(e.element.value=e.element.value.substring(0,s)+e.element.value.substring(i,e.element.value.length),e.element.setSelectionRange(s,s),isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&e.element.selectionStart>0&&e.element.value.length&&e.preventHandler()):isNaN(parseFloat(e.element.value[e.element.selectionStart-2]))&&e.element.selectionStart>1&&e.element.value[e.element.selectionStart-2].charCodeAt(0)!==45&&(r.indexOf(e.element.value[e.element.selectionStart-2])!==r.lastIndexOf(e.element.value[e.element.selectionStart-2])&&e.element.value[e.element.selectionStart-2].charCodeAt(0)===p||e.element.value[e.element.selectionStart-2].charCodeAt(0)!==p)&&(e.element.setSelectionRange(s,s),e.nextEle=e.element.value[e.element.selectionStart],e.cursorPosChanged=!0,e.preventHandler()),e.cursorPosChanged===!0&&e.element.value[e.element.selectionStart]===e.nextEle&&isNaN(parseFloat(e.element.value[e.element.selectionStart-1]))&&(e.element.setSelectionRange(e.element.selectionStart+1,e.element.selectionStart+1),e.cursorPosChanged=!1,e.nextEle=null),e.element.value.trim()===""&&e.element.setSelectionRange(a,a),e.element.selectionStart>0&&(e.element.value[e.element.selectionStart-1].charCodeAt(0)===45&&e.element.selectionStart>1&&(u(e.prevVal)?e.element.value=e.element.value:e.element.value=e.prevVal,e.element.setSelectionRange(e.element.selectionStart,e.element.selectionStart)),e.element.value[e.element.selectionStart-1]===h&&e.decimals===0&&e.validateDecimalOnType&&(e.element.value=e.element.value.substring(0,s)+e.element.value.substring(i,e.element.value.length))),e.prevVal=e.element.value}})},l.prototype.keyUpHandler=function(){if(!(!this.enabled||this.readonly)){var e=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);!e&&A.isDevice&&this.preventHandler();var t=this.instance.getNumberParser({format:"n"})(this.element.value);t=t===null||isNaN(t)?null:t,this.hiddenInput.value=t||t===0?t.toString():null;var i=k(this.element,"form");if(i){var s=this.element.nextElementSibling,a=document.createEvent("KeyboardEvent");a.initEvent("keyup",!1,!0),s.dispatchEvent(a)}}},l.prototype.inputHandler=function(e){var t=this;if(!(!this.enabled||this.readonly)){var i=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform),s=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;if((s||i)&&A.isDevice&&this.preventHandler(),this.isAngular&&this.element.value!==O("decimal",Ke(this.locale))&&this.element.value!==O("minusSign",Ke(this.locale))){var a=this.instance.getNumberParser({format:"n"})(this.element.value);a=isNaN(a)?null:a,t.localChange({value:a}),this.preventChange=!0}if(this.isVue){var r=this.instance.getNumberParser({format:"n"})(this.element.value),n=this.instance.getNumberParser({format:"n"})(this.elementPrevValue),h=new RegExp("[^0-9]+$");(h.test(this.element.value)||(this.elementPrevValue.indexOf(".")!==-1||this.elementPrevValue.indexOf("-")!==-1)&&this.element.value[this.element.value.length-1]==="0")&&(r=this.value);var p={event:e,value:r===null||isNaN(r)?null:r,previousValue:n===null||isNaN(n)?null:n};this.preventChange=!0,this.elementPrevValue=this.element.value,this.trigger("input",p)}}},l.prototype.keyDownHandler=function(e){if(!this.readonly)switch(e.keyCode){case 38:e.preventDefault(),this.action(Ve,e);break;case 40:e.preventDefault(),this.action($e,e);break}},l.prototype.performAction=function(e,t,i){(e===null||isNaN(e))&&(e=0);var s=i===Ve?e+t:e-t;return s=this.correctRounding(e,t,s),this.strictMode?this.trimValue(s):s},l.prototype.correctRounding=function(e,t,i){var s=new RegExp("[,.](.*)"),a=s.test(e.toString()),r=s.test(t.toString());if(a||r){var n=a?s.exec(e.toString())[0].length:0,h=r?s.exec(t.toString())[0].length:0,p=Math.max(n,h);return e=this.roundValue(i,p)}return i},l.prototype.roundValue=function(e,t){t=t||0;var i=Math.pow(10,t);return e*=i,e=Math.round(e)/i},l.prototype.updateValue=function(e,t){t&&(this.isInteract=!0),e!==null&&!isNaN(e)&&this.decimals&&(e=this.roundNumber(e,this.decimals)),this.inputValue=e,this.changeValue(e===null||isNaN(e)?null:this.strictMode?this.trimValue(e):e),this.isDynamicChange||this.raiseChangeEvent(t)},l.prototype.updateCurrency=function(e,t){Q(e,t,this.cultureInfo),this.updateValue(this.value)},l.prototype.changeValue=function(e){if(!(e||e===0))e=null,this.setProperties({value:e},!0);else{var t=this.getNumberOfDecimals(e);this.setProperties({value:this.roundNumber(e,t)},!0)}this.modifyText(),this.strictMode||this.validateState()},l.prototype.modifyText=function(){if(this.value||this.value===0){var e=this.formatNumber(),t=this.isFocused?e:this.instance.getNumberFormat(this.cultureInfo)(this.value);this.setElementValue(t),W(this.element,{"aria-valuenow":e}),this.hiddenInput.value=this.value.toString(),this.value!==null&&this.serverDecimalSeparator&&(this.hiddenInput.value=this.hiddenInput.value.replace(".",this.serverDecimalSeparator))}else this.setElementValue(""),this.element.removeAttribute("aria-valuenow"),this.hiddenInput.value=null},l.prototype.setElementValue=function(e,t){V.setValue(e,t||this.element,this.floatLabelType,this.showClearButton)},l.prototype.validateState=function(){this.isValidState=!0,(this.value||this.value===0)&&(this.isValidState=!(this.value>this.max||this.value<this.min)),this.checkErrorClass()},l.prototype.getNumberOfDecimals=function(e){var t,i=new RegExp("[eE][-+]?([0-9]+)"),s=e.toString();if(i.test(s)){var a=i.exec(s);u(a)||(s=e.toFixed(Math.min(parseInt(a[1],10),20)))}var r=s.split(".")[1];return t=!r||!r.length?0:r.length,this.decimals!==null&&(t=t<this.decimals?t:this.decimals),t},l.prototype.formatNumber=function(){var e=this.getNumberOfDecimals(this.value);return this.instance.getNumberFormat({maximumFractionDigits:e,minimumFractionDigits:e,useGrouping:!1})(this.value)},l.prototype.trimValue=function(e){return e>this.max?this.max:e<this.min?this.min:e},l.prototype.roundNumber=function(e,t){var i=e,s=t||0,a=i.toString().split("e");i=Math.round(+(a[0]+"e"+(a[1]?Number(a[1])+s:s)));var r=i.toString().split("e");return i=+(r[0]+"e"+(r[1]?Number(r[1])-s:-s)),Number(i.toFixed(s))},l.prototype.cancelEvent=function(e){return e.preventDefault(),!1},l.prototype.keyPressHandler=function(e){if(!this.enabled||this.readonly)return!0;if(!A.isDevice&&A.info.version==="11.0"&&e.keyCode===13){var t=this.instance.getNumberParser({format:"n"})(this.element.value);return this.updateValue(t,e),!0}if(e.which===0||e.metaKey||e.ctrlKey||e.keyCode===8||e.keyCode===13)return!0;var i=String.fromCharCode(e.which),s=O("decimal",Ke(this.locale)),a=e.code==="NumpadDecimal"&&i!==s;a&&(i=s);var r=this.element.value;if(r=r.substring(0,this.element.selectionStart)+i+r.substring(this.element.selectionEnd),this.numericRegex().test(r)){if(a){var n=this.element.selectionStart+1;this.element.value=r,this.element.setSelectionRange(n,n),e.preventDefault(),e.stopPropagation()}return!0}else return e.preventDefault(),e.stopPropagation(),!1},l.prototype.numericRegex=function(){var e=Ke(this.locale),t=O("decimal",e),i="*";return t===Ks&&(t="\\"+t),this.decimals===0&&this.validateDecimalOnType?Ys:(this.decimals&&this.validateDecimalOnType&&(i="{0,"+this.decimals+"}"),new RegExp("^(-)?(((\\d+("+t+"\\d"+i+")?)|("+t+"\\d"+i+")))?$"))},l.prototype.mouseWheel=function(e){e.preventDefault();var t,i=e;i.wheelDelta?t=i.wheelDelta/120:i.detail&&(t=-i.detail/3),t>0?this.action(Ve,e):t<0&&this.action($e,e),this.cancelEvent(e)},l.prototype.focusHandler=function(e){var t=this;if(clearTimeout(yi),this.focusEventArgs={event:e,value:this.value,container:this.container},this.trigger("focus",this.focusEventArgs),!(!this.enabled||this.readonly)){if(this.isFocused=!0,C([this.container],Mt),this.prevValue=this.value,this.value||this.value===0){var i=this.formatNumber();if(this.setElementValue(i),!this.isPrevFocused)if(!A.isDevice&&A.info.version==="11.0")this.element.setSelectionRange(0,i.length);else{var s=A.isDevice&&A.isIos?600:0;yi=setTimeout(function(){t.element.setSelectionRange(0,i.length)},s)}}A.isDevice||y.add(this.element,"mousewheel DOMMouseScroll",this.mouseWheel,this)}},l.prototype.focusOutHandler=function(e){var t=this;if(this.blurEventArgs={event:e,value:this.value,container:this.container},this.trigger("blur",this.blurEventArgs),!(!this.enabled||this.readonly)){if(this.isPrevFocused){if(e.preventDefault(),A.isDevice){var i=this.element.value;this.element.focus(),this.isPrevFocused=!1;var s=this.element;setTimeout(function(){t.setElementValue(i,s)},200)}}else{this.isFocused=!1,this.element.value.length||this.setProperties({value:null},!0);var a=this.instance.getNumberParser({format:"n"})(this.element.value);this.updateValue(a),A.isDevice||y.remove(this.element,"mousewheel DOMMouseScroll",this.mouseWheel)}var r=k(this.element,"form");if(r){var n=this.element.nextElementSibling,h=document.createEvent("FocusEvent");h.initEvent("focusout",!1,!0),n.dispatchEvent(h)}}},l.prototype.mouseDownOnSpinner=function(e){var t=this;if(this.isFocused&&(this.isPrevFocused=!0,e.preventDefault()),!!this.getElementData(e)){this.getElementData(e);var i=e.currentTarget,s=i.classList.contains(Nt)?Ve:$e;y.add(i,"mouseleave",this.mouseUpClick,this),this.timeOut=setInterval(function(){t.isCalled=!0,t.action(s,e)},150),y.add(document,"mouseup",this.mouseUpClick,this)}},l.prototype.touchMoveOnSpinner=function(e){var t;if(e.type==="touchmove"){var i=e.touches;t=i.length&&document.elementFromPoint(i[0].pageX,i[0].pageY)}else t=document.elementFromPoint(e.clientX,e.clientY);t.classList.contains(Bt)||clearInterval(this.timeOut)},l.prototype.mouseUpOnSpinner=function(e){if(this.prevValue=this.value,this.isPrevFocused&&(this.element.focus(),A.isDevice||(this.isPrevFocused=!1)),A.isDevice||e.preventDefault(),!!this.getElementData(e)){var t=e.currentTarget,i=t.classList.contains(Nt)?Ve:$e;y.remove(t,"mouseleave",this.mouseUpClick),this.isCalled||this.action(i,e),this.isCalled=!1,y.remove(document,"mouseup",this.mouseUpClick);var s=k(this.element,"form");if(s){var a=this.element.nextElementSibling,r=document.createEvent("KeyboardEvent");r.initEvent("keyup",!1,!0),a.dispatchEvent(r)}}},l.prototype.getElementData=function(e){return e.which&&e.which===3||e.button&&e.button===2||!this.enabled||this.readonly?!1:(clearInterval(this.timeOut),!0)},l.prototype.floatLabelTypeUpdate=function(){V.removeFloating(this.inputWrapper);var e=this.hiddenInput;this.hiddenInput.remove(),V.addFloating(this.element,this.floatLabelType,this.placeholder,this.createElement),this.container.insertBefore(e,this.container.childNodes[1])},l.prototype.mouseUpClick=function(e){e.stopPropagation(),clearInterval(this.timeOut),this.isCalled=!1,this.spinUp&&y.remove(this.spinUp,"mouseleave",this.mouseUpClick),this.spinDown&&y.remove(this.spinDown,"mouseleave",this.mouseUpClick)},l.prototype.increment=function(e){e===void 0&&(e=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,e,Ve)),this.raiseChangeEvent()},l.prototype.decrement=function(e){e===void 0&&(e=this.step),this.isInteract=!1,this.changeValue(this.performAction(this.value,e,$e)),this.raiseChangeEvent()},l.prototype.destroy=function(){this.unwireEvents(),this.showClearButton&&(this.clearButton=document.getElementsByClassName("e-clear-icon")[0]),I(this.hiddenInput),this.showSpinButton&&(this.unwireSpinBtnEvents(),I(this.spinUp),I(this.spinDown));for(var e=["aria-labelledby","role","autocomplete","aria-readonly","aria-disabled","autocapitalize","spellcheck","aria-autocomplete","tabindex","aria-valuemin","aria-valuemax","aria-valuenow","aria-invalid"],t=0;t<e.length;t++)this.element.removeAttribute(e[t]);this.element.classList.remove("e-input"),this.container.insertAdjacentElement("afterend",this.element),I(this.container),this.spinUp=null,this.spinDown=null,this.container=null,this.hiddenInput=null,this.changeEventArgs=null,this.blurEventArgs=null,this.focusEventArgs=null,this.inputWrapper=null,V.destroy({element:this.element,floatLabelType:this.floatLabelType,properties:this.properties},this.clearButton),d.prototype.destroy.call(this)},l.prototype.getText=function(){return this.element.value},l.prototype.focusIn=function(){document.activeElement!==this.element&&this.enabled&&(this.element.focus(),g([this.container],[vi]))},l.prototype.focusOut=function(){document.activeElement===this.element&&this.enabled&&(this.element.blur(),C([this.container],[vi]))},l.prototype.getPersistData=function(){var e=["value"];return this.addOnPersist(e)},l.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){var a=s[i];switch(a){case"width":this.setElementWidth(e.width),V.calculateWidth(this.element,this.container);break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"enabled":V.setEnabled(e.enabled,this.element),this.bindClearEvent();break;case"enableRtl":V.setEnableRtl(e.enableRtl,[this.container]);break;case"readonly":V.setReadonly(e.readonly,this.element),this.readonly?W(this.element,{"aria-readonly":"true"}):this.element.removeAttribute("aria-readonly");break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.updateDataAttribute(!0),this.checkAttributes(!0),V.validateInputType(this.container,this.element);break;case"placeholder":V.setPlaceholder(e.placeholder,this.element),V.calculateWidth(this.element,this.container);break;case"step":this.step=e.step,this.validateStep();break;case"showSpinButton":this.updateSpinButton(e);break;case"showClearButton":this.updateClearButton(e);break;case"floatLabelType":this.floatLabelType=e.floatLabelType,this.floatLabelTypeUpdate();break;case"value":this.isDynamicChange=(this.isAngular||this.isVue)&&this.preventChange,this.updateValue(e.value),this.isDynamicChange&&(this.preventChange=!1,this.isDynamicChange=!1);break;case"min":case"max":Q(a,O(a,e),this),this.validateMinMax(),this.updateValue(this.value);break;case"strictMode":this.strictMode=e.strictMode,this.updateValue(this.value),this.validateState();break;case"locale":this.initCultureFunc(),this.l10n.setLocale(this.locale),this.setSpinButton(),this.updatePlaceholder(),V.setPlaceholder(this.placeholder,this.element),this.updateValue(this.value);break;case"currency":{var r=O(a,e);this.setProperties({currencyCode:r},!0),this.updateCurrency(a,r)}break;case"currencyCode":{var n=O(a,e);this.setProperties({currency:n},!0),this.updateCurrency("currency",n)}break;case"format":Q(a,O(a,e),this),this.initCultureInfo(),this.updateValue(this.value);break;case"decimals":this.decimals=e.decimals,this.updateValue(this.value)}}},l.prototype.updateClearButton=function(e){V.setClearButton(e.showClearButton,this.element,this.inputWrapper,void 0,this.createElement),this.bindClearEvent()},l.prototype.updateSpinButton=function(e){e.showSpinButton?this.spinBtnCreation():(I(this.spinUp),I(this.spinDown))},l.prototype.getModuleName=function(){return"numerictextbox"},U([m("")],l.prototype,"cssClass",void 0),U([m(null)],l.prototype,"value",void 0),U([m(-Number.MAX_VALUE)],l.prototype,"min",void 0),U([m(Number.MAX_VALUE)],l.prototype,"max",void 0),U([m(1)],l.prototype,"step",void 0),U([m(null)],l.prototype,"width",void 0),U([m(null)],l.prototype,"placeholder",void 0),U([m({})],l.prototype,"htmlAttributes",void 0),U([m(!0)],l.prototype,"showSpinButton",void 0),U([m(!1)],l.prototype,"readonly",void 0),U([m(!0)],l.prototype,"enabled",void 0),U([m(!1)],l.prototype,"showClearButton",void 0),U([m(!1)],l.prototype,"enablePersistence",void 0),U([m("n2")],l.prototype,"format",void 0),U([m(null)],l.prototype,"decimals",void 0),U([m(null)],l.prototype,"currency",void 0),U([m(null)],l.prototype,"currencyCode",void 0),U([m(!0)],l.prototype,"strictMode",void 0),U([m(!1)],l.prototype,"validateDecimalOnType",void 0),U([m("Never")],l.prototype,"floatLabelType",void 0),U([P()],l.prototype,"created",void 0),U([P()],l.prototype,"destroyed",void 0),U([P()],l.prototype,"change",void 0),U([P()],l.prototype,"focus",void 0),U([P()],l.prototype,"blur",void 0),l=U([we],l),l}(lt),ai=globalThis&&globalThis.__extends||function(){var d=function(l,e){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},d(l,e)};return function(l,e){d(l,e);function t(){this.constructor=l}l.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),L=globalThis&&globalThis.__decorate||function(d,l,e,t){var i=arguments.length,s=i<3?l:t===null?t=Object.getOwnPropertyDescriptor(l,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(d,l,e,t);else for(var r=d.length-1;r>=0;r--)(a=d[r])&&(s=(i<3?a(s):i>3?a(l,e,s):a(l,e))||s);return i>3&&s&&Object.defineProperty(l,e,s),s},Ci="e-rtl",Js="e-ddt",ki="e-ddt-hidden",Si="e-input-group-icon e-ddt-icon e-icons",he="e-show-chip",Ee="e-show-clear",Vt="e-show-dd-icon",ee="e-chip-input",We="e-input-focus",wi="e-input-group",Ei="e-icon-anim",Zs="e-clear-icon e-icons",el="e-chips-wrapper",tl="e-chips-collection",Wt="e-chips",xi="e-chipcontent",Pt="e-chips-close",q="e-icon-hide",ht="e-ddt-icon-hide",il="e-ddt e-popup",Di="e-list-parent",sl="e-popup-content",Ai="e-dropdown",Oi="e-disabled",ll="e-icons",ut="e-selectall-parent",pt="e-hide-selectall",al="e-bigger",rl="e-small",Ti="e-all-text",Ft="e-frame",Xe="e-check",Rt="e-checkbox-wrapper",Ii="e-filter-wrap",Li="e-ddt-icon",Bi="e-ddt-footer",Ni="e-ddt-header",nl="e-ddt-nodata",xe="e-no-data",ol="HeaderTemplate",hl="FooterTemplate",ul="NoRecordsTemplate",pl="ActionFailureTemplate",cl="CustomTemplate",Ht="e-remain",qt="e-overflow",Pe="e-show-text",Qe="e-total-count",Fe="e-wrap-count",dl=function(d){ai(l,d);function l(){return d!==null&&d.apply(this,arguments)||this}return L([m("child")],l.prototype,"child",void 0),L([m([])],l.prototype,"dataSource",void 0),L([m("expanded")],l.prototype,"expanded",void 0),L([m("hasChildren")],l.prototype,"hasChildren",void 0),L([m("htmlAttributes")],l.prototype,"htmlAttributes",void 0),L([m("iconCss")],l.prototype,"iconCss",void 0),L([m("imageUrl")],l.prototype,"imageUrl",void 0),L([m("parentValue")],l.prototype,"parentValue",void 0),L([m(null)],l.prototype,"query",void 0),L([m("selectable")],l.prototype,"selectable",void 0),L([m("selected")],l.prototype,"selected",void 0),L([m(null)],l.prototype,"tableName",void 0),L([m("text")],l.prototype,"text",void 0),L([m("tooltip")],l.prototype,"tooltip",void 0),L([m("value")],l.prototype,"value",void 0),l}(je),fl=function(d){ai(l,d);function l(){return d!==null&&d.apply(this,arguments)||this}return L([m(!1)],l.prototype,"autoCheck",void 0),L([m("Auto")],l.prototype,"expandOn",void 0),L([m(!1)],l.prototype,"loadOnDemand",void 0),l}(je),ml=function(d){ai(l,d);function l(e,t){var i=d.call(this,e,t)||this;return i.filterTimer=null,i.isFilteredData=!1,i.isFilterRestore=!1,i.selectedData=[],i.filterDelayTime=300,i.isClicked=!1,i.isCheckAllCalled=!1,i.isFromFilterChange=!1,i}return l.prototype.getPersistData=function(){var e=["value"];return this.addOnPersist(e)},l.prototype.getLocaleName=function(){return"drop-down-tree"},l.prototype.preRender=function(){this.inputFocus=!1,this.isPopupOpen=!1,this.isFirstRender=!0,this.isInitialized=!1,this.currentText=null,this.currentValue=null,this.oldValue=null,this.removeValue=!1,this.selectedText=[],this.treeItems=[],this.dataValue=null,this.isNodeSelected=!1,this.isDynamicChange=!1,this.clearIconWidth=0,this.headerTemplateId=""+this.element.id+ol,this.footerTemplateId=""+this.element.id+hl,this.actionFailureTemplateId=""+this.element.id+pl,this.noRecordsTemplateId=""+this.element.id+ul,this.customTemplateId=""+this.element.id+cl,this.keyConfigs={escape:"escape",altUp:"alt+uparrow",altDown:"alt+downarrow",tab:"tab",shiftTab:"shift+tab",end:"end",enter:"enter",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space",ctrlA:"ctrl+A"}},l.prototype.render=function(){var e=X("#"+this.element.id+"_tree",document);if(e){var t=X("#"+this.element.id+"_options",document);I(t||e.parentElement)}this.element.tagName==="INPUT"?(this.inputEle=this.element,u(this.inputEle.getAttribute("role"))&&(this.inputEle.setAttribute("aria-expanded","false"),this.inputEle.setAttribute("role","combobox"),this.inputEle.setAttribute("aria-haspopup","tree"),this.inputEle.setAttribute("aria-controls",this.element.id+"_options")),u(this.inputEle.getAttribute("type"))&&this.inputEle.setAttribute("type","text")):(this.inputEle=this.createElement("input",{attrs:{role:"textbox",type:"text"}}),this.element.parentElement.insertBefore(this.inputEle,this.element)),this.inputObj=V.createInput({element:this.inputEle,floatLabelType:this.floatLabelType,buttons:this.showDropDownIcon?[Si]:null,properties:{readonly:!0,placeholder:this.placeholder,enabled:this.enabled,cssClass:this.cssClass,enableRtl:this.enableRtl}},this.createElement),this.inputWrapper=this.inputObj.container,this.inputWrapper.classList.contains(wi)||this.inputWrapper.classList.add(wi),this.showDropDownIcon&&this.inputWrapper.classList.add(Vt),this.element.tagName===this.getDirective()&&this.element.appendChild(this.inputWrapper),this.createHiddenElement(),this.createClearIcon(),this.inputWrapper.classList.add(Js),this.setElementWidth(this.width),this.updateDataAttribute(),this.setHTMLAttributes(),this.setAttributes(),this.popupDiv=this.createElement("div",{className:sl}),this.popupDiv.classList.add(Ai),this.tree=this.createElement("div",{id:this.element.id+"_tree"}),this.popupDiv.appendChild(this.tree),this.destroyPopupOnHide||document.body.appendChild(this.popupDiv),this.wireTreeEvents(),g([this.popupDiv],ht),this.renderTree(),this.isRemoteData=this.fields.dataSource instanceof j,(this.allowMultiSelection||this.showCheckBox)&&(this.mode!=="Delimiter"&&this.createChip(),!this.wrapText&&this.mode!=="Custom"&&(this.overFlowWrapper=this.createElement("span",{className:qt+" "+q}),this.inputWrapper.insertBefore(this.overFlowWrapper,this.hiddenElement),this.mode!=="Box"&&g([this.overFlowWrapper],Pe))),this.isRemoteData||(this.setTreeValue(),this.setTreeText(),this.updateHiddenValue(),this.setSelectedValue(),this.wrapText||this.updateView()),this.wireEvents();var i=X("."+Di,this.treeObj.element);i&&i.getAttribute("aria-multiselectable")&&i.removeAttribute("aria-multiselectable"),this.oldValue=this.value,this.isInitialized=!0,this.hasTemplate=this.itemTemplate||this.headerTemplate||this.footerTemplate||this.actionFailureTemplate||this.noRecordsTemplate||this.customTemplate,this.renderComplete()},l.prototype.hideCheckAll=function(e){var t=u(this.popupEle)?null:this.popupEle.querySelector("."+ut);u(t)||(e&&!t.classList.contains(pt)?g([t],pt):!e&&t.classList.contains(pt)&&C([t],pt))},l.prototype.renderFilter=function(){this.filterContainer=this.createElement("div",{id:this.element.id+"_filter_wrap",className:Ii});var e=this.createElement("input",{id:this.element.id+"_filter",attrs:{autocomplete:"off","aria-label":this.filterBarPlaceholder}});this.filterContainer.appendChild(e),ge([this.filterContainer],this.popupEle),this.filterObj=new Et({value:"",showClearButton:!0,placeholder:this.filterBarPlaceholder,input:this.filterChangeHandler.bind(this)}),this.filterObj.appendTo("#"+this.element.id+"_filter")},l.prototype.filterChangeHandler=function(e){var t=this;u(e.value)||(window.clearTimeout(this.filterTimer),this.filterTimer=window.setTimeout(function(){t.filterHandler(e.value,e.event)},this.filterDelayTime))},l.prototype.isChildObject=function(){return typeof this.treeObj.fields.child=="object"},l.prototype.filterHandler=function(e,t){var i=this;this.isFromFilterChange=!0,this.isFilteredData||(this.isRemoteData&&(this.treeObj.expandedNodes=[]),this.treeData=this.treeObj.getTreeData());var s=this.cloneFields(this.fields),a={cancel:!1,preventDefaultAction:!1,event:t,text:e,fields:s};this.trigger("filtering",a,function(r){if(!r.cancel){var n=!1,h=void 0;if(i.isFilteredData=!0,e===""?(i.isFilteredData=!1,i.isFilterRestore=!0,i.isFromFilterChange=!1,h=i.cloneFields(i.fields)):r.preventDefaultAction?h=r.fields:i.treeDataType===1?h=i.selfReferencefilter(e,r.fields):i.fields.dataSource instanceof j?(h=i.remoteDataFilter(e,r.fields),h.child=i.fields.child,i.treeObj.fields=i.getTreeFields(r.fields),i.treeObj.dataBind(),n=!0):h=i.nestedFilter(e,r.fields),i.hideCheckAll(i.isFilteredData),n)return;if(i.isRemoteData&&(i.isChildObject()?h.child=i.fields.child:h=r.fields),i.treeObj.fields=i.getTreeFields(h),i.treeObj.dataBind(),i.hasTemplate&&i.portals&&i.treeObj.portals){for(var p=0;p<i.treeObj.portals.length;p++)i.portals.indexOf(i.treeObj.portals[p])===-1&&i.portals.push(i.treeObj.portals[p]);i.isReact&&i.renderReactTemplates()}}})},l.prototype.remoteDataFilter=function(e,t){var i=this;return t.dataSource=this.treeData.map(function(s){return i.remoteChildFilter(e,s)}).filter(function(s){return!u(s)}),t},l.prototype.remoteChildFilter=function(e,t,i,s){var a=this.isChildObject()?t.child:t[this.fields.child];if(u(a))return this.isMatchedNode(e,t,i,s)?t:null;for(var r=[],n=0;n<a.length;n++){var h=this.remoteChildFilter(e,a[n],!0,!0);u(h)||r.push(h)}var p=Object.assign({},t);return s=!1,r.length!==0?p.child=r:(p.child=null,p=this.isMatchedNode(e,p)?p:null),p},l.prototype.nestedFilter=function(e,t){for(var i=[],s=0;s<this.treeData.length;s++){var a=this.nestedChildFilter(e,this.treeData[s]);u(a)||i.push(a)}return t.dataSource=i,t},l.prototype.nestedChildFilter=function(e,t){var i=t[this.fields.child];if(u(i))return this.isMatchedNode(e,t)?t:null;for(var s=[],a=0;a<i.length;a++){var r=this.nestedChildFilter(e,i[a]);u(r)||s.push(r)}var n=Object.assign({},t);return s.length!==0?(n[this.fields.child]=s,n):(n[this.fields.child]=null,this.isMatchedNode(e,n)?n:null)},l.prototype.selfReferencefilter=function(e,t){for(var i=[],s=[],a=0;a<this.treeData.length;a++)this.isMatchedNode(e,this.treeData[a])&&i.push(this.treeData[a]);for(var a=0;a<i.length;a++)if(s.indexOf(i[a])===-1){s.push(i[a]);for(var r=i[a][this.fields.parentValue];!u(r);){for(var n=null,h=0;h<this.treeData.length;h++){var p=this.treeData[h][this.fields.value];if(!u(p)&&p===r){n=this.treeData[h];break}}if(!u(n)&&s.indexOf(n)===-1)s.push(n),r=n[this.fields.parentValue];else break}}return t.dataSource=s,t},l.prototype.isMatchedNode=function(e,t,i,s){var a,r=i&&s&&this.isChildObject();if(a=r?t[this.fields.child.text]:t[this.fields.text],!a){for(var n=this.fields.child;!t[n.text];)n=n.child;a=t[n.text]}return this.ignoreCase&&(a=a.toLowerCase(),e=e.toLowerCase()),this.ignoreAccent&&(a=ci.ignoreDiacritics(a),e=ci.ignoreDiacritics(e)),this.filterType==="StartsWith"?a.slice(0,e.length)===e:this.filterType==="EndsWith"?a.slice(-e.length)===e:a.indexOf(e)!==-1},l.prototype.wireEvents=function(){y.add(this.inputWrapper,"mouseup",this.dropDownClick,this),y.add(this.inputWrapper,"focus",this.focusIn,this),y.add(this.inputWrapper,"blur",this.focusOut,this),y.add(this.inputWrapper,"mousemove",this.mouseIn,this),y.add(this.inputWrapper,"mouseout",this.onMouseLeave,this),y.add(this.overAllClear,"mousedown",this.clearAll,this),y.add(window,"resize",this.windowResize,this);var e=k(this.inputWrapper,"form");e&&y.add(e,"reset",this.resetValueHandler,this),this.keyboardModule=new ye(this.inputWrapper,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},l.prototype.wireTreeEvents=function(){this.keyboardModule=new ye(this.tree,{keyAction:this.treeAction.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},l.prototype.wireCheckAllWrapperEvents=function(){this.keyboardModule=new ye(this.checkAllParent,{keyAction:this.checkAllAction.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},l.prototype.unWireEvents=function(){y.remove(this.inputWrapper,"mouseup",this.dropDownClick),y.remove(this.inputWrapper,"focus",this.focusIn),y.remove(this.inputWrapper,"blur",this.focusOut),y.remove(this.inputWrapper,"mousemove",this.mouseIn),y.remove(this.inputWrapper,"mouseout",this.onMouseLeave),y.remove(this.overAllClear,"mousedown",this.clearAll),y.remove(window,"resize",this.windowResize);var e=k(this.inputWrapper,"form");e&&y.remove(e,"reset",this.resetValueHandler)},l.prototype.dropDownClick=function(e){if(!(!this.enabled||this.readonly)){if(this.isClearButtonClick){this.isClearButtonClick=!1;return}this.isPopupOpen?this.hidePopup():(this.focusIn(e),this.renderPopup()),this.showOverAllClear()}},l.prototype.mouseIn=function(){(this.enabled||!this.readonly)&&this.showOverAllClear()},l.prototype.onMouseLeave=function(){this.inputFocus||(g([this.overAllClear],q),C([this.inputWrapper],Ee))},l.prototype.getDirective=function(){return"EJS-DROPDOWNTREE"},l.prototype.focusOut=function(e){if(!(!this.enabled||this.readonly||!this.inputFocus)&&!((A.isIE||A.info.name==="edge")&&e.target===this.inputWrapper)){var t=e.relatedTarget;t!==this.inputEle&&u(t)&&(e.target!==this.inputWrapper||!this.isPopupOpen)&&this.onFocusOut(e)}},l.prototype.onFocusOut=function(e){if(this.inputFocus=!1,this.isPopupOpen&&this.hidePopup(),this.isClearButtonClick&&(this.isClearButtonClick=!1),this.showClearButton&&(this.clearIconWidth=X(".e-clear-icon",this.inputWrapper).offsetWidth,g([this.overAllClear],q),C([this.inputWrapper],Ee)),C([this.inputWrapper],[We]),this.allowMultiSelection||this.showCheckBox){var t=this.value?!!this.value.length:!1;this.mode!=="Delimiter"&&this.mode!=="Custom"&&this.chipWrapper&&this.mode==="Default"&&(g([this.chipWrapper],q),C([this.inputWrapper],he),C([this.inputEle],ee)),!this.wrapText&&t&&this.updateView()}this.changeOnBlur&&this.triggerChangeEvent(e),this.removeValue=!1,this.oldValue=this.value,this.trigger("blur")},l.prototype.updateView=function(){!this.showCheckBox&&!this.allowMultiSelection||this.mode==="Custom"||this.inputFocus||(this.mode!=="Box"?g([this.inputWrapper,this.overFlowWrapper],Pe):g([this.inputWrapper],he),this.value&&this.value.length!==0&&(this.inputWrapper.contains(this.chipWrapper)&&g([this.chipWrapper],q),g([this.inputEle],ee),this.updateOverFlowView(),this.ensurePlaceHolder()))},l.prototype.triggerChangeEvent=function(e){var t=this.ddtCompareValues(this.oldValue,this.value);if((!t||this.isChipDelete)&&!this.removeValue){var i={e,oldValue:this.oldValue,value:this.value,isInteracted:!!e,element:this.element};this.trigger("change",i),this.oldValue=this.value}},l.prototype.ddtCompareValues=function(e,t){if(e===null||t===null){var i=e===null||e.length===0?t===e:!1;return i}else if(e.length!==t.length)return!1;for(var s=0;s<e.length;s++)if(e[s]!==t[s])return!1;return!0},l.prototype.focusIn=function(e){if(!(!this.enabled||this.readonly||this.inputFocus)){this.showOverAllClear(),this.inputFocus=!0,g([this.inputWrapper],[We]),(this.allowMultiSelection||this.showCheckBox)&&(this.mode!=="Delimiter"&&this.inputFocus&&(this.chipWrapper&&this.value&&this.value.length!==0&&(C([this.chipWrapper],q),g([this.inputEle],ee)),g([this.inputWrapper],he),this.popupObj&&this.popupObj.refreshPosition()),!this.wrapText&&this.mode!=="Custom"&&(this.inputWrapper.contains(this.overFlowWrapper)&&g([this.overFlowWrapper],q),this.mode==="Delimiter"?(C([this.inputWrapper],he),C([this.inputEle],ee)):g([this.inputWrapper],he),C([this.inputWrapper],Pe),this.ensurePlaceHolder()));var t={isInteracted:!!e,event:e};this.trigger("focus",t)}},l.prototype.treeAction=function(e){var t=this,i={cancel:!1,event:e};this.trigger("keyPress",i,function(s){if(s.cancel)e.stopImmediatePropagation();else switch(e.action){case"escape":case"altUp":t.inputWrapper.focus(),e.preventDefault(),t.isPopupOpen&&t.hidePopup();break;case"tab":case"shiftTab":t.isPopupOpen&&t.hidePopup();break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":t.showCheckBox||(t.isValueChange=!0,t.keyEventArgs=e);break;case"space":t.isValueChange=!0,t.keyEventArgs=e;break;case"ctrlA":t.allowMultiSelection&&t.selectAll(!0);break}})},l.prototype.keyActionHandler=function(e){var t=this,i={cancel:!1,event:e};this.trigger("keyPress",i,function(s){if(!s.cancel)switch(e.action){case"escape":case"altUp":t.isPopupOpen&&t.hidePopup();break;case"shiftTab":case"tab":t.isPopupOpen&&t.hidePopup(),t.inputFocus&&t.onFocusOut();break;case"altDown":t.isPopupOpen||(t.showPopup(),e.preventDefault());break;case"moveDown":t.showSelectAll&&t.showCheckBox&&t.checkAllParent.focus();break}})},l.prototype.checkAllAction=function(e){var t=this,i={cancel:!1,event:e};this.trigger("keyPress",i,function(s){if(!s.cancel)switch(e.action){case"space":t.clickHandler(e);break;case"moveDown":var a=t.treeObj.element.querySelector("li");a.focus(),g([a],["e-node-focus"])}})},l.prototype.windowResize=function(){this.popupObj&&(this.popupObj.setProperties({width:this.setWidth()}),this.popupObj.refreshPosition())},l.prototype.resetValueHandler=function(e){var t=k(this.inputWrapper,"form");t&&e.target===t&&(this.isDynamicChange=!0,this.setProperties({value:null},!0),this.resetValue(!0),this.isDynamicChange=!1)},l.prototype.getAriaAttributes=function(){return{}},l.prototype.updateOverFlowView=function(){if(this.overFlowWrapper.classList.remove(Qe),C([this.overFlowWrapper],q),this.value&&this.value.length){var e="",t=void 0,i=void 0,s=void 0,a=1,r=void 0,n=void 0,h=0;this.overFlowWrapper.innerHTML="";var p={overflowCountTemplate:"+${count} more..",totalCountTemplate:"${count} selected"};this.l10n=new fe(this.getLocaleName(),p,this.locale);var o=this.l10n.getConstant("overflowCountTemplate"),f=this.l10n.getConstant("totalCountTemplate"),c=this.createElement("span",{className:Ht});this.overFlowWrapper.appendChild(c),c.innerText=o.replace("${count}",this.value.length.toString());var v=c.offsetWidth;if(Se(c),this.showDropDownIcon&&(h=X("."+Li,this.inputWrapper).offsetWidth),!u(this.value))if(this.mode!=="Box")for(var S=0;!u(this.value[S]);S++)if(e+=S===0?"":this.delimiterChar+" ",i=this.getOverflowVal(S),e+=i,i=this.overFlowWrapper.innerHTML,this.enableHtmlSanitizer?this.overFlowWrapper.innerText=ei.sanitize(e):this.overFlowWrapper.innerHTML=e,r=this.overFlowWrapper.offsetWidth,t=this.inputWrapper.offsetWidth,r+h+this.clearIconWidth>t){for(s!==void 0&&s!==""&&(i=s,S=a+1),this.overFlowWrapper.innerHTML=i,n=this.value.length-S,r=this.overFlowWrapper.offsetWidth;r+v+h+this.clearIconWidth>=t&&r!==0&&this.overFlowWrapper.innerHTML!=="";){var b=this.overFlowWrapper.innerHTML.split(this.delimiterChar);b.pop(),this.overFlowWrapper.innerHTML=b.join(this.delimiterChar),n++,r=this.overFlowWrapper.offsetWidth}break}else r+v+h+this.clearIconWidth<=t?(s=e,a=S):S===0&&(s="",a=-1);else{g([this.chipWrapper],q);for(var w=this.chipWrapper.cloneNode(!0),x=wt("."+Wt,w),E=0;E<x.length;E++)if(i=this.overFlowWrapper.innerHTML,this.overFlowWrapper.appendChild(x[E]),e=this.overFlowWrapper.innerHTML,r=this.overFlowWrapper.offsetWidth,t=this.inputWrapper.offsetWidth,r+h+this.clearIconWidth>t){for(s!==void 0&&s!==""&&(i=s,E=a+1),this.overFlowWrapper.innerHTML=i,n=this.value.length-E,r=this.overFlowWrapper.offsetWidth;r+v+h+this.clearIconWidth>=t&&r!==0&&this.overFlowWrapper.innerHTML!=="";)this.overFlowWrapper.removeChild(this.overFlowWrapper.lastChild),n++,r=this.overFlowWrapper.offsetWidth;break}else r+v+h+this.clearIconWidth<=t?(s=e,a=E):E===0&&(s="",a=-1)}n>0&&this.overFlowWrapper.appendChild(this.updateRemainTemplate(c,n,o,f)),this.mode==="Box"&&!this.overFlowWrapper.classList.contains(Qe)&&g([c],Fe)}else this.overFlowWrapper.innerHTML="",g([this.overFlowWrapper],q);this.updateDelimMode()},l.prototype.updateRemainTemplate=function(e,t,i,s){return this.overFlowWrapper.firstChild&&this.overFlowWrapper.firstChild.nodeType===3&&this.overFlowWrapper.firstChild.nodeValue===""&&this.overFlowWrapper.removeChild(this.overFlowWrapper.firstChild),e.innerHTML="",e.innerText=this.overFlowWrapper.firstChild&&(this.overFlowWrapper.firstChild.nodeType===3||this.mode==="Box")?i.replace("${count}",t.toString()):s.replace("${count}",t.toString()),this.overFlowWrapper.firstChild&&(this.overFlowWrapper.firstChild.nodeType===3||this.mode==="Box")?C([this.overFlowWrapper],Qe):(g([this.overFlowWrapper],Qe),C([this.overFlowWrapper],Fe)),e},l.prototype.getOverflowVal=function(e){var t=this.getSelectedData(this.value[e]);return O(this.treeSettings.loadOnDemand?this.fields.text:"text",t)},l.prototype.updateDelimMode=function(){this.mode!=="Box"?X("."+Ht,this.overFlowWrapper)&&!this.overFlowWrapper.classList.contains(Qe)?(g([this.overFlowWrapper],Fe),g([this.overFlowWrapper],Pe)):(this.overFlowWrapper.classList.remove(Fe),C([this.overFlowWrapper],Fe)):X("."+Ht,this.overFlowWrapper)&&this.overFlowWrapper.classList.remove(Fe)},l.prototype.createHiddenElement=function(){this.allowMultiSelection||this.showCheckBox?this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",class:ki,tabindex:"-1",multiple:""}}):this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",tabindex:"-1",class:ki}}),ge([this.hiddenElement],this.inputWrapper),this.validationAttribute()},l.prototype.createClearIcon=function(){this.overAllClear=this.createElement("span",{className:Zs}),g([this.overAllClear],q),C([this.inputWrapper],Ee),this.showClearButton&&this.inputWrapper.insertBefore(this.overAllClear,this.inputObj.buttons[0])},l.prototype.validationAttribute=function(){var e=this.inputEle.getAttribute("name")?this.inputEle.getAttribute("name"):this.inputEle.getAttribute("id");this.hiddenElement.setAttribute("name",e),this.inputEle.removeAttribute("name");for(var t=["required","aria-required","form"],i=0;i<t.length;i++){var s=this.inputEle.getAttribute(t[i]);s&&(this.hiddenElement.setAttribute(t[i],s),this.inputEle.removeAttribute(t[i]))}},l.prototype.createChip=function(){if(!this.inputWrapper.contains(this.chipWrapper)){this.chipWrapper=this.createElement("span",{className:el}),this.chipCollection=this.createElement("span",{className:tl}),this.chipWrapper.appendChild(this.chipCollection),this.inputWrapper.insertBefore(this.chipWrapper,this.hiddenElement),g([this.inputWrapper],he);var e=this.getValidMode();e&&this.value!==null&&this.value&&this.value.length!==0?g([this.inputEle],ee):(this.value===null||this.value&&this.value.length===0||this.checkWrapper)&&g([this.chipWrapper],q)}},l.prototype.getValidMode=function(){return this.allowMultiSelection||this.showCheckBox?this.mode==="Box"?!0:!!(this.mode==="Default"&&this.inputFocus):!1},l.prototype.createSelectAllWrapper=function(){this.checkAllParent=this.createElement("div",{className:ut,attrs:{tabindex:"0"}}),this.selectAllSpan=this.createElement("span",{className:Ti}),this.selectAllSpan.textContent="";var e=k(this.element,"."+al),t=u(e)?"":rl;this.checkBoxElement=us(this.createElement,!0,{cssClass:t}),this.checkBoxElement.setAttribute("role","checkbox"),this.checkAllParent.appendChild(this.checkBoxElement),this.checkAllParent.appendChild(this.selectAllSpan),this.setLocale(),y.add(this.checkAllParent,"mouseup",this.clickHandler,this),this.wireCheckAllWrapperEvents()},l.prototype.clickHandler=function(e){var t;if(e.currentTarget&&e.currentTarget.classList.contains(ut)?t=e.currentTarget.firstElementChild.lastElementChild:t=e.target,this.checkWrapper=k(t,"."+Rt),!u(this.checkWrapper)){this.isClicked=!0;var i=X("."+Ft,this.checkWrapper);this.changeState(this.checkWrapper,i.classList.contains(Xe)?"uncheck":"check",e),this.isClicked=!1}e.preventDefault()},l.prototype.changeState=function(e,t,i){var s,a=e.getElementsByClassName(Ft)[0];t==="check"&&!a.classList.contains(Xe)?(a.classList.add(Xe),s="true",this.isReverseUpdate||(this.isCheckAllCalled=!0,this.treeObj.checkAll(),this.changeOnBlur||this.triggerChangeEvent(i)),this.setLocale(!0)):t==="uncheck"&&a.classList.contains(Xe)&&(a.classList.remove(Xe),s="false",this.isReverseUpdate||(this.treeObj.uncheckAll(),this.changeOnBlur||this.triggerChangeEvent(i)),this.setLocale(!1)),this.setMultiSelect(),this.ensurePlaceHolder(),s=t==="check"?"true":"false",u(s)||e.parentElement.setAttribute("aria-checked",s)},l.prototype.setLocale=function(e){if(this.selectAllSpan)if(this.selectAllText!=="Select All"||this.unSelectAllText!=="Unselect All"){var t=e?this.unSelectAllText:this.selectAllText;this.selectAllSpan.textContent="";for(var i=le(t),s=e?"unSelectAllText":"selectAllText",a=0,r=i({},this,s,null,!this.isStringTemplate);a<r.length;a++){var n=r[a];this.selectAllSpan.textContent=n.textContent}}else this.selectAllSpan.textContent=e?this.unSelectAllText:this.selectAllText},l.prototype.setAttributes=function(){this.inputEle.setAttribute("tabindex","-1");var e=this.element.getAttribute("id");this.hiddenElement.id=e+"_hidden",this.inputWrapper.setAttribute("tabindex","0"),W(this.inputWrapper,this.getAriaAttributes())},l.prototype.setHTMLAttributes=function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(i==="class")this.inputWrapper.classList.add(this.htmlAttributes[""+i]);else if(i==="disabled")this.setProperties({enabled:!1},!0),this.setEnable();else if(i==="readonly")this.setProperties({readonly:!0},!0),this.dataBind();else if(i==="style")this.inputWrapper.setAttribute("style",this.htmlAttributes[""+i]);else{var s=["title","id","placeholder","aria-placeholder","role","autocorrect","autocomplete","autocapitalize","spellcheck","minlength","maxlength"],a=["name","required"];i.indexOf("data")===0||a.indexOf(i)>-1?this.hiddenElement.setAttribute(i,this.htmlAttributes[""+i]):s.indexOf(i)>-1?i==="placeholder"?V.setPlaceholder(this.htmlAttributes[""+i],this.inputEle):this.inputEle.setAttribute(i,this.htmlAttributes[""+i]):this.inputEle.setAttribute(i,this.htmlAttributes[""+i])}}},l.prototype.updateDataAttribute=function(){for(var e=this.htmlAttributes,t=["class","style","id","type"],i={},s=0;s<this.element.attributes.length;s++)t.indexOf(this.element.attributes[s].name)===-1&&this.element.attributes[s].name!=="readonly"&&(i[this.element.attributes[s].name]=this.element.getAttribute(this.element.attributes[s].name));ie(i,e,i),this.setProperties({htmlAttributes:i},!0)},l.prototype.showOverAllClear=function(){if(!(!this.enabled||this.readonly)&&this.overAllClear){var e=this.value?!!this.value.length:!1;e&&this.showClearButton?(C([this.overAllClear],q),g([this.inputWrapper],Ee)):(g([this.overAllClear],q),C([this.inputWrapper],Ee))}},l.prototype.setTreeValue=function(){if(this.value!==null&&this.value.length!==0){var e=void 0;if(this.showCheckBox||this.allowMultiSelection){for(var t=0;t<this.value.length;t++)e=this.treeObj.getTreeData(this.value[t])[0],u(e)&&this.value.splice(this.value.indexOf(this.value[t]),1);this.value.length!==0&&this.setValidValue()}else e=this.treeObj.getTreeData(this.value[0])[0],u(e)?this.setProperties({value:this.currentValue},!0):(this.setProperties({text:e[this.fields.text]},!0),this.setValidValue())}},l.prototype.setTreeText=function(){if(!(this.value!==null&&!this.isInitialized)&&this.text!==null){var e=void 0,t=[];if(this.showCheckBox||this.allowMultiSelection){for(var i=this.text.split(this.delimiterChar),s=0;s<i.length;s++)e=this.getItems(i[s]),u(e)||t.push(e[this.fields.value].toString());t.length!==0?(this.oldValue=this.value,this.setProperties({value:t},!0),this.setValidValue()):this.setProperties({text:this.currentText},!0)}else e=this.getItems(this.text),u(e)?this.setProperties({text:this.currentText},!0):(this.oldValue=this.value,this.setProperties({value:[e[this.fields.value].toString()]},!0),this.setValidValue())}},l.prototype.setSelectedValue=function(){this.value==null&&(this.isInitialized||(this.oldValue=this.value,this.treeObj.selectedNodes.length>0&&!this.showCheckBox?(this.setProperties({value:this.treeObj.selectedNodes},!0),this.allowMultiSelection&&this.updateMode()):this.showCheckBox&&this.treeObj.checkedNodes&&this.treeObj.checkedNodes.length>0&&(this.setProperties({value:this.treeObj.checkedNodes},!0),Q("selectedNodes",[],this.treeObj),this.treeObj.dataBind(),this.updateMode()),this.updateSelectedValues(),this.currentText=this.text,this.currentValue=this.value))},l.prototype.setValidValue=function(){var e=this;if(!this.showCheckBox&&!this.allowMultiSelection){V.setValue(this.text,this.inputEle,this.floatLabelType);var t=this.value[0].toString();this.treeObj.selectedNodes[0]!==t&&Q("selectedNodes",[t],this.treeObj)}else{if(this.showCheckBox){var i=this.value.filter(function(s){return e.treeObj.checkedNodes.indexOf(s)===-1});(i.length>0||this.treeSettings.autoCheck)&&(this.treeObj.checkedNodes=this.value.slice(),this.treeObj.dataBind(),this.setMultiSelect())}else this.treeObj.selectedNodes=this.value.slice(),this.selectedText=[],this.updateSelectedValues();this.treeObj.dataBind()}this.currentText=this.text,this.currentValue=this.value,this.isInitialized&&this.triggerChangeEvent()},l.prototype.getItems=function(e){var t;if(this.treeDataType===1)for(var i=0;i<this.treeItems.length;i++){var s=O(this.fields.text,this.treeItems[i]);if(!u(this.treeItems[i])&&!u(s)&&s===e){t=this.treeItems[i];break}}else t=this.getNestedItems(this.treeItems,this.fields,e);return t},l.prototype.getNestedItems=function(e,t,i){for(var s,a=0,r=e.length;a<r;a++){var n=O(this.fields.text,e[a]);if(e[a]&&n&&n.toString()===i)return e[a];if(typeof t.child=="string"&&!u(O(t.child,e[a]))){var h=O(t.child,e[a]);if(s=this.getNestedItems(h,this.getChildType(t),i),s!==void 0)break}else if(this.fields.dataSource instanceof j&&!u(O("child",e[a]))){var p="child";if(s=this.getNestedItems(O(p,e[a]),this.getChildType(t),i),s!==void 0)break}}return s},l.prototype.getChildType=function(e){return typeof e.child=="string"||u(e.child)?e:e.child},l.prototype.renderTree=function(){this.treeObj=new Ms({fields:this.getTreeFields(this.fields),enableRtl:this.enableRtl,nodeSelected:this.onNodeSelected.bind(this),nodeChecked:this.onNodeChecked.bind(this),nodeChecking:this.beforeCheck.bind(this),nodeExpanded:this.onNodeExpanded.bind(this),actionFailure:this.onActionFailure.bind(this),nodeClicked:this.onNodeClicked.bind(this),dataBound:this.OnDataBound.bind(this),allowMultiSelection:this.allowMultiSelection,enableHtmlSanitizer:this.enableHtmlSanitizer,showCheckBox:this.showCheckBox,autoCheck:this.treeSettings.autoCheck,sortOrder:this.sortOrder,expandOn:this.treeSettings.expandOn,loadOnDemand:this.treeSettings.loadOnDemand,nodeSelecting:this.onBeforeSelect.bind(this),nodeTemplate:this.itemTemplate}),this.treeObj.root=this.root?this.root:this,this.treeObj.appendTo(this.tree)},l.prototype.renderPopup=function(){var e=this;this.isFilteredData&&(this.filterObj.value="",this.treeObj.fields=this.getTreeFields(this.fields),this.isFilterRestore=!0,this.isFilteredData=!1,this.hideCheckAll(!1));var t=!1,i={cancel:!1};this.trigger("beforeOpen",i,function(s){if(s.cancel?t=!0:(g([e.inputWrapper],[Ei]),e.isFirstRender?(e.popupEle=e.createElement("div",{id:e.element.id+"_options",className:il+" "+(e.cssClass!=null?e.cssClass:"")}),e.popupEle.setAttribute("role","region"),e.popupEle.setAttribute("aria-label",e.element.id),document.body.appendChild(e.popupEle),e.createPopup(e.popupEle)):(e.popupEle=e.popupObj.element,e.isReact&&e.isFilterRestore&&(e.treeObj.refresh(),e.isFilteredData=!0,e.popupEle.removeChild(e.filterContainer)))),(e.isFirstRender&&!t||e.isFilteredData)&&(e.isFilteredData=!1,ge([e.popupDiv],e.popupEle),C([e.popupDiv],ht),e.allowFiltering&&e.renderFilter(),e.showCheckBox&&e.showSelectAll&&!e.popupDiv.classList.contains(xe)&&(e.createSelectAllWrapper(),e.popupEle.insertBefore(e.checkAllParent,e.popupDiv)),e.headerTemplate&&e.setHeaderTemplate(),e.footerTemplate&&e.setFooterTemplate(),e.isFirstRender=!1,e.hasTemplate&&e.portals&&(e.treeObj.portals&&(e.portals=e.portals.concat(e.treeObj.portals.filter(function(h){return!e.portals.includes(h)}))),e.isReact&&e.renderReactTemplates(e.reactCallBack))),!t){if(W(e.inputEle,{"aria-expanded":"true"}),e.popupObj.show(null,e.zIndex===1e3?e.inputEle:null),C([e.popupEle],ht),e.updatePopupHeight(),e.popupObj.refreshPosition(),!(e.showCheckBox&&e.showSelectAll)&&!e.popupDiv.classList.contains(xe)&&e.treeItems.length>0){var a=void 0;e.value!=null&&e.text!=null?(e.treeObj.element.querySelector("li").setAttribute("tabindex","-1"),a=e.treeObj.element.querySelector('[data-uid="'+e.value[0]+'"]'),a.setAttribute("tabindex","0")):a=e.treeObj.element.querySelector("li"),a.focus(),g([a],["e-node-focus"])}if(e.checkSelectAll&&e.checkBoxElement){var r=k(e.checkBoxElement,"."+Rt);e.changeState(r,"check"),e.checkSelectAll=!1}e.allowFiltering&&(C([e.inputWrapper],[We]),e.filterObj.element.focus());var n={popup:e.popupObj};e.trigger("open",n)}})},l.prototype.reactCallBack=function(){this.updatePopupHeight(),this.popupObj.refreshPosition()},l.prototype.updatePopupHeight=function(){if(!this.isFirstRender){var e=this.getHeight();if(this.popupEle.style.maxHeight=e,this.allowFiltering){var t=Math.round(this.filterContainer.getBoundingClientRect().height);e=$(parseInt(e,10)-t+"px")}if(this.headerTemplate){var t=Math.round(this.header.getBoundingClientRect().height);e=$(parseInt(e,10)-t+"px")}if(this.showCheckBox&&this.showSelectAll&&!this.popupDiv.classList.contains(xe)){var t=Math.round(this.checkAllParent.getBoundingClientRect().height);e=$(parseInt(e,10)-t+"px")}if(this.footerTemplate){var t=Math.round(this.footer.getBoundingClientRect().height);e=$(parseInt(e,10)-t+"px")}var i=parseInt(window.getComputedStyle(this.popupEle).borderTopWidth,10);i=i+parseInt(window.getComputedStyle(this.popupEle).borderBottomWidth,10),e=$(parseInt(e,10)-i+"px"),this.popupDiv.style.maxHeight=e}},l.prototype.createPopup=function(e){var t=this;this.isFirstRender&&(this.popupObj=new si(e,{width:this.setWidth(),targetType:"relative",collision:{X:"flip",Y:"flip"},relateTo:this.inputWrapper,zIndex:this.zIndex,enableRtl:this.enableRtl,position:{X:"left",Y:"bottom"},close:function(){t.isPopupOpen=!1},open:function(){y.add(document,"mousedown",t.onDocumentClick,t),t.isPopupOpen=!0},targetExitViewport:function(){A.isDevice||t.hidePopup()}}))},l.prototype.setElementWidth=function(e){var t=this.inputWrapper;u(e)||(typeof e=="number"?t.style.width=$(e):typeof e=="string"&&(t.style.width=e.match(/px|%|em/)?e:$(e)))},l.prototype.setWidth=function(){var e=$(this.popupWidth);return e.indexOf("%")>-1?e=(this.inputWrapper.offsetWidth*parseFloat(e)/100).toString()+"px":typeof this.popupWidth=="string"&&(e=this.popupWidth.match(/px|em/)?this.popupWidth:e),e},l.prototype.getHeight=function(){var e=$(this.popupHeight);return e.indexOf("%")>-1?e=(document.documentElement.clientHeight*parseFloat(e)/100).toString()+"px":typeof this.popupHeight=="string"&&(e=this.popupHeight.match(/px|em/)?this.popupHeight:e),e},l.prototype.onDocumentClick=function(e){var t=e.target,i=k(t,"."+Di),s=k(t,"."+Ii),a=k(t,"."+Ni),r=k(t,"."+Bi),n=t.classList.contains(Ai)?!0:oi(t,".e-ddt .e-popup")||oi(t,".e-ddt .e-treeview");this.isPopupOpen&&(!u(this.inputWrapper)&&this.inputWrapper.contains(t)||i||n||a||r)||(this.allowMultiSelection||this.showCheckBox)&&(this.isPopupOpen&&t.classList.contains(Pt)||this.isPopupOpen&&(t.classList.contains(ut)||t.classList.contains(Ti)||t.classList.contains(Ft)))?(this.isDocumentClick=!1,e.preventDefault()):!u(this.inputWrapper)&&!this.inputWrapper.contains(t)&&this.inputFocus&&!s&&this.focusOut(e)},l.prototype.onActionFailure=function(e){this.trigger("actionFailure",e),this.l10nUpdate(!0),g([this.popupDiv],xe)},l.prototype.OnDataBound=function(e){this.treeItems=e.data,this.treeItems.length<=0?(this.l10nUpdate(),g([this.popupDiv],xe),this.hideCheckAll(!0)):this.popupDiv.classList.contains(xe)&&this.treeItems.length>=1&&(C([this.popupDiv],xe),this.hideCheckAll(!1)),this.treeDataType=this.getTreeDataType(this.treeItems,this.fields),this.isFirstRender&&this.isRemoteData&&(this.setTreeValue(),this.setTreeText(),this.updateHiddenValue(),this.setSelectedValue(),this.wrapText||this.updateView(),this.treeObj.element.focus());var t={data:e.data};this.trigger("dataBound",t),this.filterObj===null&&(this.isFilteredData=!1),this.isFilteredData&&this.treeObj.expandAll(),this.isFilterRestore&&(this.restoreFilterSelection(),this.isFilterRestore=!1)},l.prototype.restoreFilterSelection=function(){this.showCheckBox?this.treeObj.checkedNodes=this.value?this.value:[]:this.treeObj.selectedNodes=this.value?this.value:[]},l.prototype.setCssClass=function(e,t){var i=this.popupObj?[this.inputWrapper,this.popupObj.element]:[this.inputWrapper];!u(t)&&t!==""&&C(i,t.split(" ")),!u(e)&&e!==""&&g(i,e.split(" "))},l.prototype.setEnableRTL=function(e){e?this.inputWrapper.classList.add(Ci):this.inputWrapper.classList.remove(Ci),this.popupObj&&(this.popupObj.enableRtl=e,this.popupObj.dataBind()),this.treeObj&&(this.treeObj.enableRtl=e,this.treeObj.dataBind())},l.prototype.setEnable=function(){V.setEnabled(this.enabled,this.inputEle),this.enabled?(C([this.inputWrapper],Oi),this.inputEle.setAttribute("aria-disabled","false"),this.inputWrapper.setAttribute("aria-disabled","false")):(this.isPopupOpen&&this.hidePopup(),g([this.inputWrapper],Oi),this.inputWrapper&&this.inputWrapper.classList.contains(We)&&C([this.inputWrapper],[We]),this.inputEle.setAttribute("aria-disabled","true"),this.inputWrapper.setAttribute("aria-disabled","true"))},l.prototype.cloneFields=function(e){var t={dataSource:e.dataSource,value:e.value,text:e.text,parentValue:e.parentValue,child:this.cloneChildField(e.child),hasChildren:e.hasChildren,expanded:e.expanded,iconCss:e.iconCss,imageUrl:e.imageUrl,htmlAttributes:e.htmlAttributes,query:e.query,selected:e.selected,selectable:e.selectable,tableName:e.tableName,tooltip:e.tooltip};return t},l.prototype.cloneChildField=function(e){if(typeof e=="string")return e;var t={dataSource:e.dataSource,value:e.value,text:e.text,parentValue:e.parentValue,child:e.child?this.cloneChildField(e.child):null,hasChildren:e.hasChildren,expanded:e.expanded,iconCss:e.iconCss,imageUrl:e.imageUrl,htmlAttributes:e.htmlAttributes,query:e.query,selected:e.selected,selectable:e.selectable,tableName:e.tableName,tooltip:e.tooltip};return t},l.prototype.getTreeFields=function(e){var t={dataSource:e.dataSource,id:e.value,text:e.text,parentID:e.parentValue,child:this.getTreeChildren(e.child),hasChildren:e.hasChildren,expanded:e.expanded,iconCss:e.iconCss,imageUrl:e.imageUrl,isChecked:e.selected,htmlAttributes:e.htmlAttributes,query:e.query,selectable:e.selectable,selected:e.selected,tableName:e.tableName,tooltip:e.tooltip};return t},l.prototype.getTreeChildren=function(e){if(typeof e=="string")return e;if(!u(e)){e=this.getActualProperties(e);var t=e;return e.value&&(t.id=e.value),e.parentValue&&(t.parentID=e.parentValue),e.child&&(t.child=this.getTreeChildren(e.child)),e.selected&&this.showCheckBox&&(t.isChecked=e.selected),t}return null},l.prototype.getTreeDataType=function(e,t){if(this.fields.dataSource instanceof j){for(var i=0;i<e.length;i++)if(typeof t.child=="string"&&u(O(t.child,e[i])))return 1;return 2}u(this.fields.dataSource)&&(this.fields.dataSource=[]);for(var i=0,s=this.fields.dataSource.length;i<s;i++){if(typeof t.child=="string"&&!u(O(t.child,this.fields.dataSource[i])))return 2;if(!u(O(t.parentValue,this.fields.dataSource[i]))||!u(O(t.hasChildren,this.fields.dataSource[i])))return 1}return 1},l.prototype.setFields=function(){this.resetValue(),this.hasTemplate&&this.updateTemplate(),this.treeObj.fields=this.getTreeFields(this.fields),this.treeObj.dataBind()},l.prototype.getEventArgs=function(e){var t=e.data,i=e.nodeData,s;this.showCheckBox&&(e.action==="check"?s="select":e.action==="uncheck"&&(s="un-select"));var a={action:this.showCheckBox?s:e.action,isInteracted:this.isClicked?!0:e.isInteracted,item:e.node,itemData:this.showCheckBox?t[0]:i};return a},l.prototype.onBeforeSelect=function(e){e.isInteracted&&(this.oldValue=this.value?this.value.slice():this.value,this.value===null&&this.setProperties({value:[]},!0))},l.prototype.updateHiddenValue=function(){this.allowMultiSelection||this.showCheckBox||(this.value&&this.value.length?this.hiddenElement.innerHTML='<option selected value ="'+this.value[0]+'">'+this.text+"</option>":this.hiddenElement.innerHTML="")},l.prototype.onNodeSelected=function(e){if(!this.showCheckBox){var t;if(e.isInteracted){var i=O("id",e.nodeData).toString();this.allowMultiSelection?this.allowMultiSelection&&this.setMultiSelect():(this.hiddenElement.innerHTML="",this.setProperties({value:[i]},!0),this.itemTemplate?t=O("text",this.treeObj.getNode(i)):t=O("text",e.nodeData).toString(),V.setValue(t,this.inputEle,this.floatLabelType),this.setProperties({text:t},!0),this.currentText=this.text,this.currentValue=this.value,W(this.inputWrapper,{"aria-describedby":this.element.id}),W(this.inputWrapper,{"aria-activedescendant":i.toString()}),this.updateHiddenValue(),this.showOverAllClear(),this.hidePopup(),this.isNodeSelected=!0)}var s=this.getEventArgs(e);this.trigger("select",s),this.isValueChange&&!this.changeOnBlur&&(this.triggerChangeEvent(this.keyEventArgs),this.isValueChange=!1)}},l.prototype.onNodeClicked=function(e){!this.changeOnBlur&&this.isNodeSelected&&(this.triggerChangeEvent(e.event),this.isNodeSelected=!1);var t=e.event.target;if((t.classList.contains("e-fullrow")||t.classList.contains("e-list-text"))&&this.showCheckBox){this.isClicked=!0;var i=this.treeObj.getNode(e.node);i.isChecked==="true"?this.treeObj.uncheckAll([e.node]):this.treeObj.checkAll([e.node]),this.isClicked=!1,this.setMultiSelect(),this.ensurePlaceHolder()}!this.changeOnBlur&&(this.allowMultiSelection||this.showCheckBox)&&this.triggerChangeEvent(e.event)},l.prototype.onNodeChecked=function(e){var t=this.getEventArgs(e);if(this.trigger("select",t),this.isFilteredData&&e.action==="uncheck"){var i=O("id",e.data[0]).toString();this.removeSelectedData(i,!0)}if(!this.isChipDelete&&e.isInteracted&&(this.setMultiSelect(),this.ensurePlaceHolder()),this.showSelectAll&&this.checkBoxElement){var s=this.treeObj.element.querySelectorAll("li"),a=this.treeObj.element.querySelectorAll("li[aria-checked=true]"),r=k(this.checkBoxElement,"."+Rt);r&&e.action==="uncheck"&&(e.isInteracted||a.length===0||!u(e.data[0])&&e.data[0].isChecked==="false")?(this.isReverseUpdate=!0,this.changeState(r,"uncheck"),this.isReverseUpdate=!1):r&&e.action==="check"&&a.length===s.length&&(e.isInteracted||this.isCheckAllCalled||!u(e.data[0])&&e.data[0].isChecked==="true")&&(this.isReverseUpdate=!0,this.isCheckAllCalled=!1,this.changeState(r,"check"),this.isReverseUpdate=!1)}},l.prototype.beforeCheck=function(e){e.isInteracted&&(this.oldValue=this.value?this.value.slice():this.value)},l.prototype.onNodeExpanded=function(e){if(this.hasTemplate&&this.portals&&this.treeObj.portals){for(var t=0;t<this.treeObj.portals.length;t++)this.portals.indexOf(this.treeObj.portals[t])===-1&&this.portals.push(this.treeObj.portals[t]);this.renderReactTemplates()}},l.prototype.updateClearButton=function(e){if(e?this.inputWrapper.contains(this.overAllClear)?(C([this.overAllClear],q),g([this.inputWrapper],Ee)):this.inputEle.parentElement.insertBefore(this.overAllClear,this.inputEle.nextSibling):(g([this.overAllClear],q),C([this.inputWrapper],Ee)),(this.allowMultiSelection||this.showCheckBox)&&this.chipWrapper)for(var t=wt("."+Pt,this.chipWrapper),i=0;i<t.length;i++)e?C([t[i]],q):g([t[i]],q)},l.prototype.updateDropDownIconState=function(e){var t=X("."+Li,this.inputWrapper);e?(t?C([t],q):V.appendSpan(Si,this.inputWrapper,this.createElement),g([this.inputWrapper],Vt)):(g([t],q),C([this.inputWrapper],Vt))},l.prototype.updateMode=function(){if(this.mode!=="Custom")if(this.mode!=="Delimiter"){this.inputWrapper.contains(this.chipWrapper)||this.createChip();var e=this.getValidMode();this.chipWrapper.classList.contains(q)&&e?(C([this.chipWrapper],q),g([this.inputWrapper],he)):e||(g([this.chipWrapper],q),C([this.inputWrapper],he));var t=this.value!==null?this.value.length!==0:!1;e&&t?g([this.inputEle],ee):C([this.inputEle],ee)}else this.inputEle.classList.contains(ee)&&(C([this.inputEle],ee),this.chipWrapper&&(g([this.chipWrapper],q),C([this.inputWrapper],he)))},l.prototype.ensurePlaceHolder=function(){(u(this.value)||this.value&&this.value.length===0)&&(C([this.inputEle],ee),this.chipWrapper&&g([this.chipWrapper],q))},l.prototype.ensureClearIconPosition=function(e){e!=="Never"&&this.inputWrapper.insertBefore(this.overAllClear,this.inputObj.buttons[0])},l.prototype.setMultiSelectValue=function(e){if(!this.isFilteredData)this.setProperties({value:this.isFromFilterChange&&e&&e.length===0?this.value:e},!0),this.isFromFilterChange=!1,e&&e.length!==0&&!this.showCheckBox&&(this.treeObj.selectedNodes=this.value.slice(),this.treeObj.dataBind());else{for(var t=u(this.value)?[]:this.value,i=0;i<e.length;i++)(u(this.value)||this.value.indexOf(e[i])===-1)&&t.push(e[i]);this.setProperties({value:t},!0)}},l.prototype.setMultiSelect=function(){if(this.showCheckBox&&!this.isDynamicChange)this.setMultiSelectValue(this.treeObj.checkedNodes.slice());else{var e=this.allowMultiSelection?this.showCheckBox?this.treeObj.checkedNodes:this.treeObj.selectedNodes:this.value?this.showCheckBox?this.value:[this.value[0]]:null;this.setMultiSelectValue(e),this.showCheckBox&&this.value!==null&&(this.treeObj.checkedNodes=this.value,this.treeObj.dataBind())}this.selectedText=[];var t=this.allowMultiSelection?!0:!!this.showCheckBox;this.inputWrapper.contains(this.chipWrapper)&&!t&&(C([this.inputEle],ee),I(this.chipWrapper));var i=this.getValidMode();i&&this.value!==null&&(g([this.inputEle],ee),this.chipWrapper&&C([this.chipWrapper],q));var s=this.value?!!this.value.length:!1;this.chipWrapper&&this.mode==="Box"&&!s&&(g([this.chipWrapper],q),C([this.inputEle],ee)),this.updateSelectedValues()},l.prototype.getSelectedData=function(e){var t=null;if(this.isFilteredData){for(var i=0;i<this.selectedData.length;i++)if(O(this.treeSettings.loadOnDemand?this.fields.value:"id",this.selectedData[i]).toString()===e){t=this.selectedData[i];break}}return u(t)&&(this.treeSettings.loadOnDemand?t=this.getNodeData(e):t=this.treeObj.getNode(e),u(t)||this.selectedData.push(t)),t},l.prototype.getNodeData=function(e){var t;if(u(e))return t;if(this.treeDataType===1)for(var i=0,s=this.treeItems.length;i<s;i++){var a=O(this.fields.value,this.treeItems[i]);if(!u(this.treeItems[i])&&!u(a)&&a.toString()===e)return this.treeItems[i]}else return this.getChildNodeData(this.treeItems,this.fields,e);return t},l.prototype.getChildNodeData=function(e,t,i){var s;if(u(e))return s;for(var a=0,r=e.length;a<r;a++){var n=O(t.value,e[a]);if(e[a]&&n&&n.toString()===i)return e[a];if(typeof t.child=="string"&&!u(O(t.child,e[a]))){var h=O(t.child,e[a]);if(s=this.getChildNodeData(h,this.getChildMapperFields(t),i),s!==void 0)break}else if(this.fields.dataSource instanceof j&&!u(O("child",e[a]))){var p="child";if(s=this.getChildNodeData(O(p,e[a]),this.getChildMapperFields(t),i),s!==void 0)break}}return s},l.prototype.getChildMapperFields=function(e){return typeof e.child=="string"||u(e.child)?e:e.child},l.prototype.removeSelectedData=function(e,t){var i=u(this.value)?[]:this.value.slice();i.splice(i.indexOf(e),1),this.setProperties({value:i},t);for(var s=0;s<this.selectedData.length;s++)if(O(this.treeSettings.loadOnDemand?this.fields.value:"id",this.selectedData[s]).toString()===e){this.selectedData.splice(s,1);break}},l.prototype.updateSelectedValues=function(){this.dataValue="";var e,t,i="",s;this.hiddenElement.innerHTML="";var a="";if((!this.isChipDelete||this.treeSettings.autoCheck)&&this.inputWrapper.contains(this.chipWrapper)&&(this.chipCollection.innerHTML=""),this.isFilteredData||(this.selectedData=[]),!u(this.value)){for(var r=0,n=this.value.length;r<n;r++)s=this.getSelectedData(this.value[r]),t=O(this.treeSettings.loadOnDemand?this.fields.text:"text",s),this.selectedText.push(t),e=this.selectedText[this.selectedText.length-1],this.selectedText.length>1?(this.dataValue+=this.delimiterChar+" "+e,i+=","+e):(this.dataValue+=e,i+=e),this.mode!=="Custom"&&this.mode!=="Delimiter"&&(!this.isChipDelete||this.treeSettings.autoCheck)&&(this.allowMultiSelection||this.showCheckBox)&&this.setChipValues(e,this.value[r]),a+='<option selected value ="'+this.value[r]+'">'+this.selectedText[this.selectedText.length-1]+"</option>";this.selectedText.length>=1&&this.setProperties({text:i},!0),this.hiddenElement.innerHTML=a,this.mode==="Custom"&&(this.allowMultiSelection||this.showCheckBox)&&this.setTagValues()}var h=this.getValidMode();this.mode!=="Custom"&&this.mode!=="Box"&&(this.allowMultiSelection||this.showCheckBox)&&!h&&this.chipWrapper&&(g([this.chipWrapper],q),C([this.inputWrapper],he)),V.setValue(this.dataValue,this.inputEle,this.floatLabelType),i===""?this.setProperties({text:null},!0):this.setProperties({text:i},!0),this.showClearButton&&this.inputFocus&&this.showOverAllClear(),(this.allowMultiSelection||this.showCheckBox)&&this.popupObj&&this.popupObj.refreshPosition(),this.currentText=this.text,this.currentValue=this.value},l.prototype.setChipValues=function(e,t){this.inputWrapper.contains(this.chipWrapper)||this.createChip();var i=this.createElement("span",{className:Wt,attrs:{"data-value":t}}),s=this.createElement("span",{className:xi}),a=this.createElement("span",{className:Pt+" "+ll});this.enableHtmlSanitizer?s.innerText=ei.sanitize(e):s.innerHTML=e,i.appendChild(s),this.chipCollection.appendChild(i),this.showClearButton&&(i.appendChild(a),y.add(a,"mousedown",this.removeChip,this))},l.prototype.setTagValues=function(){if(!(this.value===null||this.text==null)){this.inputWrapper.contains(this.chipWrapper)||this.createChip(),this.inputWrapper.classList.contains(he)||g([this.inputWrapper],he);var e=this.createElement("span",{className:Wt});this.inputEle.classList.contains(ee)||g([this.inputEle],ee),this.chipWrapper.classList.contains(q)&&C([this.chipWrapper],q);var t=this.createElement("span",{className:xi}),i=this.customTemplate,s=this.customTemplateId,a="customTemplate",r=this.templateComplier(i),n=r({value:this.value,text:this.text},this,a,s,this.isStringTemplate,void 0,t);n&&(n=Array.prototype.slice.call(n),Z(n,t)),e.appendChild(t),this.chipCollection.appendChild(e)}},l.prototype.setSelectAllWrapper=function(e){this.isFirstRender||(e&&!this.popupEle.contains(this.checkAllParent)&&this.showCheckBox?(this.createSelectAllWrapper(),this.popupEle.insertBefore(this.checkAllParent,this.popupDiv)):this.popupEle.contains(this.checkAllParent)&&(I(this.checkAllParent),this.checkAllParent=null))},l.prototype.setHeaderTemplate=function(){this.header?this.header.innerHTML="":(this.header=this.createElement("div"),g([this.header],Ni));var e=this.templateComplier(this.headerTemplate),t=e({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,void 0,this.header);t&&(t=Array.prototype.slice.call(t),Z(t,this.header)),this.popupEle.insertBefore(this.header,this.checkAllParent?this.checkAllParent:this.popupDiv)},l.prototype.templateComplier=function(e){if(e)try{return typeof e!="function"&&document.querySelectorAll(e).length?le(document.querySelector(e).innerHTML.trim()):le(e)}catch{return le(e)}return le(e)},l.prototype.setFooterTemplate=function(){this.footer?this.footer.innerHTML="":(this.footer=this.createElement("div"),g([this.footer],Bi));var e=this.templateComplier(this.footerTemplate),t=e({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,void 0,this.footer);t&&(t=Array.prototype.slice.call(t),Z(t,this.footer)),Z([this.footer],this.popupEle)},l.prototype.clearAll=function(e){!this.enabled||this.readonly||(this.resetValue(),this.showOverAllClear(),(this.allowMultiSelection||this.showCheckBox)&&(this.popupObj&&this.popupObj.refreshPosition(),this.wrapText||this.updateOverflowWrapper(!0)),e&&(this.isClearButtonClick=!0),this.changeOnBlur||this.triggerChangeEvent(e))},l.prototype.removeChip=function(e){if(!(!this.enabled||this.readonly)){var t=e.target.parentElement,i=t.getAttribute("data-value");this.chipCollection&&t&&Se(t),this.isChipDelete=!0,this.isClearButtonClick=!0,this.removeSelectedData(i,!0),this.selectedText=[],this.allowMultiSelection&&(this.treeObj.selectedNodes=this.value.slice(),this.updateSelectedValues()),this.showCheckBox&&(this.treeObj.uncheckAll([i]),this.clearCheckAll(),this.setMultiSelect()),this.triggerChangeEvent(e),this.isChipDelete=!1,this.ensurePlaceHolder()}},l.prototype.resetValue=function(e){this.value===[]&&this.text==null||(V.setValue(null,this.inputEle,this.floatLabelType),e||(this.oldValue=this.value,this.setProperties({value:[]},!0)),this.dataValue=null,this.setProperties({text:null},!0),this.selectedData=[],Q("selectedNodes",[],this.treeObj),this.hiddenElement.innerHTML="",this.showCheckBox&&(this.treeObj.uncheckAll(),this.setMultiSelect(),this.clearCheckAll()),this.oldValue===null&&!e?this.removeValue=!0:e&&this.triggerChangeEvent(),(this.allowMultiSelection||this.showCheckBox)&&this.chipWrapper&&(this.chipCollection.innerHTML="",this.wrapText||this.updateOverflowWrapper(!0),this.ensurePlaceHolder()))},l.prototype.clearCheckAll=function(){this.showSelectAll&&this.value&&this.value.length===0&&this.setLocale(!1)},l.prototype.selectAllItems=function(e){if(this.showCheckBox)e?(this.isCheckAllCalled=!0,this.treeObj.checkAll()):this.treeObj.uncheckAll(),this.checkSelectAll=e;else if(this.allowMultiSelection)if(!e)this.treeObj.selectedNodes=[];else{for(var t=wt("li",this.treeObj.element),i=void 0,s=[],a=0;a<t.length;a++)i=t[a].getAttribute("data-uid").toString(),s.push(i);this.treeObj.selectedNodes=s}this.updateMode(),this.setMultiSelect(),this.wrapText||(e?this.updateView():this.updateOverflowWrapper(!0))},l.prototype.updateTreeSettings=function(e){var t=Object.keys(e.treeSettings)[0];if(t==="autoCheck")this.treeObj.autoCheck=this.treeSettings.autoCheck;else if(t==="loadOnDemand")this.treeObj.loadOnDemand=this.treeSettings.loadOnDemand;else if(t==="expandOn"){this.treeObj.expandOn=this.treeSettings.expandOn,this.treeObj.dataBind();return}this.treeObj.dataBind(),this.setMultiSelect(),this.updateValue(this.value)},l.prototype.updateCheckBoxState=function(e){this.hasTemplate&&this.updateTemplate(),this.wrapText||this.updateOverflowWrapper(!1),this.treeObj.showCheckBox=e,this.treeObj.dataBind(),this.isDynamicChange=!0,this.setSelectAllWrapper(this.showSelectAll),this.showSelectAll&&this.setLocale(),this.showCheckBox&&this.updateMode(),this.setMultiSelect(),this.isDynamicChange=!1},l.prototype.updateTemplate=function(){this.popupObj&&(this.clearTemplate(),this.portals=[],this.popupObj.destroy(),this.isPopupOpen?(this.hidePopup(),this.isFirstRender=!0,this.renderPopup()):this.isFirstRender=!0)},l.prototype.l10nUpdate=function(e){if(this.noRecord?this.noRecord.innerHTML="":this.noRecord=this.createElement("div"),this.noRecordsTemplate!=="No Records Found"||this.actionFailureTemplate!=="The Request Failed"){var t=e?this.actionFailureTemplate:this.noRecordsTemplate,i=e?this.actionFailureTemplateId:this.noRecordsTemplateId,s=e?"actionFailureTemplate":"noRecordsTemplate",a=this.templateComplier(t),r=a({},this,s,i,this.isStringTemplate,void 0,this.noRecord);r&&(r=Array.prototype.slice.call(r),Z(r,this.noRecord))}else{var n={noRecordsTemplate:"No Records Found",actionFailureTemplate:"The Request Failed"};this.l10n=new fe(this.getLocaleName(),n,this.locale),this.noRecord.innerHTML=e?this.l10n.getConstant("actionFailureTemplate"):this.l10n.getConstant("noRecordsTemplate")}g([this.noRecord],nl),ge([this.noRecord],this.popupDiv)},l.prototype.updateRecordTemplate=function(e){this.treeItems&&this.treeItems.length<=0&&(this.l10nUpdate(e),this.hasTemplate&&this.updateTemplate())},l.prototype.updateOverflowWrapper=function(e){e?this.inputWrapper.contains(this.overFlowWrapper)&&e&&(this.overFlowWrapper.innerHTML=""):this.inputWrapper.contains(this.overFlowWrapper)||(this.overFlowWrapper=this.createElement("span",{className:qt+" "+q}),this.inputWrapper.insertBefore(this.overFlowWrapper,this.hiddenElement))},l.prototype.updateMultiSelection=function(e){this.wrapText||this.updateOverflowWrapper(!1),this.treeObj.allowMultiSelection=e,this.treeObj.dataBind(),this.updateOption(),this.allowMultiSelection&&this.updateMode(),this.setMultiSelect()},l.prototype.updateAllowFiltering=function(e){this.isFirstRender||(e?this.renderFilter():this.destroyFilter())},l.prototype.updateFilterPlaceHolder=function(){this.filterObj&&(this.filterObj.placeholder=this.filterBarPlaceholder,this.filterObj.element.setAttribute("aria-label",this.filterBarPlaceholder))},l.prototype.updateValue=function(e){this.isDynamicChange=!0,u(e)||e.length===0?this.resetValue(!0):(this.setTreeValue(),(this.allowMultiSelection||this.showCheckBox)&&!this.wrapText&&(this.updateOverflowWrapper(!1),this.updateView())),this.updateHiddenValue(),this.isDynamicChange=!1},l.prototype.updateText=function(e){u(e)?this.resetValue():(this.setTreeText(),(this.allowMultiSelection||this.showCheckBox)&&!this.wrapText&&(this.updateOverflowWrapper(!1),this.updateView())),this.updateHiddenValue()},l.prototype.updateModelMode=function(){var e=this.allowMultiSelection?!0:!!this.showCheckBox;if(e){if(!this.wrapText){var t=X("."+qt,this.inputWrapper);t&&(t.innerHTML="")}this.updateMode(),this.setMultiSelect(),!this.wrapText&&this.value&&this.value.length!==0&&(this.updateOverFlowView(),g([this.inputEle],ee),this.mode==="Box"?C([this.overFlowWrapper,this.inputWrapper],Pe):g([this.overFlowWrapper,this.inputWrapper],Pe))}},l.prototype.updateOption=function(){!this.hiddenElement.hasAttribute("multiple")&&(this.allowMultiSelection||this.showCheckBox)?this.hiddenElement.setAttribute("multiple",""):this.hiddenElement.hasAttribute("multiple")&&!this.allowMultiSelection&&!this.showCheckBox&&this.hiddenElement.removeAttribute("multiple")},l.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){var a=s[i];switch(a){case"width":this.setElementWidth(e.width),this.popupObj&&(this.popupObj.element.style.width=this.setWidth());break;case"placeholder":V.setPlaceholder(e.placeholder,this.inputEle);break;case"cssClass":this.setCssClass(e.cssClass,t.cssClass);break;case"enableRtl":this.setEnableRTL(this.enableRtl);break;case"fields":this.setFields();break;case"readonly":V.setReadonly(e.readonly,this.inputEle);break;case"enabled":this.setEnable();break;case"floatLabelType":V.removeFloating(this.inputObj),V.addFloating(this.inputEle,e.floatLabelType,this.placeholder,this.createElement),this.ensureClearIconPosition(e.floatLabelType);break;case"showClearButton":this.updateClearButton(e.showClearButton);break;case"allowFiltering":this.updateAllowFiltering(e.allowFiltering);break;case"filterBarPlaceholder":this.updateFilterPlaceHolder();break;case"value":this.oldValue=t.value,this.updateValue(e.value);break;case"text":this.updateText(e.text);break;case"allowMultiSelection":this.updateMultiSelection(e.allowMultiSelection);break;case"mode":if(!this.showCheckBox&&!this.allowMultiSelection)return;this.mode==="Custom"?(this.overFlowWrapper&&I(this.overFlowWrapper),this.chipWrapper&&I(this.chipWrapper),this.setTagValues()):(t.mode==="Custom"&&this.updateOverflowWrapper(this.wrapText),this.updateModelMode());break;case"delimiterChar":if(this.mode==="Box")return;(this.showCheckBox||this.allowMultiSelection)&&this.setMultiSelect();break;case"selectAllText":this.showCheckBox&&this.showSelectAll&&this.setLocale();break;case"unSelectAllText":this.showCheckBox&&this.showSelectAll&&this.setLocale(!1);break;case"showSelectAll":this.showCheckBox&&(this.setSelectAllWrapper(e.showSelectAll),this.updatePopupHeight());break;case"showCheckBox":this.updateCheckBoxState(e.showCheckBox),this.wrapText||this.updateOverflowWrapper(!0),this.updatePopupHeight(),this.updateOption();break;case"treeSettings":this.updateTreeSettings(e);break;case"customTemplate":if(this.mode!=="Custom")return;this.chipCollection.innerHTML="",this.setTagValues();break;case"sortOrder":this.hasTemplate&&this.updateTemplate(),this.treeObj.sortOrder=e.sortOrder,this.treeObj.dataBind(),this.updateValue(this.value);break;case"showDropDownIcon":this.updateDropDownIconState(e.showDropDownIcon);break;case"popupWidth":this.popupObj&&(this.popupObj.element.style.width=this.setWidth());break;case"popupHeight":this.popupObj&&this.updatePopupHeight();break;case"zIndex":this.popupObj&&(this.popupObj.zIndex=e.zIndex,this.popupObj.dataBind());break;case"headerTemplate":this.updateTemplate();break;case"footerTemplate":this.updateTemplate();break;case"itemTemplate":this.updateTemplate(),this.treeObj.nodeTemplate=e.itemTemplate,this.treeObj.dataBind();break;case"noRecordsTemplate":this.updateRecordTemplate();break;case"actionFailureTemplate":this.updateRecordTemplate(!0);break;case"htmlAttributes":this.setHTMLAttributes();break;case"wrapText":this.updateOverflowWrapper(this.wrapText),(this.allowMultiSelection||this.showCheckBox)&&!this.wrapText?this.updateView():(g([this.overFlowWrapper],q),this.chipWrapper&&this.mode==="Box"?C([this.chipWrapper],q):(C([this.inputWrapper],he),C([this.inputEle],ee)),this.ensurePlaceHolder());break}}},l.prototype.clear=function(){this.clearAll(),this.inputFocus?this.onFocusOut():(this.changeOnBlur&&this.triggerChangeEvent(),this.removeValue=!1)},l.prototype.destroy=function(){for(this.clearTemplate(),this.unWireEvents(),this.setCssClass(null,this.cssClass),this.setProperties({text:null},!0),this.treeObj.destroy(),this.destroyFilter(),this.popupObj&&(this.popupObj.destroy(),I(this.popupObj.element)),this.element.tagName!==this.getDirective()&&this.inputWrapper.parentElement.insertBefore(this.element,this.inputWrapper),V.setValue(null,this.inputEle,this.floatLabelType),I(this.inputWrapper),I(this.popupDiv),I(this.hiddenElement),this.element.classList.remove("e-input"),(this.showCheckBox||this.allowMultiSelection)&&this.element.classList.remove(ee),this.inputObj=null;this.hiddenElement.options.length>0;)this.hiddenElement.remove(0);this.hiddenElement.innerHTML="",this.hiddenElement=null,this.inputWrapper=null,this.popupDiv=null,this.tree=null,this.popupObj=null,this.treeObj=null,this.overAllClear=null,this.chipWrapper=null,this.chipCollection=null,this.checkAllParent=null,this.selectAllSpan=null,this.checkBoxElement=null,this.checkWrapper=null,this.popupEle=null,this.header=null,this.footer=null,this.overFlowWrapper=null,this.keyboardModule=null,d.prototype.destroy.call(this),this.setProperties({value:[]},!0)},l.prototype.destroyFilter=function(){this.filterObj&&(this.filterObj.destroy(),I(this.filterObj.element),I(this.filterContainer),this.filterObj=null)},l.prototype.destroyPopup=function(){this.isPopupOpen=!1,this.isReact&&this.clearTemplate(),this.popupObj&&(this.popupObj.destroy(),I(this.popupObj.element))},l.prototype.ensureVisible=function(e){this.treeObj.ensureVisible(e)},l.prototype.getData=function(e){return this.treeObj.getTreeData(e)},l.prototype.hidePopup=function(){var e={popup:this.popupObj};this.inputWrapper.classList.remove(Ei),this.popupEle&&g([this.popupEle],ht),W(this.inputEle,{"aria-expanded":"false"}),this.popupObj&&this.isPopupOpen&&(this.popupObj.hide(),this.inputFocus&&(this.inputWrapper.focus(),this.allowFiltering&&g([this.inputWrapper],[We])),this.trigger("close",e),this.destroyPopupOnHide&&(this.isFirstRender=!0,this.destroyPopup()))},l.prototype.selectAll=function(e){this.selectAllItems(e)},l.prototype.showPopup=function(){!this.enabled||this.readonly||this.isPopupOpen||(this.renderPopup(),this.focusIn())},l.prototype.getModuleName=function(){return"dropdowntree"},L([m("The Request Failed")],l.prototype,"actionFailureTemplate",void 0),L([m(!1)],l.prototype,"allowFiltering",void 0),L([m(!1)],l.prototype,"allowMultiSelection",void 0),L([m(!0)],l.prototype,"changeOnBlur",void 0),L([m("")],l.prototype,"cssClass",void 0),L([m("${value.length} item(s) selected")],l.prototype,"customTemplate",void 0),L([m(",")],l.prototype,"delimiterChar",void 0),L([m(!0)],l.prototype,"enabled",void 0),L([tt({},dl)],l.prototype,"fields",void 0),L([m(null)],l.prototype,"filterBarPlaceholder",void 0),L([m("StartsWith")],l.prototype,"filterType",void 0),L([m("Never")],l.prototype,"floatLabelType",void 0),L([m(null)],l.prototype,"footerTemplate",void 0),L([m(!1)],l.prototype,"ignoreAccent",void 0),L([m(!0)],l.prototype,"ignoreCase",void 0),L([m(null)],l.prototype,"headerTemplate",void 0),L([m({})],l.prototype,"htmlAttributes",void 0),L([m(null)],l.prototype,"itemTemplate",void 0),L([m("Default")],l.prototype,"mode",void 0),L([m("No Records Found")],l.prototype,"noRecordsTemplate",void 0),L([m(null)],l.prototype,"placeholder",void 0),L([m("300px")],l.prototype,"popupHeight",void 0),L([m("100%")],l.prototype,"popupWidth",void 0),L([m(!1)],l.prototype,"readonly",void 0),L([m(!1)],l.prototype,"showSelectAll",void 0),L([m("Select All")],l.prototype,"selectAllText",void 0),L([m(!1)],l.prototype,"showCheckBox",void 0),L([m(!0)],l.prototype,"destroyPopupOnHide",void 0),L([m(!0)],l.prototype,"enableHtmlSanitizer",void 0),L([m(!0)],l.prototype,"showClearButton",void 0),L([m(!0)],l.prototype,"showDropDownIcon",void 0),L([m("None")],l.prototype,"sortOrder",void 0),L([m(null)],l.prototype,"text",void 0),L([tt({},fl)],l.prototype,"treeSettings",void 0),L([m("Unselect All")],l.prototype,"unSelectAllText",void 0),L([m(null)],l.prototype,"value",void 0),L([m("100%")],l.prototype,"width",void 0),L([m(1e3)],l.prototype,"zIndex",void 0),L([m(!1)],l.prototype,"wrapText",void 0),L([P()],l.prototype,"actionFailure",void 0),L([P()],l.prototype,"beforeOpen",void 0),L([P()],l.prototype,"change",void 0),L([P()],l.prototype,"close",void 0),L([P()],l.prototype,"blur",void 0),L([P()],l.prototype,"created",void 0),L([P()],l.prototype,"dataBound",void 0),L([P()],l.prototype,"destroyed",void 0),L([P()],l.prototype,"filtering",void 0),L([P()],l.prototype,"focus",void 0),L([P()],l.prototype,"keyPress",void 0),L([P()],l.prototype,"open",void 0),L([P()],l.prototype,"select",void 0),l=L([we],l),l}(lt),ti="e-float-line",st="e-float-text",qe="e-label-top",Ie="e-label-bottom";function Mi(d,l,e,t,i,s,a){var r=hi("span",{className:ti}),n=hi("label",{className:st}),h=e.getAttribute("id")?e.getAttribute("id"):de("ej2_multiselect");e.id=h,!u(e.id)&&e.id!==""&&(n.id="label_"+e.id.replace(/ /g,"_"),W(t,{"aria-labelledby":n.id})),!u(t.placeholder)&&t.placeholder!==""&&(n.innerText=ii(t.placeholder),t.removeAttribute("placeholder")),n.innerText=ii(a),l.appendChild(r),l.appendChild(n),d.classList.add("e-float-input"),vl(i,n),s==="Always"&&(n.classList.contains(Ie)&&C([n],Ie),g([n],qe))}function vl(d,l){d&&d.length>0?(g([l],qe),C([l],Ie)):(C([l],qe),g([l],Ie))}function gl(d,l,e,t,i,s,a){var r=l.querySelector("."+st),n=l.querySelector("."+ti),h;u(r)?(h=a!==null?a:"",Vi(i,t,h)):(h=r.innerText,I(e.querySelector("."+st)),Vi(i,t,h),u(n)||I(e.querySelector("."+ti))),d.classList.remove("e-float-input")}function Vi(d,l,e){d&&d.length?l.placeholder="":l.placeholder=e}function yl(d,l){d.classList.add("e-input-focus");var e=l.querySelector("."+st);u(e)||(g([e],qe),e.classList.contains(Ie)&&C([e],Ie))}function bl(d,l,e,t,i){d.classList.remove("e-input-focus");var s=l.querySelector("."+st);e&&e.length<=0&&t==="Auto"&&!u(s)&&(s.classList.contains(qe)&&C([s],qe),g([s],Ie))}function ii(d){var l="";if(!u(d)&&d!==""){var e=document.createElement("span");e.innerHTML='<input  placeholder="'+d+'"/>';var t=e.children[0];l=t.placeholder}return l}var Cl=globalThis&&globalThis.__extends||function(){var d=function(l,e){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},d(l,e)};return function(l,e){d(l,e);function t(){this.constructor=l}l.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),M=globalThis&&globalThis.__decorate||function(d,l,e,t){var i=arguments.length,s=i<3?l:t===null?t=Object.getOwnPropertyDescriptor(l,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(d,l,e,t);else for(var r=d.length-1;r>=0;r--)(a=d[r])&&(s=(i<3?a(s):i>3?a(l,e,s):a(l,e))||s);return i>3&&s&&Object.defineProperty(l,e,s),s},De="e-input-focus",Wi="e-disabled",kl="e-multiselect e-input-group e-control-wrapper",Sl="e-multi-select-wrapper",wl="e-mob-wrapper",G="e-hide-listitem",El="e-delim-view",xl="e-chips-collection",Re="e-chips",Dl="e-chipcontent",ct="e-chips-close",Ce="e-chip-selected",Al="e-searcher",Pi="e-delimiter",dt="e-zero-size",Ol="e-remain",Fi="e-chips-close e-close-hooker",Ri="e-delim-values",Tl="e-ddl e-popup e-multi-select-list-wrapper",Il="e-dropdownbase",Hi="e-rtl",jt="e-close-icon-hide",Ll="e-mob-chip",Bl="e-ddl-footer",Nl="e-ddl-header",qi="e-ddl-disable-icon",ji="e-ms-spinner-icon",Ml="e-multi-hidden",Vl="destroy",zi="e-input-group-icon e-ddl-icon",Gi="e-icon-anim",ft="e-delim-total",Wl="e-multiselect-box",Pl="e-filter-parent",Ui="e-search-custom-width",zt="e-input-filter",Gt=function(d){Cl(l,d);function l(e,t){var i=d.call(this,e,t)||this;return i.clearIconWidth=0,i.previousFilterText="",i.isValidKey=!1,i.selectAllEventData=[],i.selectAllEventEle=[],i.resetMainList=null,i.resetFilteredData=!1,i.preventSetCurrentData=!1,i.scrollFocusStatus=!1,i.keyDownStatus=!1,i.IsScrollerAtEnd=function(){return this.list&&this.list.scrollTop+this.list.clientHeight>=this.list.scrollHeight},i}return l.prototype.enableRTL=function(e){e?this.overAllWrapper.classList.add(Hi):this.overAllWrapper.classList.remove(Hi),this.popupObj&&(this.popupObj.enableRtl=e,this.popupObj.dataBind())},l.prototype.requiredModules=function(){var e=[];if(this.enableVirtualization&&e.push({args:[this],member:"VirtualScroll"}),this.mode==="CheckBox"){if(this.isGroupChecking=this.enableGroupCheckBox,this.enableGroupCheckBox){var t=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.enableSelectionOrder=!1,this.isProtectedOnChange=t}this.allowCustomValue=!1,this.hideSelectedItem=!1,this.closePopupOnSelect=!1,e.push({member:"CheckBoxSelection",args:[this]})}return e},l.prototype.updateHTMLAttribute=function(){if(Object.keys(this.htmlAttributes).length)for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];switch(i){case"class":{var s=this.htmlAttributes[""+i].replace(/\s+/g," ").trim();s!==""&&(g([this.overAllWrapper],s.split(" ")),g([this.popupWrapper],s.split(" ")));break}case"disabled":this.enable(!1);break;case"placeholder":this.placeholder||(this.inputElement.setAttribute(i,this.htmlAttributes[""+i]),this.setProperties({placeholder:this.inputElement.placeholder},!0),this.refreshPlaceHolder());break;default:{var a=["id"],r=["name","required","aria-required","form"],n=["title","role","style","class"];a.indexOf(i)>-1?this.element.setAttribute(i,this.htmlAttributes[""+i]):i.indexOf("data")===0||r.indexOf(i)>-1?this.hiddenElement.setAttribute(i,this.htmlAttributes[""+i]):n.indexOf(i)>-1?this.overAllWrapper.setAttribute(i,this.htmlAttributes[""+i]):i!=="size"&&!u(this.inputElement)&&this.inputElement.setAttribute(i,this.htmlAttributes[""+i]);break}}}},l.prototype.updateReadonly=function(e){u(this.inputElement)||(e||this.mode==="CheckBox"?this.inputElement.setAttribute("readonly","true"):this.inputElement.removeAttribute("readonly"))},l.prototype.updateClearButton=function(e){e?(this.overAllClear.parentNode?this.overAllClear.style.display="":this.componentWrapper.appendChild(this.overAllClear),this.componentWrapper.classList.remove(jt)):(this.overAllClear.style.display="none",this.componentWrapper.classList.add(jt))},l.prototype.updateCssClass=function(){if(!u(this.cssClass)&&this.cssClass!==""){var e=this.cssClass;e=this.cssClass.replace(/\s+/g," ").trim(),e!==""&&(g([this.overAllWrapper],e.split(" ")),g([this.popupWrapper],e.split(" ")))}},l.prototype.updateOldPropCssClass=function(e){!u(e)&&e!==""&&(e=e.replace(/\s+/g," ").trim(),e!==""&&(C([this.overAllWrapper],e.split(" ")),C([this.popupWrapper],e.split(" "))))},l.prototype.onPopupShown=function(e){var t=this;if(A.isDevice&&this.mode==="CheckBox"&&this.allowFiltering){var i=this;window.onpopstate=function(){i.hidePopup(),i.inputElement.focus()},history.pushState({},"")}var s={name:"FadeIn",duration:100},a={popup:this.popupObj,event:e,cancel:!1,animation:s};this.trigger("open",a,function(r){r.cancel||(t.focusAtFirstListItem(),t.popupObj&&document.body.appendChild(t.popupObj.element),t.mode==="CheckBox"&&t.enableGroupCheckBox&&!u(t.fields.groupBy)&&t.updateListItems(t.list.querySelectorAll("li.e-list-item"),t.mainList.querySelectorAll("li.e-list-item")),(t.mode==="CheckBox"||t.showDropDownIcon)&&g([t.overAllWrapper],[Gi]),t.refreshPopup(),t.renderReactTemplates(),t.popupObj&&t.popupObj.show(r.animation,t.zIndex===1e3?t.element:null),W(t.inputElement,{"aria-expanded":"true","aria-owns":t.element.id+"_popup","aria-controls":t.element.id}),t.updateAriaActiveDescendant(),t.isFirstClick&&(t.enableVirtualization&&t.mode==="CheckBox"&&t.value&&t.updateVirtualReOrderList(),t.loadTemplate()),t.mode==="CheckBox"&&t.showSelectAll&&y.add(t.popupObj.element,"click",t.clickHandler,t))})},l.prototype.updateVirtualReOrderList=function(e){var t=this.getForQuery(this.value,!0).clone();if(this.resetList(this.dataSource,this.fields,t),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+D.li),this.virtualItemCount=this.itemCount,this.mode!=="CheckBox"&&(this.totalItemCount=this.value&&this.value.length?this.totalItemCount-this.value.length:this.totalItemCount),this.list.querySelector(".e-virtual-ddl"))this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else{var i=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl",styles:this.GetVirtualTrackHeight()});this.popupWrapper.querySelector(".e-dropdownbase").appendChild(i)}this.list.querySelector(".e-virtual-ddl-content")&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues()),e&&this.loadTemplate()},l.prototype.updateListItems=function(e,t){for(var i=0;i<e.length;i++)this.findGroupStart(e[i]),this.findGroupStart(t[i]);this.deselectHeader()},l.prototype.loadTemplate=function(){if(this.refreshListItems(null),this.enableVirtualization&&this.list&&this.mode==="CheckBox"){var e=this.list.querySelectorAll(".e-reorder")[0];this.list.querySelector(".e-virtual-ddl-content")&&e&&this.list.querySelector(".e-virtual-ddl-content").removeChild(e)}this.mode==="CheckBox"&&this.removeFocus(),this.notify("reOrder",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",e:this}),this.isPreventScrollAction=!0},l.prototype.setScrollPosition=function(){if((!this.hideSelectedItem&&this.mode!=="CheckBox"||this.mode==="CheckBox"&&!this.enableSelectionOrder)&&!u(this.value)&&this.value.length>0){var e=this.allowObjectBinding?O(this.fields.value?this.fields.value:"",this.value[this.value.length-1]):this.value[this.value.length-1],t=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",e);u(t)||this.scrollBottom(t)}if(this.enableVirtualization){var i=this.list.querySelector("."+D.focus);i&&this.scrollBottom(i)}},l.prototype.focusAtFirstListItem=function(){if(this.ulElement&&this.ulElement.querySelector("li."+D.li)){var e=void 0;if(this.mode==="CheckBox"){this.removeFocus();return}else this.enableVirtualization?e=this.ulElement.querySelector("li."+D.li+":not(.e-virtual-list):not(.e-hide-listitem)"):e=this.ulElement.querySelector("li."+D.li+":not(."+G+")");e!==null&&(this.removeFocus(),this.addListFocus(e))}},l.prototype.focusAtLastListItem=function(e){var t;if(e)t=Me(e,this.liCollections,"StartsWith",this.ignoreCase);else if(this.value&&this.value.length){var i=this.allowObjectBinding?O(this.fields.value?this.fields.value:"",this.value[this.value.length-1]):this.value[this.value.length-1];Me(i,this.liCollections,"StartsWith",this.ignoreCase)}else t=null;t&&t.item!==null&&(this.addListFocus(t.item),((this.allowCustomValue||this.allowFiltering)&&this.isPopupOpen()&&this.closePopupOnSelect&&!this.enableVirtualization||this.closePopupOnSelect&&!this.enableVirtualization)&&this.scrollBottom(t.item,t.index))},l.prototype.getAriaAttributes=function(){var e={"aria-disabled":"false",role:"combobox","aria-expanded":"false"};return e},l.prototype.updateListARIA=function(){u(this.ulElement)||W(this.ulElement,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false","aria-label":"list"});var e=!!(!u(this.inputElement)&&this.inputElement.disabled);!this.isPopupOpen()&&!u(this.inputElement)&&W(this.inputElement,this.getAriaAttributes()),e&&W(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled(e?"true":"false")},l.prototype.ensureAriaDisabled=function(e){if(this.htmlAttributes&&this.htmlAttributes["aria-disabled"]){var t=this.htmlAttributes;ie(t,{"aria-disabled":e},t),this.setProperties({htmlAttributes:t},!0)}},l.prototype.removelastSelection=function(e){var t=this.chipCollectionWrapper.querySelector("span."+Ce);if(t!==null){this.removeSelectedChip(e);return}var i=this.chipCollectionWrapper.querySelectorAll("span."+Re),s=i[i.length-1].getAttribute("data-value");u(this.value)||(this.tempValues=this.allowObjectBinding?this.value.slice():this.value.slice());var a=this.allowObjectBinding?this.getDataByValue(s):this.getFormattedValue(s);this.allowCustomValue&&(s!=="false"&&a===!1||!u(a)&&a.toString()==="NaN")&&(a=s),this.removeValue(a,e),this.removeChipSelection(),this.updateDelimeter(this.delimiterChar,e),this.makeTextBoxEmpty(),this.mainList&&this.listData&&this.refreshSelection(),this.checkPlaceholderSize()},l.prototype.onActionFailure=function(e){d.prototype.onActionFailure.call(this,e),this.renderPopup(),this.onPopupShown()},l.prototype.targetElement=function(){return this.targetInputElement=this.inputElement,this.mode==="CheckBox"&&this.allowFiltering&&this.notify("targetElement",{module:"CheckBoxSelection",enable:this.mode==="CheckBox"}),this.targetInputElement.value},l.prototype.getForQuery=function(e,t){var i,s=u(this.fields.value)?this.fields.text:this.fields.value;if(this.enableVirtualization)if(t){for(var a=0;a<e.length;a++){var r=this.allowObjectBinding?O(this.fields.value?this.fields.value:"",e[a]):e[a];a===0?i=new K(s,"equal",r):i=i.or(s,"equal",r)}return new J().where(i)}else{for(var a=0;a<e.length;a++){var r=this.allowObjectBinding?O(this.fields.value?this.fields.value:"",e[a]):e[a];a===0?i=new K(s,"notequal",r):i=i.and(s,"notequal",r)}return new J().where(i)}else for(var a=0;a<e.length;a++)a===0?i=new K(s,"equal",e[a]):i=i.or(s,"equal",e[a]);return this.dataSource instanceof j&&this.dataSource.adaptor instanceof Vs?new J().where(i):this.getQuery(this.query).clone().where(i)},l.prototype.onActionComplete=function(e,t,i,s){this.dataSource instanceof j&&!u(i)&&!this.virtualGroupDataSource&&(this.totalItemCount=i.count),d.prototype.onActionComplete.call(this,e,t,i),this.skeletonCount=this.totalItemCount!=0&&this.totalItemCount<this.itemCount*2?0:this.skeletonCount,this.updateSelectElementData(this.allowFiltering);var a=this;if(!u(this.value)&&!this.allowCustomValue&&!this.enableVirtualization)for(var r=0;r<this.value.length;r++){var n=this.allowObjectBinding?O(this.fields.value?this.fields.value:"",a.value[r]):a.value[r],h=this.findListElement(this.allowFiltering&&!u(this.mainList)?this.mainList:e,"li","data-value",n);!h&&!(this.dataSource instanceof j)&&(this.value.splice(r,1),r-=1)}var p=[];if(u(this.value)||(p=this.presentItemValue(this.ulElement)),p.length>0&&this.dataSource instanceof j&&!u(this.value)&&this.listData!=null?this.addNonPresentItems(p,this.ulElement,this.listData):this.updateActionList(e,t,i),this.dataSource instanceof j&&this.allowCustomValue&&!this.isCustomRendered&&this.inputElement.value&&this.inputElement.value!==""){var o=new J;o=this.allowFiltering?o.where(this.fields.text,"startswith",this.inputElement.value,this.ignoreCase,this.ignoreAccent):o,this.checkForCustomValue(o,this.fields),this.isCustomRendered=!0}this.dataSource instanceof j&&this.mode==="CheckBox"&&this.allowFiltering&&this.removeFocus()},l.prototype.updateActionList=function(e,t,i,s){this.mode==="CheckBox"&&this.showSelectAll&&this.notify("selectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox"}),!this.mainList&&!this.mainData?(this.mainList=e.cloneNode?e.cloneNode(!0):e,this.mainData=t,this.mainListCollection=this.liCollections):(u(this.mainData)||this.mainData.length===0)&&(this.mainData=t),!((this.remoteCustomValue||t.length<=0)&&this.allowCustomValue&&this.inputFocus&&this.allowFiltering&&this.inputElement.value&&this.inputElement.value!==""&&(this.checkForCustomValue(this.tempQuery,this.fields),this.isCustomRendered))&&(this.value&&this.value.length&&(this.mode!=="CheckBox"&&!u(this.inputElement)&&this.inputElement.value.trim()!==""||this.mode==="CheckBox"||(this.keyCode===8||this.keyCode===46)&&this.allowFiltering&&this.allowCustomValue&&this.dataSource instanceof j&&this.inputElement.value==="")&&this.refreshSelection(),this.updateListARIA(),this.unwireListEvents(),this.wireListEvents(),u(this.setInitialValue)||this.setInitialValue(),u(this.selectAllAction)||this.selectAllAction(),this.setDynValue&&(!u(this.text)&&(u(this.value)||this.value.length===0)&&this.initialTextUpdate(),this.initialValueUpdate(),this.initialUpdate(),this.refreshPlaceHolder(),this.mode!=="CheckBox"&&this.changeOnBlur&&this.updateValueState(null,this.value,null)),this.renderPopup(),this.beforePopupOpen&&(this.beforePopupOpen=!1,this.onPopupShown(i)))},l.prototype.refreshSelection=function(){var e,t,i=this.hideSelectedItem?G:D.selected;if(!u(this.value)){for(var s=0;!u(this.value[s]);s++)if(e=this.allowObjectBinding?O(this.fields.value?this.fields.value:"",this.value[s]):this.value[s],t=this.findListElement(this.list,"li","data-value",e),t){if(g([t],i),this.hideSelectedItem&&t.previousSibling&&t.previousElementSibling.classList.contains(D.group)&&(!t.nextElementSibling||t.nextElementSibling.classList.contains(D.group))&&g([t.previousElementSibling],i),this.hideSelectedItem&&this.fields.groupBy&&!t.previousElementSibling.classList.contains(G)&&this.hideGroupItem(e),this.hideSelectedItem&&t.classList.contains(D.focus)){C([t],D.focus);var a=t.parentElement.querySelectorAll("."+D.li+":not(."+G+")");a.length>0?(g([a[0]],D.focus),this.updateAriaActiveDescendant()):this.list&&this.list.querySelectorAll("."+D.li).length>0||(this.l10nUpdate(),g([this.list],D.noData))}if(t.setAttribute("aria-selected","true"),this.mode==="CheckBox"&&t.classList.contains("e-active")){var r=t.getElementsByClassName("e-check").length;if(r===0){var n={module:"CheckBoxSelection",enable:this.mode==="CheckBox",li:t,e:null};this.notify("updatelist",n)}}}}this.checkSelectAll(),this.checkMaxSelection()},l.prototype.hideGroupItem=function(e){var t,i,s=this.hideSelectedItem?G:D.selected;i=t=this.findListElement(this.ulElement,"li","data-value",e);var a=0,r=0,n=!0,h=!0;do t&&t.previousElementSibling&&!t.previousElementSibling.classList.contains(G)&&t.previousElementSibling.classList.contains(D.li)&&(n=!1),!n||!t||t.previousElementSibling&&t.previousElementSibling.classList.contains(D.group)?a=10:t=t.previousElementSibling,i&&i.nextElementSibling&&!i.nextElementSibling.classList.contains(G)&&i.nextElementSibling.classList.contains(D.li)&&(h=!1),!h||!i||i.nextElementSibling&&i.nextElementSibling.classList.contains(D.group)?r=10:i=i.nextElementSibling;while(a<10||r<10);n&&h&&!t.previousElementSibling.classList.contains(G)?g([t.previousElementSibling],s):n&&h&&t.previousElementSibling.classList.contains(G)&&C([t.previousElementSibling],s)},l.prototype.getValidLi=function(){var e=this.ulElement.querySelector("li."+D.li+":not(."+G+")");return u(e)?this.liCollections[0]:e},l.prototype.checkSelectAll=function(){var e=this.list.querySelectorAll("li.e-list-group-item.e-active").length,t=this.list.querySelectorAll("li.e-list-item"),i=this.enableVirtualization?this.list.querySelectorAll("li."+D.li+":not(.e-virtual-list)").length:this.list.querySelectorAll("li."+D.li).length,s=this.list.querySelectorAll("li."+D.selected).length;if(this.enableGroupCheckBox&&!u(this.fields.groupBy)&&(s=s-e),!this.enableVirtualization&&(i===s||s===this.maximumSelectionLength)&&this.mode==="CheckBox"&&this.showSelectAll||this.enableVirtualization&&this.mode==="CheckBox"&&this.showSelectAll&&this.virtualSelectAll&&this.value&&this.value.length===this.totalItemCount?this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",value:"check"}):i!==s&&this.mode==="CheckBox"&&this.showSelectAll&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",value:"uncheck"}),this.enableGroupCheckBox&&this.fields.groupBy&&!this.enableSelectionOrder){for(var a=0;a<t.length;a++)this.findGroupStart(t[a]);this.deselectHeader()}},l.prototype.openClick=function(e){!this.openOnClick&&this.mode!=="CheckBox"&&!this.isPopupOpen()?this.targetElement()!==""?this.showPopup():this.hidePopup(e):!this.openOnClick&&this.mode==="CheckBox"&&!this.isPopupOpen()&&this.showPopup()},l.prototype.keyUp=function(e){if(this.mode==="CheckBox"&&!this.openOnClick){var t=String.fromCharCode(e.keyCode),i=t.match(/\w/);u(i)||(this.isValidKey=!0)}if(this.isValidKey=this.isPopupOpen()&&e.keyCode===8||this.isValidKey,this.isValidKey=e.ctrlKey&&e.keyCode===86?!1:this.isValidKey,this.isValidKey&&this.inputElement)switch(this.isValidKey=!1,this.expandTextbox(),this.showOverAllClear(),e.keyCode){default:this.search(e)}},l.prototype.filter=function(e,t,i){this.isFiltered=!0,this.remoteFilterAction=!0,this.dataUpdater(e,t,i)},l.prototype.getQuery=function(e){var t=e?e.clone():this.query?this.query.clone():new J;if(this.isFiltered)return t;if(this.filterAction){if(this.targetElement()!==null&&!this.enableVirtualization||this.enableVirtualization&&this.targetElement()!==null&&this.targetElement().trim()!==""){var i=this.typeOfData(this.dataSource).typeof;if(!(this.dataSource instanceof j)&&i==="string"||i==="number")t.where("",this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent);else{var s=this.fields;t.where(u(s.text)?"":s.text,this.filterType,this.targetElement(),this.ignoreCase,this.ignoreAccent)}}return this.enableVirtualization&&this.viewPortInfo.endIndex!=0&&!this.virtualSelectAll?this.virtualFilterQuery(t):t}else return this.enableVirtualization&&this.viewPortInfo.endIndex!=0&&!this.virtualSelectAll&&(!(this.dataSource instanceof j)||this.dataSource instanceof j&&this.virtualGroupDataSource)?this.virtualFilterQuery(t):e||(this.query?this.query:new J)},l.prototype.virtualFilterQuery=function(e){for(var t=this.getTakeValue(),i=!0,s=!0,a=!0,r=0;r<e.queries.length;r++)this.getModuleName()==="multiselect"&&(e.queries[r].e&&e.queries[r].e.condition=="or"||e.queries[r].e&&e.queries[r].e.operator=="equal")&&(i=!1),e.queries[r].fn==="onSkip"&&(s=!1),e.queries[r].fn==="onTake"&&(a=!1);return(this.allowFiltering&&s||!i||!this.allowFiltering&&s)&&(i?e.skip(this.virtualItemStartIndex):e.skip(this.viewPortInfo.startIndex)),a&&(this.isIncrementalRequest?e.take(this.incrementalEndIndex):e.take(t)),e.requiresCount(),e},l.prototype.getTakeValue=function(){return this.allowFiltering&&A.isDevice?Math.round(window.outerHeight/this.listItemHeight):this.itemCount},l.prototype.dataUpdater=function(e,t,i){this.isDataFetched=!1;var s=this.list.classList.contains(D.noData);if(this.targetElement().trim()===""){var a=this.enableVirtualization?this.list.cloneNode(!0):this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;if(this.backCommand){if(this.remoteCustomValue=!1,this.allowCustomValue&&a.querySelectorAll("li").length==0&&this.mainData.length>0&&(this.mainData=[]),this.enableVirtualization&&(this.totalItemCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.resetList(e,i,t),this.mode!=="CheckBox"&&(this.totalItemCount=this.value&&this.value.length?this.totalItemCount-this.value.length:this.totalItemCount),this.UpdateSkeleton(),(s||this.allowCustomValue)&&!this.list.classList.contains(D.noData)&&(this.list.querySelector(".e-virtual-ddl-content")||this.list.appendChild(this.createElement("div",{className:"e-virtual-ddl-content",styles:this.getTransformValues()})).appendChild(this.list.querySelector(".e-list-parent")),!this.list.querySelector(".e-virtual-ddl")))){var r=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl",styles:this.GetVirtualTrackHeight()});document.getElementsByClassName("e-popup")[0].querySelector(".e-dropdownbase").appendChild(r)}this.onActionComplete(a,this.mainData),this.value&&this.value.length&&this.refreshSelection(),this.keyCode!==8&&this.focusAtFirstListItem(),this.notify("reOrder",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",e:this})}}else{if(this.enableVirtualization&&this.allowFiltering&&(this.isPreventScrollAction=!0,this.list.scrollTop=0,this.previousStartIndex=0,this.virtualListInfo=null),this.resetList(e,i,t),this.enableVirtualization&&(s||this.allowCustomValue)&&!this.list.classList.contains(D.noData)&&(this.list.querySelector(".e-virtual-ddl-content")||this.list.appendChild(this.createElement("div",{className:"e-virtual-ddl-content",styles:this.getTransformValues()})).appendChild(this.list.querySelector(".e-list-parent")),this.mode!=="CheckBox"&&(this.totalItemCount=this.value&&this.value.length?this.totalItemCount-this.value.length:this.totalItemCount),!this.list.querySelector(".e-virtual-ddl"))){var r=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl",styles:this.GetVirtualTrackHeight()});document.getElementsByClassName("e-popup")[0].querySelector(".e-dropdownbase").appendChild(r)}this.allowCustomValue&&(e instanceof j?(this.remoteCustomValue=!0,this.tempQuery=t):this.checkForCustomValue(t,i))}this.enableVirtualization&&this.allowFiltering&&this.getFilteringSkeletonCount(),this.refreshPopup(),this.mode==="CheckBox"&&this.removeFocus()},l.prototype.checkForCustomValue=function(e,t){var i=!this.getValueByText(this.inputElement.value,this.ignoreCase),s=t||this.fields;if(this.allowCustomValue&&i){var a=this.inputElement.value,r=!u(this.mainData)&&this.mainData.length>0?this.mainData[0]:this.mainData;if(r&&typeof r!="string"&&typeof r!="number"&&typeof r!="boolean"){var n={};Q(s.text,a,n),typeof O(this.fields.value?this.fields.value:"value",r)=="number"?Q(s.value,Math.random(),n):Q(s.value,a,n);var h={};if(this.allowObjectBinding){var p=this.listData&&this.listData.length>0?Object.keys(this.listData[0]):this.firstItem?Object.keys(this.firstItem):Object.keys(n);p.forEach(function(v){h[v]=v===t.value||v===t.text?O(t.value,n):null})}if(n=this.allowObjectBinding?h:n,this.enableVirtualization){this.virtualCustomData=n;var o=this.virtualGroupDataSource?JSON.parse(JSON.stringify(this.virtualGroupDataSource)):JSON.parse(JSON.stringify(this.dataSource));this.virtualCustomSelectData&&this.virtualCustomSelectData.length>0&&o.concat(this.virtualCustomSelectData),o.splice(0,0,n),this.isCustomDataUpdated=!0,this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.itemCount,this.resetList(o,s,e),this.isCustomDataUpdated=!1}else{var o=JSON.parse(JSON.stringify(this.listData));o.splice(0,0,n),this.resetList(o,s,e)}}else if(this.listData){var o=JSON.parse(JSON.stringify(this.listData));o.splice(0,0,this.inputElement.value),o[0]=typeof r=="number"&&!isNaN(parseFloat(o[0]))?parseFloat(o[0]):o[0],o[0]=typeof r=="boolean"?o[0]==="true"?!0:o[0]==="false"?!1:o[0]:o[0],this.resetList(o,s)}}else if(this.listData&&this.mainData&&!i&&this.allowCustomValue){if(this.allowFiltering&&this.isRemoteSelection&&this.remoteCustomValue)this.isRemoteSelection=!1,this.resetList(this.listData,s,e);else if(!this.allowFiltering&&this.list){var f=this.list.querySelectorAll("li."+D.li+":not(.e-hide-listitem)"),c=Me(this.targetElement(),f,"StartsWith",this.ignoreCase);c&&c.item!==null&&this.addListFocus(c.item)}}this.value&&this.value.length&&this.refreshSelection()},l.prototype.getNgDirective=function(){return"EJS-MULTISELECT"},l.prototype.wrapperClick=function(e){if(this.setDynValue=!1,this.keyboardEvent=null,this.isKeyBoardAction=!1,!!this.enabled){if(e.target===this.overAllClear){e.preventDefault();return}if(this.inputFocus||this.inputElement.focus(),!this.readonly){if(e.target&&e.target.classList.toString().indexOf(ct)!==-1){this.isPopupOpen()&&this.refreshPopup();return}!this.isPopupOpen()&&(this.openOnClick||this.showDropDownIcon&&e.target&&e.target.className===zi)?this.showPopup(e):(this.hidePopup(e),this.mode==="CheckBox"&&(this.showOverAllClear(),this.inputFocus=!0,this.overAllWrapper.classList.contains(De)||this.overAllWrapper.classList.add(De)))}this.targetElement()&&this.targetElement()!==""||e.preventDefault()}},l.prototype.enable=function(e){e?(this.overAllWrapper.classList.remove(Wi),this.inputElement.removeAttribute("disabled"),W(this.inputElement,{"aria-disabled":"false"}),this.ensureAriaDisabled("false")):(this.overAllWrapper.classList.add(Wi),this.inputElement.setAttribute("disabled","true"),W(this.inputElement,{"aria-disabled":"true"}),this.ensureAriaDisabled("true")),this.enabled!==e&&(this.enabled=e),this.hidePopup()},l.prototype.onBlurHandler=function(e,t){var i;if(u(e)||(i=e.relatedTarget),this.popupObj&&document.body.contains(this.popupObj.element)&&this.popupObj.element.contains(i)){this.mode!=="CheckBox"?this.inputElement.focus():this.floatLabelType==="Auto"&&(this.overAllWrapper.classList.contains("e-outline")||this.overAllWrapper.classList.contains("e-filled"))&&g([this.overAllWrapper],"e-valid-input");return}if(this.floatLabelType==="Auto"&&this.overAllWrapper.classList.contains("e-outline")&&this.mode==="CheckBox"&&(u(this.value)||this.value.length===0)&&C([this.overAllWrapper],"e-valid-input"),this.mode==="CheckBox"&&A.isIE&&!u(e)&&!t){this.inputFocus=!1,this.overAllWrapper.classList.remove(De);return}if(this.scrollFocusStatus){u(e)||e.preventDefault(),this.inputElement.focus(),this.scrollFocusStatus=!1;return}if(this.inputFocus=!1,this.overAllWrapper.classList.remove(De),this.addTagOnBlur){var s=this.getValueByText(this.inputElement.value,this.ignoreCase,this.ignoreAccent),a=this.findListElement(this.list,"li","data-value",s),r=this.hideSelectedItem?G:D.selected,n=!!(a&&!a.classList.contains(r));n&&(this.updateListSelection(a,e),this.mode==="Delimiter"&&this.updateDelimeter(this.delimiterChar))}this.updateDataList(),this.resetMainList&&(this.mainList=this.resetMainList,this.resetMainList=null),this.refreshListItems(null),this.mode!=="Box"&&this.mode!=="CheckBox"&&this.updateDelimView(),this.changeOnBlur&&(this.updateValueState(e,this.value,this.tempValues),this.dispatchEvent(this.hiddenElement,"change")),this.overAllClear.style.display="none",this.isPopupOpen()&&this.hidePopup(e),this.makeTextBoxEmpty(),this.trigger("blur"),this.focused=!0,A.isDevice&&this.mode!=="Delimiter"&&this.mode!=="CheckBox"&&this.removeChipFocus(),this.removeChipSelection(),this.refreshInputHight(),bl(this.overAllWrapper,this.componentWrapper,this.value,this.floatLabelType,this.placeholder),this.refreshPlaceHolder(),(this.allowFiltering||this.enableSelectionOrder===!0&&this.mode==="CheckBox")&&!u(this.mainList)&&(this.ulElement=this.mainList),this.checkPlaceholderSize(),V.createSpanElement(this.overAllWrapper,this.createElement),this.calculateWidth(),!u(this.overAllWrapper)&&!u(this.overAllWrapper.getElementsByClassName("e-ddl-icon")[0]&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0]&&this.floatLabelType!=="Never")&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon")},l.prototype.calculateWidth=function(){var e;if(this.overAllWrapper){if(!this.showDropDownIcon||this.overAllWrapper.querySelector(".e-label-top"))e=this.overAllWrapper.clientWidth-2*parseInt(getComputedStyle(this.inputElement).paddingRight);else{var t=this.dropIcon.offsetWidth+parseInt(getComputedStyle(this.dropIcon).marginRight);e=this.overAllWrapper.clientWidth-(t+2*parseInt(getComputedStyle(this.inputElement).paddingRight))}this.floatLabelType==="Auto"&&V.calculateWidth(e,this.overAllWrapper,this.getModuleName())}},l.prototype.checkPlaceholderSize=function(){if(this.showDropDownIcon){var e=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10);this.setPlaceholderSize(e)}else u(this.dropIcon)||this.setPlaceholderSize(this.showDropDownIcon?this.dropIcon.offsetWidth:0)},l.prototype.setPlaceholderSize=function(e){u(this.value)||this.value.length===0?this.dropIcon.offsetWidth!==0?this.searchWrapper.style.width="calc(100% - "+(e+10)+"px":g([this.searchWrapper],Ui):u(this.value)||(this.searchWrapper.removeAttribute("style"),C([this.searchWrapper],Ui))},l.prototype.refreshInputHight=function(){u(this.searchWrapper)||((!this.value||!this.value.length)&&(u(this.text)||this.text==="")?this.searchWrapper.classList.remove(dt):this.searchWrapper.classList.add(dt))},l.prototype.validateValues=function(e,t){return JSON.stringify(e.slice().sort())!==JSON.stringify(t.slice().sort())},l.prototype.updateValueState=function(e,t,i){var s=t||[],a=i||[];if(this.initStatus&&this.validateValues(s,a)){var r={e,oldValue:(this.allowObjectBinding,i),value:(this.allowObjectBinding,t),isInteracted:!!e,element:this.element,event:e};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",r),this.updateTempValue(),this.changeOnBlur||this.dispatchEvent(this.hiddenElement,"change")}this.selectedValueInfo=this.viewPortInfo},l.prototype.updateTempValue=function(){this.value?this.tempValues=this.allowObjectBinding?this.value.slice():this.value.slice():this.tempValues=this.value},l.prototype.updateAriaActiveDescendant=function(){!u(this.ulElement)&&!u(this.ulElement.getElementsByClassName("e-item-focus")[0])&&W(this.inputElement,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id})},l.prototype.pageUpSelection=function(e,t){var i=this.list.querySelectorAll("li."+D.li+":not(."+G+"):not(.e-reorder-hide)"),s=e>=0?i[e+1]:i[0];this.enableVirtualization&&t&&(s=e>=0&&this.viewPortInfo.startIndex!=0?this.liCollections[e+this.skeletonCount+1]:this.liCollections[this.skeletonCount]),!u(s)&&s.classList.contains("e-virtual-list")&&(s=this.liCollections[this.skeletonCount]),this.enableVirtualization?!u(s)&&!s.classList.contains("e-item-focus")?(this.addListFocus(s),this.scrollTop(s,this.getIndexByValue(s.getAttribute("data-value")),this.keyboardEvent.keyCode)):this.viewPortInfo.startIndex==0&&this.scrollTop(s,this.getIndexByValue(s.getAttribute("data-value")),this.keyboardEvent.keyCode):(this.addListFocus(s),this.scrollTop(s,this.getIndexByValue(s.getAttribute("data-value")),this.keyboardEvent.keyCode))},l.prototype.pageDownSelection=function(e,t){var i=this.getItems(),s=this.list.querySelectorAll("li."+D.li+":not(."+G+"):not(.e-reorder-hide)"),a=e<=s.length?s[e-1]:s[s.length-1];this.enableVirtualization&&this.skeletonCount>0&&(a=e<i.length?this.liCollections[e]:this.liCollections[i.length-1]),this.enableVirtualization&&t&&(a=e<=i.length?this.liCollections[e]:this.liCollections[i.length-1]),this.addListFocus(a),this.scrollBottom(a,this.getIndexByValue(a.getAttribute("data-value")),!1,this.keyboardEvent.keyCode)},l.prototype.getItems=function(){return this.list||d.prototype.render.call(this),this.ulElement&&this.ulElement.querySelectorAll("."+D.li).length>0?this.ulElement.querySelectorAll("."+D.li+":not(."+G+")"):[]},l.prototype.focusInHandler=function(e){var t=this;if(this.enabled){if(this.showOverAllClear(),this.inputFocus=!0,this.value&&this.value.length&&(this.mode!=="Delimiter"&&this.mode!=="CheckBox"?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),this.mode!=="CheckBox"&&(this.viewWrapper.style.display="none")),this.mode!=="CheckBox"&&this.searchWrapper.classList.remove(dt),this.checkPlaceholderSize(),this.focused){var i={isInteracted:!!e,event:e};this.trigger("focus",i),this.focused=!1}return this.overAllWrapper.classList.contains(De)||this.overAllWrapper.classList.add(De),yl(this.overAllWrapper,this.componentWrapper),this.isPopupOpen()&&this.refreshPopup(),setTimeout(function(){t.calculateWidth()},150),!0}else return!1},l.prototype.showDelimWrapper=function(){this.mode==="CheckBox"?this.viewWrapper.style.display="":this.delimiterWrapper.style.display="",this.componentWrapper.classList.add(Pi)},l.prototype.hideDelimWrapper=function(){this.delimiterWrapper.style.display="none",this.componentWrapper.classList.remove(Pi)},l.prototype.expandTextbox=function(){var e=5;this.placeholder&&(e=e>this.inputElement.placeholder.length?e:this.inputElement.placeholder.length),this.inputElement.value.length>e?this.inputElement.size=this.inputElement.value.length:this.inputElement.size=e},l.prototype.isPopupOpen=function(){return this.popupWrapper!==null&&this.popupWrapper.parentElement!==null},l.prototype.refreshPopup=function(){this.popupObj&&this.mobFilter&&(this.popupObj.setProperties({width:this.calcPopupWidth()}),this.popupObj.refreshPosition(this.overAllWrapper),this.popupObj.resolveCollision())},l.prototype.checkTextLength=function(){return this.targetElement().length<1},l.prototype.popupKeyActions=function(e){switch(e.keyCode){case 38:this.hidePopup(e),this.mode==="CheckBox"&&this.inputElement.focus(),e.preventDefault();break;case 40:this.isPopupOpen()||(this.showPopup(e),e.preventDefault());break}},l.prototype.updateAriaAttribute=function(){var e=this.list.querySelector("."+D.focus);if(!u(e))if(this.inputElement.setAttribute("aria-activedescendant",e.id),this.allowFiltering){var t=this.popupWrapper.querySelector("."+zt);t&&t.setAttribute("aria-activedescendant",e.id)}else this.mode=="CheckBox"&&this.overAllWrapper.setAttribute("aria-activedescendant",e.id)},l.prototype.homeNavigation=function(e,t){if(this.removeFocus(),this.enableVirtualization){if(e)this.enableVirtualization&&this.viewPortInfo.startIndex!==0&&(this.viewPortInfo.startIndex=0,this.viewPortInfo.endIndex=this.itemCount,this.updateVirtualItemIndex(),this.resetList(this.dataSource,this.fields,this.query));else if(this.enableVirtualization&&(!this.value&&this.viewPortInfo.endIndex!==this.totalItemCount||this.value&&this.value.length>0&&this.viewPortInfo.endIndex!==this.totalItemCount+this.value.length)){this.viewPortInfo.startIndex=this.totalItemCount-this.itemCount,this.viewPortInfo.endIndex=this.totalItemCount,this.updateVirtualItemIndex();var i=new J().clone();this.value&&this.value.length>0&&(i=this.getForQuery(this.value).clone(),i=i.skip(this.totalItemCount-this.itemCount)),this.resetList(this.dataSource,this.fields,i)}}this.UpdateSkeleton();var s=this.ulElement.querySelectorAll("li."+D.li+":not(."+G+"):not(.e-reorder-hide)");if(s.length>0){var a=s[e?0:s.length-1];this.enableVirtualization&&e&&(a=s[this.skeletonCount]),this.removeFocus(),a.classList.add(D.focus),this.enableVirtualization&&e?this.scrollTop(a,void 0,this.keyboardEvent.keyCode):t||this.scrollBottom(a,void 0,!1,this.keyboardEvent.keyCode),this.updateAriaActiveDescendant()}},l.prototype.updateSelectionList=function(){if(!u(this.value)&&this.value.length)for(var e=0;e<this.value.length;e++){var t=this.allowObjectBinding?O(this.fields.value?this.fields.value:"",this.value[e]):this.value[e],i=this.getElementByValue(t);i&&!i.classList.contains(D.selected)&&i.classList.add("e-active")}},l.prototype.handleVirtualKeyboardActions=function(e,t){var i=this.list.querySelector("."+D.focus),s;switch(this.isKeyBoardAction=!0,e.keyCode){case 40:this.arrowDown(e,!0);break;case 38:this.arrowUp(e,!0);break;case 33:if(e.preventDefault(),i){var a=this.getPageCount()*2-4;s=Math.round(a),s=this.getIndexByValue(i.getAttribute("data-value")),this.pageUpSelection(s-this.getPageCount(),!0),this.updateAriaAttribute()}break;case 34:e.preventDefault(),i&&(s=this.getIndexByValue(i.getAttribute("data-value")),this.pageDownSelection(s+this.getPageCount()+1,!0),this.updateAriaAttribute());break;case 35:case 36:this.isMouseScrollAction=!0,this.homeNavigation(e.keyCode===36,!0),this.isPreventScrollAction=!0;break}this.keyboardEvent=null,this.isScrollChanged=!0,this.isKeyBoardAction=!1},l.prototype.onKeyDown=function(e){if(!(this.readonly||!this.enabled&&this.mode!=="CheckBox")&&(this.preventSetCurrentData=!1,this.keyboardEvent=e,this.isPreventKeyAction&&this.enableVirtualization&&e.preventDefault(),this.keyCode=e.keyCode,this.keyDownStatus=!0,!(e.keyCode>111&&e.keyCode<124))){if(e.altKey){this.popupKeyActions(e);return}else if(this.isPopupOpen()){var t=this.list.querySelector("."+D.focus),i=void 0;switch(this.isKeyBoardAction=!0,e.keyCode){case 36:case 35:this.isMouseScrollAction=!0,this.homeNavigation(e.keyCode===36);break;case 33:e.preventDefault(),t&&(i=this.getIndexByValue(t.getAttribute("data-value")),this.pageUpSelection(i-this.getPageCount()-1),this.updateAriaAttribute());return;case 34:e.preventDefault(),t&&(this.getIndexByValue(t.getAttribute("data-value")),this.pageDownSelection(i+this.getPageCount()),this.updateAriaAttribute());return;case 38:this.arrowUp(e);break;case 40:this.arrowDown(e);break;case 27:e.preventDefault(),this.hidePopup(e),this.mode==="CheckBox"&&this.inputElement.focus();return;case 13:e.preventDefault(),this.mode!=="CheckBox"&&this.selectByKey(e),this.checkPlaceholderSize();return;case 32:this.spaceKeySelection(e);return;case 9:e.preventDefault(),this.hidePopup(e),this.inputElement.focus(),this.overAllWrapper.classList.add(De)}}else switch(e.keyCode){case 13:case 9:case 16:case 17:case 20:return;case 40:this.openOnClick&&this.showPopup();break;case 27:e.preventDefault(),this.escapeAction();return}this.checkTextLength()&&this.keyNavigation(e),this.mode==="CheckBox"&&this.enableSelectionOrder&&(this.allowFiltering&&(this.previousFilterText=this.targetElement()),this.checkBackCommand(e)),this.expandTextbox(),this.mode==="CheckBox"&&this.showSelectAll||this.refreshPopup(),this.isKeyBoardAction=!1}},l.prototype.arrowDown=function(e,t){e.preventDefault(),this.moveByList(1,t),this.keyAction=!0,(document.activeElement.classList.contains(zt)||this.mode==="CheckBox"&&!this.allowFiltering&&document.activeElement!==this.list)&&y.add(this.list,"keydown",this.onKeyDown,this),this.updateAriaAttribute()},l.prototype.arrowUp=function(e,t){e.preventDefault(),this.keyAction=!0;var i=this.list.querySelectorAll("li."+D.li+":not(."+G+"):not(.e-reorder-hide)");this.enableGroupCheckBox&&this.mode==="CheckBox"&&!u(this.fields.groupBy)&&(i=this.list.querySelectorAll("li."+D.li+",li."+D.group+":not(."+G+"):not(.e-reorder-hide)"));var s=this.list.querySelector("li."+D.focus);this.focusFirstListItem=u(this.liCollections[0])?!1:this.liCollections[0].classList.contains("e-item-focus");var a=Array.prototype.slice.call(i).indexOf(s);a<=0&&this.mode==="CheckBox"&&this.allowFiltering&&(this.keyAction=!1,this.notify("inputFocus",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",value:"focus"})),this.moveByList(-1,t),this.updateAriaAttribute()},l.prototype.spaceKeySelection=function(e){if(this.mode==="CheckBox"){var t=this.list.querySelector("li."+D.focus),i=document.getElementsByClassName("e-selectall-parent")[0];if((!u(t)||i&&i.classList.contains("e-item-focus"))&&(e.preventDefault(),this.keyAction=!0),this.selectByKey(e),this.keyAction){var s=this.list.querySelector("li."+D.focus);!u(s)&&i&&i.classList.contains("e-item-focus")&&s.classList.remove("e-item-focus")}}this.checkPlaceholderSize()},l.prototype.checkBackCommand=function(e){(e.keyCode===8&&this.allowFiltering?this.targetElement()!==this.previousFilterText:this.targetElement()==="")?this.backCommand=!1:this.backCommand=!0},l.prototype.keyNavigation=function(e){if(this.mode!=="Delimiter"&&this.mode!=="CheckBox"&&this.value&&this.value.length)switch(e.keyCode){case 37:e.preventDefault(),this.moveBy(-1,e);break;case 39:e.preventDefault(),this.moveBy(1,e);break;case 8:this.removelastSelection(e);break;case 46:this.removeSelectedChip(e);break}else if(e.keyCode===8&&this.mode==="Delimiter"&&this.value&&this.value.length){e.preventDefault();var t=this.allowObjectBinding?O(this.fields.value?this.fields.value:"",this.value[this.value.length-1]):this.value[this.value.length-1];this.removeValue(this.value[this.value.length-1],e),this.updateDelimeter(this.delimiterChar,e),this.focusAtLastListItem(t)}},l.prototype.selectByKey=function(e){this.removeChipSelection(),this.selectListByKey(e),this.hideSelectedItem&&this.focusAtFirstListItem()},l.prototype.escapeAction=function(){var e=this.tempValues?this.tempValues.slice():[];this.allowObjectBinding&&(e=this.tempValues?this.tempValues.slice():[]),this.value&&this.validateValues(this.value,e)&&(this.mode!=="CheckBox"&&(this.value=e,this.initialValueUpdate()),this.mode!=="Delimiter"&&this.mode!=="CheckBox"?this.chipCollectionWrapper.style.display="":this.showDelimWrapper(),this.refreshPlaceHolder(),this.value.length?this.showOverAllClear():this.hideOverAllClear()),this.makeTextBoxEmpty()},l.prototype.scrollBottom=function(e,t,i,s){i===void 0&&(i=!1),s===void 0&&(s=null),(!u(e)&&e.classList.contains("e-virtual-list")||this.enableVirtualization&&u(e))&&(e=this.liCollections[this.skeletonCount]),this.isUpwardScrolling=!1;var a=this.list.querySelectorAll(".e-virtual-list").length,r=this.list.querySelector("li:last-of-type")?this.list.querySelector("li:last-of-type").getAttribute("data-value"):null,n=this.virtualListInfo&&this.virtualListInfo.startIndex?e.offsetTop+this.virtualListInfo.startIndex*e.offsetHeight:e.offsetTop,h=this.list.offsetHeight,p=n-a*e.offsetHeight+e.offsetHeight-this.list.scrollTop,o=this.list.scrollTop+p-h,f=!1,c=n-a*e.offsetHeight+e.offsetHeight-this.list.scrollTop;if(c=this.fields.groupBy&&!u(this.fixedHeaderElement)?c-this.fixedHeaderElement.offsetHeight:c,t===0&&!this.enableVirtualization)this.list.scrollTop=0;else if(p>h||!(c>0&&this.list.offsetHeight>c)){var v=e?e.getAttribute("data-value"):null,S=s==34?this.getPageCount()-1:1;!this.enableVirtualization||this.isKeyBoardAction||i?this.isKeyBoardAction&&this.enableVirtualization&&r&&v===r&&s!=35&&!this.isVirtualScrolling?(this.isPreventKeyAction=!0,this.list.scrollTop+=e.offsetHeight*S,this.isPreventKeyAction=this.IsScrollerAtEnd()?!1:this.isPreventKeyAction,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1):this.enableVirtualization&&s==35?(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1,this.list.scrollTop=this.list.scrollHeight):(s==34&&this.enableVirtualization&&!this.isVirtualScrolling&&(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1,o=o+e.offsetHeight*S),this.list.scrollTop=o):this.list.scrollTop=this.virtualListInfo&&this.virtualListInfo.startIndex?this.virtualListInfo.startIndex*this.listItemHeight:0,f=this.isKeyBoardAction}this.isKeyBoardAction=f},l.prototype.scrollTop=function(e,t,i){i===void 0&&(i=null);var s=this.list.querySelectorAll(".e-virtual-list").length,a=this.virtualListInfo&&this.virtualListInfo.startIndex?e.offsetTop+this.virtualListInfo.startIndex*e.offsetHeight:e.offsetTop,r=a-s*e.offsetHeight-this.list.scrollTop,n=this.list.querySelector("li.e-list-item:not(.e-virtual-list)")?this.list.querySelector("li.e-list-item:not(.e-virtual-list)").getAttribute("data-value"):null;r=this.fields.groupBy&&!Es(this.fixedHeaderElement)?r-this.fixedHeaderElement.offsetHeight:r;var h=a-s*e.offsetHeight+e.offsetHeight-this.list.scrollTop,p=this.enableVirtualization&&this.getModuleName()==="autocomplete"&&r<=0;if(t===0&&!this.enableVirtualization)this.list.scrollTop=0;else if(r<0||p){var o=e?e.getAttribute("data-value"):null,f=i==33?this.getPageCount()-2:1;this.enableVirtualization&&this.isKeyBoardAction&&n&&o===n&&i!=36&&!this.isVirtualScrolling?(this.isUpwardScrolling=!0,this.isPreventKeyAction=!0,this.list.scrollTop-=e.offsetHeight*f,this.isPreventKeyAction=this.list.scrollTop!=0?this.isPreventKeyAction:!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1):this.enableVirtualization&&i==36?(this.isPreventScrollAction=!1,this.isPreventKeyAction=!0,this.isKeyBoardAction=!1,this.list.scrollTo(0,0)):(i==33&&this.enableVirtualization&&!this.isVirtualScrolling&&(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1,r=r-e.offsetHeight*f),this.list.scrollTop=this.list.scrollTop+r)}else h>0&&this.list.offsetHeight>h||(this.list.scrollTop=e.offsetTop-(this.fields.groupBy&&!u(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))},l.prototype.selectListByKey=function(e){var t=this.list.querySelector("li."+D.focus),i=this.value&&this.value.length?this.value.length:0,s;t!==null&&(e.preventDefault(),t.classList.contains("e-active")&&(i=i-1),this.isValidLI(t)&&i<this.maximumSelectionLength?(this.updateListSelection(t,e),this.addListFocus(t),this.mode==="CheckBox"?(this.updateDelimView(),this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight(),this.checkPlaceholderSize(),this.enableGroupCheckBox&&!u(this.fields.groupBy)&&(s=t.firstElementChild.lastElementChild,this.findGroupStart(s),this.deselectHeader())):this.updateDelimeter(this.delimiterChar,e),this.makeTextBoxEmpty(),this.mode!=="CheckBox"&&this.refreshListItems(t.textContent),this.changeOnBlur||this.updateValueState(e,this.value,this.tempValues),this.refreshPopup()):!this.isValidLI(t)&&i<this.maximumSelectionLength&&(s=t.firstElementChild.lastElementChild,s.classList.contains("e-check")?this.selectAllItem(!1,e,t):this.selectAllItem(!0,e,t)),this.refreshSelection(),this.closePopupOnSelect&&this.hidePopup(e));var a=document.getElementsByClassName("e-selectall-parent")[0];if(a&&a.classList.contains("e-item-focus")){var r=a.childNodes[0];if(r.classList.contains("e-check")){r.classList.remove("e-check");var n={module:"CheckBoxSelection",enable:this.mode==="CheckBox",value:"check",name:"checkSelectAll"};this.notify("checkSelectAll",n),this.selectAllItem(!1,e,t)}else{r.classList.add("e-check");var n={module:"CheckBoxSelection",enable:this.mode==="CheckBox",value:"check",name:"checkSelectAll"};this.notify("checkSelectAll",n),this.selectAllItem(!0,e,t)}}this.refreshPlaceHolder()},l.prototype.refreshListItems=function(e){if((this.allowFiltering||this.mode==="CheckBox"&&this.enableSelectionOrder===!0||this.allowCustomValue)&&this.mainList&&this.listData){var t=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.enableVirtualization?this.allowCustomValue&&this.virtualCustomData&&e==null&&this.virtualCustomData&&this.viewPortInfo&&this.viewPortInfo.startIndex===0&&this.viewPortInfo.endIndex===this.itemCount?(this.virtualCustomData=null,this.renderItems(this.mainData,this.fields)):this.onActionComplete(this.list,this.listData):this.onActionComplete(t,this.mainData),this.focusAtLastListItem(e),this.value&&this.value.length&&this.refreshSelection()}else!u(this.fields.groupBy)&&this.value&&this.value.length&&this.refreshSelection()},l.prototype.removeSelectedChip=function(e){var t=this.chipCollectionWrapper.querySelector("span."+Ce),i;if(t!==null){u(this.value)||(this.tempValues=this.allowObjectBinding?this.value.slice():this.value.slice()),i=t.nextElementSibling,i!==null&&(this.removeChipSelection(),this.addChipSelection(i,e));var s=this.allowObjectBinding?this.getDataByValue(t.getAttribute("data-value")):t.getAttribute("data-value");this.removeValue(s,e),this.makeTextBoxEmpty()}this.closePopupOnSelect&&this.hidePopup(e),this.checkPlaceholderSize()},l.prototype.moveByTop=function(e){var t=this.list.querySelectorAll("li."+D.li),i;t.length>1&&(this.removeFocus(),i=e?0:t.length-1,this.addListFocus(t[i]),this.scrollBottom(t[i],i)),this.updateAriaAttribute()},l.prototype.clickHandler=function(e){var t=e.target,i=t.className,s=document.getElementsByClassName("e-selectall-parent")[0];(i==="e-input-filter e-input"||i==="e-input-group e-control-wrapper e-input-focus")&&s.classList.contains("e-item-focus")&&s.classList.remove("e-item-focus")},l.prototype.moveByList=function(e,t){if(this.list){var i=this.list.querySelectorAll("li."+D.li+":not(."+G+"):not(.e-reorder-hide)");this.mode==="CheckBox"&&this.enableGroupCheckBox&&!u(this.fields.groupBy)&&(i=this.list.querySelectorAll("li."+D.li+",li."+D.group+":not(."+G+"):not(.e-reorder-hide)"));var s=this.list.querySelector("li."+D.focus);this.enableVirtualization&&t&&!u(this.currentFocuedListElement)&&(s=this.getElementByValue(this.getFormattedValue(this.currentFocuedListElement.getAttribute("data-value"))));var a=-1,r=document.getElementsByClassName("e-selectall-parent")[0];if(this.mode==="CheckBox"&&this.showSelectAll&&e==1&&!u(r)&&!r.classList.contains("e-item-focus")&&this.list.getElementsByClassName("e-item-focus").length==0&&this.liCollections.length>1)!this.focusFirstListItem&&r.classList.contains("e-item-focus")?r.classList.remove("e-item-focus"):r.classList.contains("e-item-focus")||r.classList.add("e-item-focus");else if(i.length){this.mode==="CheckBox"&&this.showSelectAll&&!u(r&&e==-1)&&(!this.focusFirstListItem&&r.classList.contains("e-item-focus")?r.classList.remove("e-item-focus"):this.focusFirstListItem&&!r.classList.contains("e-item-focus")&&r.classList.add("e-item-focus"));for(var n=0;n<i.length;n++)if(i[n]===s){a=n;break}if(e>0)a<i.length-1&&(this.removeFocus(),this.enableVirtualization&&t?this.addListFocus(i[a]):this.addListFocus(i[++a]),a>-1&&(this.updateCheck(i[a]),this.scrollBottom(i[a],a),this.currentFocuedListElement=i[a]));else if(a>0)if(this.enableVirtualization){var h=i[a-1].classList.contains("e-virtual-list"),p=t?a:a-1;(t||!h)&&this.removeFocus(),(t||!h)&&(this.addListFocus(i[p]),this.updateCheck(i[p]),this.scrollTop(i[p],a),this.currentFocuedListElement=i[p])}else this.removeFocus(),this.addListFocus(i[--a]),this.updateCheck(i[a]),this.scrollTop(i[a],a)}}},l.prototype.getElementByValue=function(e){for(var t,i=this.getItems(),s=0,a=i;s<a.length;s++){var r=a[s];if(this.getFormattedValue(r.getAttribute("data-value"))===e){t=r;break}}return t},l.prototype.updateCheck=function(e){if(this.mode==="CheckBox"&&this.enableGroupCheckBox&&!u(this.fields.groupBy)){var t=e.firstElementChild.lastElementChild;t.classList.contains("e-check")?e.classList.add("e-active"):e.classList.remove("e-active")}},l.prototype.moveBy=function(e,t){var i,s=this.chipCollectionWrapper.querySelectorAll("span."+Re),a=this.chipCollectionWrapper.querySelector("span."+Ce);a===null?e<0&&this.addChipSelection(s[s.length-1],t):e<0?(i=a.previousElementSibling,i!==null&&(this.removeChipSelection(),this.addChipSelection(i,t))):(i=a.nextElementSibling,this.removeChipSelection(),i!==null&&this.addChipSelection(i,t))},l.prototype.chipClick=function(e){if(this.enabled){var t=k(e.target,"."+Re);this.removeChipSelection(),this.addChipSelection(t,e)}},l.prototype.removeChipSelection=function(){this.chipCollectionWrapper&&this.removeChipFocus()},l.prototype.addChipSelection=function(e,t){g([e],Ce),this.trigger("chipSelection",t)},l.prototype.onChipRemove=function(e){if(!(e.which===3||e.button===2)&&this.enabled&&!this.readonly){var t=e.target.parentElement,i=t.getAttribute("data-value"),s=this.allowObjectBinding?this.getDataByValue(i):this.getFormattedValue(i);if(this.allowCustomValue&&(i!=="false"&&s===!1||!u(s)&&s.toString()==="NaN")&&(s=i),this.isPopupOpen()&&this.mode!=="CheckBox"&&this.hidePopup(e),this.inputFocus||this.inputElement.focus(),this.removeValue(s,e),s=this.allowObjectBinding?O(this.fields.value?this.fields.value:"",s):s,u(this.findListElement(this.list,"li","data-value",s))&&this.mainList&&this.listData){var a=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(a,this.mainData)}this.updateDelimeter(this.delimiterChar,e),this.placeholder&&this.floatLabelType==="Never"?(this.makeTextBoxEmpty(),this.checkPlaceholderSize()):this.inputElement.value="",e.preventDefault()}},l.prototype.makeTextBoxEmpty=function(){this.inputElement.value="",this.refreshPlaceHolder()},l.prototype.refreshPlaceHolder=function(){this.placeholder&&this.floatLabelType==="Never"?this.value&&this.value.length||!u(this.text)&&this.text!==""?this.inputElement.placeholder="":this.inputElement.placeholder=ii(this.placeholder):this.setFloatLabelType(),this.expandTextbox()},l.prototype.removeAllItems=function(e,t,i,s,a){var r=this.allowObjectBinding?this.indexOfObjectInArray(e,this.value):this.value.indexOf(e),n=this.value.slice(0);n.splice(r,1),this.setProperties({value:[].concat([],n)},!0),s.setAttribute("aria-selected","false");var h=this.hideSelectedItem?G:D.selected;C([s],h),this.notify("activeList",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",li:s,e:this,index:r}),this.invokeCheckboxSelection(s,t,i);var p=this.allowObjectBinding?O(this.fields.value?this.fields.value:"",e):e;this.updateMainList(!0,p,a),this.updateChipStatus()},l.prototype.invokeCheckboxSelection=function(e,t,i){this.notify("updatelist",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",li:e,e:t}),this.updateAriaActiveDescendant(),this.value&&this.value.length!==this.mainData.length&&this.mode==="CheckBox"&&this.showSelectAll&&!(this.isSelectAll||i)&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",value:"uncheck"})},l.prototype.removeValue=function(e,t,i,s){var a=this,r=this.allowObjectBinding?this.indexOfObjectInArray(e,this.value):this.value.indexOf(this.getFormattedValue(e));r===-1&&this.allowCustomValue&&!u(e)&&(r=this.allowObjectBinding?this.indexOfObjectInArray(e,this.value):this.value.indexOf(e.toString()));var n=t&&t.target;s=s||n&&n.classList.contains("e-close-hooker")?!0:null;var h=this.hideSelectedItem?G:D.selected;if(r!==-1){var p=this.allowObjectBinding?O(this.fields.value?this.fields.value:"",e):e,o=this.findListElement(this.list,"li","data-value",p),f=this.getDataByValue(e),c={e:t,item:o,itemData:f,isInteracted:!!t,cancel:!1};this.trigger("removing",c,function(v){if(v.cancel)a.removeIndex++;else{a.virtualSelectAll=!1;var S=a.value.slice(0);if(a.enableVirtualization&&s&&(S=[]),S.splice(r,1),a.setProperties({value:[].concat([],S)},!0),a.enableVirtualization){var b=r==0?a.text.replace(a.text.split(a.delimiterChar)[r]+a.delimiterChar,""):a.text.replace(a.delimiterChar+a.text.split(a.delimiterChar)[r],"");a.setProperties({text:b.toString()},!0)}if(o!==null){var w=a.allowObjectBinding?O(a.fields.value?a.fields.value:"",e):e,x=a.findListElement(a.mainList,"li","data-value",w);o.setAttribute("aria-selected","false"),C([o],h),x&&(x.setAttribute("aria-selected","false"),C([o,x],h)),a.notify("activeList",{module:"CheckBoxSelection",enable:a.mode==="CheckBox",li:o,e:a,index:r}),a.invokeCheckboxSelection(o,t,s)}var E=a.allowObjectBinding?O(a.fields.value?a.fields.value:"",e):e;a.hideSelectedItem&&a.fields.groupBy&&o&&a.hideGroupItem(E),a.hideSelectedItem&&a.fixedHeaderElement&&a.fields.groupBy&&a.mode!=="CheckBox"&&a.isPopupOpen()&&d.prototype.scrollStop.call(a),a.updateMainList(!0,E),a.removeChip(E,s),a.updateChipStatus();var N=a.value&&a.value.length?a.value.length:0;if(N<a.maximumSelectionLength){var R=a.list.querySelectorAll("li."+D.li+":not(.e-active)");C(R,"e-disable")}a.trigger("removed",v);var F=t&&t.currentTarget,H=F&&F.classList.contains("e-selectall-parent")?!0:null;if(!a.changeOnBlur&&!s&&t&&i&&!H&&a.isSelectAllTarget&&a.updateValueState(t,a.value,a.tempValues),i&&(a.selectAllEventData.push(f),a.selectAllEventEle.push(o)),i===1){a.changeOnBlur||a.updateValueState(t,a.value,a.tempValues);var ae={event:t,items:a.selectAllEventEle,itemData:a.selectAllEventData,isInteracted:!!t,isChecked:!1};a.trigger("selectedAll",ae),a.selectAllEventData=[],a.selectAllEventEle=[]}s&&(i===1||i===null)&&a.clearAllCallback(t,s),a.isPopupOpen()&&o&&o.parentElement.classList.contains("e-reorder")&&(a.hideSelectedItem&&a.value&&Array.isArray(a.value)&&a.value.length>0&&a.totalItemsCount(),a.notify("setCurrentViewDataAsync",{module:"VirtualScroll"}))}})}},l.prototype.updateMainList=function(e,t,i){if(this.allowFiltering||this.mode==="CheckBox"){var s=i||this.findListElement(this.mainList,"li","data-value",t);s&&(e?(s.setAttribute("aria-selected","false"),C([s],this.hideSelectedItem?G:D.selected),this.mode==="CheckBox"&&C([s.firstElementChild.lastElementChild],"e-check")):(s.setAttribute("aria-selected","true"),g([s],this.hideSelectedItem?G:D.selected),this.mode==="CheckBox"&&g([s.firstElementChild.lastElementChild],"e-check")))}},l.prototype.removeChip=function(e,t){if(this.chipCollectionWrapper)if(this.enableVirtualization&&t)this.chipCollectionWrapper.querySelectorAll(".e-chips");else{var i=this.findListElement(this.chipCollectionWrapper,"span","data-value",e);i&&Se(i)}},l.prototype.setWidth=function(e){u(e)||(typeof e=="number"?this.overAllWrapper.style.width=$(e):typeof e=="string"&&(this.overAllWrapper.style.width=e.match(/px|%|em/)?e:$(e)))},l.prototype.updateChipStatus=function(){this.value&&this.value.length?(u(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display=""),(this.mode==="Delimiter"||this.mode==="CheckBox")&&this.showDelimWrapper(),this.showOverAllClear()):(u(this.chipCollectionWrapper)||(this.chipCollectionWrapper.style.display="none"),u(this.delimiterWrapper)||(this.delimiterWrapper.style.display="none"),this.hideOverAllClear())},l.prototype.indexOfObjectInArray=function(e,t){for(var i=function(r){var n=t[r];if(Object.keys(e).every(function(h){return n.hasOwnProperty(h)&&n[h]===e[h]}))return{value:r}},s=0;s<t.length;s++){var a=i(s);if(typeof a=="object")return a.value}return-1},l.prototype.addValue=function(e,t,i){this.value||(this.value=[]);var s=this.allowObjectBinding?this.getDataByValue(e):e;if(this.allowObjectBinding&&!this.isObjectInArray(e,this.value)||!this.allowObjectBinding&&this.value.indexOf(s)<0){if(this.setProperties({value:[].concat([],this.value,[s])},!0),this.enableVirtualization){var a=this.viewWrapper.innerHTML,r=void 0;a+=this.value.length===1?"":this.delimiterChar+" ",r=this.getOverflowVal(this.value.length-1),a+=r,r=this.viewWrapper.innerHTML,this.updateWrapperText(this.viewWrapper,a)}if(this.enableVirtualization&&this.mode==="CheckBox"){var r=void 0,n=[],h=this.allowObjectBinding?O(this.fields.value?this.fields.value:"",this.value[this.value.length-1]):this.value[this.value.length-1];r=this.getTextByValue(h);var p=this.text!=null?this.text+","+r:r;n.push(p),this.setProperties({text:n.toString()},!0)}}var o=this.findListElement(this.list,"li","data-value",e);this.removeFocus(),o&&(this.addListFocus(o),this.addListSelection(o)),this.mode!=="Delimiter"&&this.mode!=="CheckBox"&&this.addChip(t,e,i),this.hideSelectedItem&&this.fields.groupBy&&this.hideGroupItem(e),this.updateChipStatus(),this.checkMaxSelection()},l.prototype.checkMaxSelection=function(){var e=this.value&&this.value.length?this.value.length:0;if(e===this.maximumSelectionLength){var t=this.list.querySelectorAll("li."+D.li+":not(.e-active)");g(t,"e-disable")}},l.prototype.dispatchSelect=function(e,t,i,s,a){var r=this,n=this.listData;if(this.initStatus&&!s){e=this.allowObjectBinding?O(this.fields.value?this.fields.value:"",e):e;var h=this.getDataByValue(e),p={e:t,item:i,itemData:h,isInteracted:!!t,cancel:!1};this.trigger("select",p,function(o){if(!o.cancel){if(a&&(r.selectAllEventData.push(h),r.selectAllEventEle.push(i)),a===1){var f={event:t,items:r.selectAllEventEle,itemData:r.selectAllEventData,isInteracted:!!t,isChecked:!0};r.trigger("selectedAll",f),r.selectAllEventData=[]}r.allowCustomValue&&r.isServerRendered&&r.listData!==n&&(r.listData=n),e=r.allowObjectBinding?r.getDataByValue(e):e,(r.enableVirtualization&&e||!r.enableVirtualization)&&r.updateListSelectEventCallback(e,i,t),r.hideSelectedItem&&r.fixedHeaderElement&&r.fields.groupBy&&r.mode!=="CheckBox"&&d.prototype.scrollStop.call(r)}})}},l.prototype.addChip=function(e,t,i){this.chipCollectionWrapper&&this.getChip(e,t,i)},l.prototype.removeChipFocus=function(){var e=this.chipCollectionWrapper.querySelectorAll("span."+Re+"."+Ce);if(C(e,Ce),A.isDevice)for(var t=this.chipCollectionWrapper.querySelectorAll("span."+ct.split(" ")[0]),i=0;i<t.length;i++)t[i].style.display="none"},l.prototype.onMobileChipInteraction=function(e){var t=k(e.target,"."+Re),i=t.querySelector("span."+ct.split(" ")[0]);this.enabled&&!this.readonly&&(t.classList.contains(Ce)||(this.removeChipFocus(),i.style.display="",t.classList.add(Ce)),this.refreshPopup(),e.preventDefault())},l.prototype.multiCompiler=function(e){var t=!1;if(typeof e!="function"&&e)try{t=!!wt(e,document).length}catch{t=!1}return t},l.prototype.encodeHtmlEntities=function(e){return e.replace(/[\u00A0-\u9999<>&]/g,function(t){return"&#"+t.charCodeAt(0)+";"})},l.prototype.getChip=function(e,t,i){var s=this,a={text:t,value:t},r=this.createElement("span",{className:Re,attrs:{"data-value":t,title:e}}),n,h=this.createElement("span",{className:Dl}),p=this.createElement("span",{className:ct});if(this.mainData&&(a=this.getDataByValue(t)),this.valueTemplate&&!u(a)){var o=this.multiCompiler(this.valueTemplate);typeof this.valueTemplate!="function"&&o?n=le(X(this.valueTemplate,document).innerHTML.trim()):n=le(this.valueTemplate);var f=n(a,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,h);f&&f.length>0&&Z(f,h),this.renderReactTemplates()}else this.enableHtmlSanitizer?h.innerText=e:h.innerHTML=this.encodeHtmlEntities(e.toString());r.appendChild(h);var c={isInteracted:!!i,itemData:a,e:i,setClass:function(v){g([r],v)},cancel:!1};this.isPreventChange=this.isAngular&&this.preventChange,this.trigger("tagging",c,function(v){v.cancel||(A.isDevice?(r.classList.add(Ll),Z([p],r),p.style.display="none",y.add(r,"click",s.onMobileChipInteraction,s)):(y.add(r,"mousedown",s.chipClick,s),s.showClearButton&&r.appendChild(p)),y.add(p,"mousedown",s.onChipRemove,s),s.chipCollectionWrapper.appendChild(r),!s.changeOnBlur&&i&&s.updateValueState(i,s.value,s.tempValues))})},l.prototype.calcPopupWidth=function(){var e=$(this.popupWidth);if(e.indexOf("%")>-1){var t=this.componentWrapper.offsetWidth*parseFloat(e)/100;e=t.toString()+"px"}return e},l.prototype.mouseIn=function(){this.enabled&&!this.readonly&&this.showOverAllClear()},l.prototype.mouseOut=function(){this.inputFocus||(this.overAllClear.style.display="none")},l.prototype.listOption=function(e,t){var i=!u(t.iconCss),s=u(t.properties)?t:t.properties;return this.listCurrentOptions=t.text!==null||t.value!==null?{fields:s,showIcon:i,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}},ie(this.listCurrentOptions,this.listCurrentOptions,t,!0),this.mode==="CheckBox"&&this.notify("listoption",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",dataSource:e,fieldProperty:s}),this.listCurrentOptions},l.prototype.renderPopup=function(){var e=this;if(this.list||d.prototype.render.call(this),!this.popupObj&&!u(this.popupWrapper)){document.body.appendChild(this.popupWrapper);var t=this.popupWrapper.querySelector("."+Pl);this.mode==="CheckBox"&&!this.allowFiltering&&t&&this.filterParent&&(t.remove(),this.filterParent=null);var i=parseInt(this.popupHeight,10);if(this.popupWrapper.style.visibility="hidden",this.headerTemplate&&(this.setHeaderTemplate(),i-=this.header.offsetHeight),Z([this.list],this.popupWrapper),!this.list.classList.contains(D.noData)&&this.getItems()[1]&&(this.listItemHeight=this.getItems()[1].offsetHeight),this.enableVirtualization&&!this.list.classList.contains(D.noData))if(!this.list.querySelector(".e-virtual-ddl-content")&&this.list.querySelector(".e-list-parent")?this.list.appendChild(this.createElement("div",{className:"e-virtual-ddl-content",styles:this.getTransformValues()})).appendChild(this.list.querySelector(".e-list-parent")):this.list.querySelector(".e-virtual-ddl-content")&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues()),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+D.li),this.virtualItemCount=this.itemCount,this.mode!=="CheckBox"&&(this.totalItemCount=this.value&&this.value.length?this.totalItemCount-this.value.length:this.totalItemCount),this.list.querySelector(".e-virtual-ddl"))this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else{var s=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl",styles:this.GetVirtualTrackHeight()});this.popupWrapper.querySelector(".e-dropdownbase").appendChild(s)}if(this.footerTemplate&&(this.setFooterTemplate(),i-=this.footer.offsetHeight),this.mode==="CheckBox"&&this.showSelectAll?(this.notify("selectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox"}),i-=this.selectAllHeight):this.mode==="CheckBox"&&!this.showSelectAll&&!this.headerTemplate&&!this.footerTemplate?(this.notify("selectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox"}),i=parseInt(this.popupHeight,10)):this.mode==="CheckBox"&&!this.showSelectAll&&(this.notify("selectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox"}),i=parseInt(this.popupHeight,10),this.headerTemplate&&this.header&&(i-=this.header.offsetHeight),this.footerTemplate&&this.footer&&(i-=this.footer.offsetHeight)),this.mode==="CheckBox"){var a={module:"CheckBoxSelection",enable:this.mode==="CheckBox",popupElement:this.popupWrapper};this.allowFiltering&&(this.notify("searchBox",a),i-=this.searchBoxHeight),g([this.popupWrapper],"e-checkbox")}this.popupHeight!=="auto"?(this.list.style.maxHeight=$(i),this.popupWrapper.style.maxHeight=$(this.popupHeight)):this.list.style.maxHeight=$(this.popupHeight),this.popupObj=new si(this.popupWrapper,{width:this.calcPopupWidth(),targetType:"relative",position:this.enableRtl?{X:"right",Y:"bottom"}:{X:"left",Y:"bottom"},relateTo:this.overAllWrapper,collision:this.enableRtl?{X:"fit",Y:"flip"}:{X:"flip",Y:"flip"},offsetY:1,enableRtl:this.enableRtl,zIndex:this.zIndex,close:function(){if(e.popupObj.element.parentElement){e.popupObj.unwireScrollEvents();var r=e.popupWrapper.querySelector("."+zt);e.mode==="CheckBox"&&r&&document.activeElement===r&&r.blur(),I(e.popupObj.element)}},open:function(){if(e.popupObj.resolveCollision(),!e.isFirstClick){var r=e.list.querySelector("ul");r&&(e.mode!=="CheckBox"&&(e.allowFiltering||e.allowCustomValue)&&e.targetElement().trim()!==""||(e.mainList=r.cloneNode?r.cloneNode(!0):r)),e.isFirstClick=!0}e.popupObj.wireScrollEvents(),!(e.mode!=="CheckBox"&&(e.allowFiltering||e.allowCustomValue)&&e.targetElement().trim()!=="")&&!e.enableVirtualization&&(e.loadTemplate(),e.enableVirtualization&&e.mode==="CheckBox"&&e.UpdateSkeleton()),e.isPreventScrollAction=!0,e.setScrollPosition(),e.allowFiltering&&e.notify("inputFocus",{module:"CheckBoxSelection",enable:e.mode==="CheckBox",value:"focus"}),e.enableVirtualization&&(e.notify("bindScrollEvent",{module:"VirtualScroll",component:e.getModuleName(),enable:e.enableVirtualization}),setTimeout(function(){e.value?e.updateSelectionList():e.viewPortInfo&&e.viewPortInfo.offsets.top&&(e.list.scrollTop=e.viewPortInfo.offsets.top)},5))},targetExitViewport:function(){A.isDevice||e.hidePopup()}}),this.popupContentElement=this.popupObj.element.querySelector(".e-content"),this.mode==="CheckBox"&&A.isDevice&&this.allowFiltering&&this.notify("deviceSearchBox",{module:"CheckBoxSelection",enable:this.mode==="CheckBox"}),this.popupObj.close(),this.popupWrapper.style.visibility=""}},l.prototype.setHeaderTemplate=function(){var e;this.header&&this.header.remove(),this.header=this.createElement("div"),g([this.header],Nl);var t=this.multiCompiler(this.headerTemplate);typeof this.headerTemplate!="function"&&t?e=le(X(this.headerTemplate,document).innerHTML.trim()):e=le(this.headerTemplate);var i=e({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);i&&i.length>0&&Z(i,this.header),this.mode==="CheckBox"&&this.showSelectAll?ge([this.header],this.popupWrapper):Z([this.header],this.popupWrapper),y.add(this.header,"mousedown",this.onListMouseDown,this)},l.prototype.setFooterTemplate=function(){var e;this.footer&&this.footer.remove(),this.footer=this.createElement("div"),g([this.footer],Bl);var t=this.multiCompiler(this.footerTemplate);typeof this.footerTemplate!="function"&&t?e=le(X(this.footerTemplate,document).innerHTML.trim()):e=le(this.footerTemplate);var i=e({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);i&&i.length>0&&Z(i,this.footer),Z([this.footer],this.popupWrapper),y.add(this.footer,"mousedown",this.onListMouseDown,this)},l.prototype.updateInitialData=function(){var e=this.selectData;if(this.renderItems(e,this.fields),this.list.scrollTop=0,this.virtualListInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:0},this.previousStartIndex=0,this.previousEndIndex=0,this.dataSource instanceof j?this.totalItemCount=this.dataCount=this.virtualGroupDataSource&&this.virtualGroupDataSource.length?this.virtualGroupDataSource.length:0:this.totalItemCount=this.dataCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.mode!=="CheckBox"&&(this.totalItemCount=this.value&&this.value.length?this.totalItemCount-this.value.length:this.totalItemCount),this.getSkeletonCount(),this.UpdateSkeleton(),this.list.getElementsByClassName("e-virtual-ddl")[0])this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else if(!this.list.querySelector(".e-virtual-ddl")&&this.skeletonCount>0){var t=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl",styles:this.GetVirtualTrackHeight()});this.popupWrapper.querySelector(".e-dropdownbase").appendChild(t)}this.listData=e,this.liCollections=this.list.querySelectorAll(".e-list-item"),this.list.getElementsByClassName("e-virtual-ddl-content")[0]&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues())},l.prototype.clearAll=function(e){if(this.enabled&&!this.readonly){var t=void 0;if(this.value&&this.value.length>0){var i=this.list&&this.list.querySelectorAll("li.e-list-item");if(i&&i.length>0)this.selectAllItems(!1,e);else for(this.removeIndex=0,t=this.value[this.removeIndex];this.removeIndex<this.value.length;t=this.value[this.removeIndex])this.removeValue(t,e,null,!0);this.selectedElementID=null,this.inputElement.removeAttribute("aria-activedescendant")}else this.clearAllCallback(e);this.checkAndResetCache(),this.enableVirtualization&&(this.updateInitialData(),this.chipCollectionWrapper&&(this.chipCollectionWrapper.innerHTML=""),this.isCustomDataUpdated||this.notify("setGeneratedData",{module:"VirtualScroll"})),this.enableVirtualization&&(this.list.scrollTop=0,this.virtualListInfo=null,this.previousStartIndex=0,this.previousEndIndex=0)}},l.prototype.clearAllCallback=function(e,t){var i=this.value?this.value.slice():[];if(this.mainList&&this.listData&&(this.allowFiltering&&this.mode!=="CheckBox"||this.allowCustomValue)){var s=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(s,this.mainData)}this.focusAtFirstListItem(),this.updateDelimeter(this.delimiterChar,e),this.mode!=="Box"&&(!this.inputFocus||this.mode==="CheckBox")&&this.updateDelimView(),this.inputElement.value!==""&&(this.makeTextBoxEmpty(),this.search(null)),this.checkPlaceholderSize(),this.isPopupOpen()&&this.refreshPopup(),this.inputFocus||(this.changeOnBlur&&this.updateValueState(e,this.value,i),this.mode!=="CheckBox"&&this.inputElement.focus()),this.mode==="CheckBox"&&(this.refreshPlaceHolder(),this.refreshInputHight(),this.changeOnBlur&&t&&(u(this.value)||this.value.length===0)&&this.updateValueState(e,this.value,this.tempValues)),!this.changeOnBlur&&t&&(u(this.value)||this.value.length===0)&&this.updateValueState(e,this.value,this.tempValues),this.mode==="CheckBox"&&this.enableGroupCheckBox&&!u(this.fields.groupBy)&&this.updateListItems(this.list.querySelectorAll("li.e-list-item"),this.mainList.querySelectorAll("li.e-list-item")),e.preventDefault()},l.prototype.windowResize=function(){this.refreshPopup(),(!this.inputFocus||this.mode==="CheckBox")&&this.viewWrapper&&this.viewWrapper.parentElement&&this.updateDelimView()},l.prototype.resetValueHandler=function(e){var t=k(this.inputElement,"form");if(t&&e.target===t){var i=this.element.tagName===this.getNgDirective()?null:this.element.getAttribute("data-initial-value");this.text=i}},l.prototype.wireEvent=function(){y.add(this.componentWrapper,"mousedown",this.wrapperClick,this),y.add(window,"resize",this.windowResize,this),y.add(this.inputElement,"focus",this.focusInHandler,this),y.add(this.inputElement,"keydown",this.onKeyDown,this),y.add(this.inputElement,"keyup",this.keyUp,this),this.mode!=="CheckBox"&&y.add(this.inputElement,"input",this.onInput,this),y.add(this.inputElement,"blur",this.onBlurHandler,this),y.add(this.componentWrapper,"mouseover",this.mouseIn,this);var e=k(this.inputElement,"form");e&&y.add(e,"reset",this.resetValueHandler,this),y.add(this.componentWrapper,"mouseout",this.mouseOut,this),y.add(this.overAllClear,"mouseup",this.clearAll,this),y.add(this.inputElement,"paste",this.pasteHandler,this)},l.prototype.onInput=function(e){this.keyDownStatus?this.isValidKey=!0:this.isValidKey=!1,this.keyDownStatus=!1,A.isDevice&&A.info.name==="mozilla"&&this.search(e)},l.prototype.pasteHandler=function(e){var t=this;setTimeout(function(){t.expandTextbox(),t.search(e)})},l.prototype.search=function(e){var t=this;if(this.resetFilteredData=!0,this.preventSetCurrentData=!1,this.firstItem=this.dataSource&&this.dataSource.length>0?this.dataSource[0]:null,u(e)||(this.keyCode=e.keyCode),!this.isPopupOpen()&&this.openOnClick&&this.showPopup(e),this.openClick(e),this.checkTextLength()&&!this.allowFiltering&&!u(e)&&e.keyCode!==8)this.focusAtFirstListItem();else{var i=this.targetElement();if(this.allowFiltering){this.allowCustomValue&&(this.isRemoteSelection=!0),this.backCommand||this.checkAndResetCache();var s={preventDefaultAction:!1,text:this.targetElement(),updateData:function(v,S,b){s.cancel||(t.isFiltered=!0,t.remoteFilterAction=!0,t.dataUpdater(v,S,b))},event:e,cancel:!1};this.trigger("filtering",s,function(v){v.cancel||!t.isFiltered&&!v.preventDefaultAction&&(t.filterAction=!0,t.dataUpdater(t.dataSource,null,t.fields))})}else if(this.allowCustomValue){var a=new J;a=this.allowFiltering&&i!==""?a.where(this.fields.text,"startswith",i,this.ignoreCase,this.ignoreAccent):a,this.enableVirtualization?this.dataSource instanceof j?this.dataUpdater(this.virtualGroupDataSource,a,this.fields):this.dataUpdater(this.dataSource,a,this.fields):this.dataUpdater(this.mainData,a,this.fields),this.UpdateSkeleton()}else{var r=this.list.querySelectorAll("li."+D.li+":not(.e-hide-listitem)"),n=this.typeOfData(this.listData).typeof,h=Me(this.targetElement(),r,"StartsWith",this.ignoreCase);if(this.enableVirtualization&&this.targetElement().trim()!==""&&!this.allowFiltering){var p=!1;for((this.viewPortInfo.endIndex>=this.incrementalEndIndex&&this.incrementalEndIndex<=this.totalItemCount||this.incrementalEndIndex==0)&&(p=!0,this.incrementalStartIndex=0,this.incrementalEndIndex=100>this.totalItemCount?this.totalItemCount:100,this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),p=!1),(this.viewPortInfo.startIndex!==0||p)&&this.updateIncrementalView(0,this.itemCount),h=Me(this.targetElement(),this.incrementalLiCollections,this.filterType,!0,this.listData,this.fields,n);u(h)&&this.incrementalEndIndex<this.totalItemCount&&(this.incrementalStartIndex=this.incrementalEndIndex,this.incrementalEndIndex=this.incrementalEndIndex+100>this.totalItemCount?this.totalItemCount:this.incrementalEndIndex+100,this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),p=!0,(this.viewPortInfo.startIndex!==0||p)&&this.updateIncrementalView(0,this.itemCount),h=Me(this.targetElement(),this.incrementalLiCollections,this.filterType,!0,this.listData,this.fields,n),!!u(h));)if(u(h)&&this.incrementalEndIndex>=this.totalItemCount){this.incrementalStartIndex=0,this.incrementalEndIndex=100>this.totalItemCount?this.totalItemCount:100;break}if(h.index&&(!(this.viewPortInfo.startIndex>=h.index)||!(h.index>=this.viewPortInfo.endIndex))){var o=h.index-(this.itemCount/2-2)>0?h.index-(this.itemCount/2-2):0,f=o+this.itemCount>this.totalItemCount?this.totalItemCount:o+this.itemCount;o!=this.viewPortInfo.startIndex&&this.updateIncrementalView(o,f)}if(u(h.item))this.updateIncrementalView(0,this.itemCount),this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues(),this.list.scrollTop=0;else{var c=this.getIndexByValue(h.item.getAttribute("data-value"))-this.skeletonCount;if(c>this.itemCount/2){var o=this.viewPortInfo.startIndex+(this.itemCount/2-2)<this.totalItemCount?this.viewPortInfo.startIndex+(this.itemCount/2-2):this.totalItemCount,f=this.viewPortInfo.startIndex+this.itemCount>this.totalItemCount?this.totalItemCount:this.viewPortInfo.startIndex+this.itemCount;this.updateIncrementalView(o,f)}h.item=this.getElementByValue(h.item.getAttribute("data-value"))}h&&h.item&&(h.item=this.getElementByValue(h.item.getAttribute("data-value")))}h&&h.item?(this.addListFocus(h.item),this.list.scrollTop=h.item.offsetHeight*h.index):this.targetElement()!==""?this.removeFocus():this.focusAtFirstListItem()}}this.enableVirtualization&&this.allowFiltering&&this.getFilteringSkeletonCount()},l.prototype.preRender=function(){this.allowFiltering===null&&(this.allowFiltering=this.mode==="CheckBox"),this.preventSetCurrentData=!1,this.initializeData(),this.updateDataAttribute(this.htmlAttributes),d.prototype.preRender.call(this)},l.prototype.getLocaleName=function(){return"multi-select"},l.prototype.initializeData=function(){this.mainListCollection=[],this.beforePopupOpen=!1,this.filterAction=!1,this.remoteFilterAction=!1,this.isFirstClick=!1,this.mobFilter=!0,this.isFiltered=!1,this.focused=!0,this.initial=!0,this.backCommand=!0,this.isCustomRendered=!1,this.isRemoteSelection=!1,this.isSelectAllTarget=!0,this.viewPortInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount}},l.prototype.updateData=function(e,t){var i="",s=this.mode==="Delimiter"||this.mode==="CheckBox",a=[],r,n=this.listData;if(this.enableVirtualization||(this.listData=this.mainData),u(this.hiddenElement)||(this.hiddenElement.innerHTML=""),!u(this.value)){for(var h=this.value.length,p="",o=0;o<h;o++){var f=this.allowObjectBinding?O(this.fields.value?this.fields.value:"",this.value[o]):this.value[o],c=this.findListElement(u(this.mainList)?this.ulElement:this.mainList,"li","data-value",f);if(this.enableVirtualization&&(c=this.findListElement(u(this.list)?this.ulElement:this.list,"li","data-value",f)),u(c)&&!this.allowCustomValue&&!this.enableVirtualization)this.value.splice(o,1),o-=1,h-=1;else{if(this.listData)if(this.enableVirtualization){s&&(i=this.delimiterWrapper&&this.delimiterWrapper.innerHTML==""?i:this.delimiterWrapper.innerHTML);var v=this.allowObjectBinding?O(this.fields.value?this.fields.value:"",this.value[this.value.length-1]):this.value[this.value.length-1];r=this.getTextByValue(v);var S=this.text!=null&&this.text!=""?this.text+","+r:r;i+=r+e+" ",a.push(S);break}else r=this.getTextByValue(f);else r=f;i+=r+e+" ",a.push(r)}p+='<option selected value="'+f+'">'+o+"</option>"}u(this.hiddenElement)||(this.hiddenElement.innerHTML=p)}var b=t&&t.target&&t.target.classList.contains("e-chips-close");(!this.enableVirtualization||this.enableVirtualization&&this.mode!=="CheckBox"&&!b)&&this.setProperties({text:a.toString()},!0),s&&(this.updateWrapperText(this.delimiterWrapper,i),this.delimiterWrapper.setAttribute("id",de("delim_val")),this.inputElement.setAttribute("aria-describedby",this.delimiterWrapper.id));var w=t&&t.target,x=w&&w.classList.contains("e-close-hooker")?!0:null;(!this.changeOnBlur&&t&&!x||this.isSelectAll)&&(this.isSelectAll=!1,this.updateValueState(t,this.value,this.tempValues)),this.listData=n,this.addValidInputClass()},l.prototype.initialTextUpdate=function(){if(u(this.text))this.setProperties({value:null},!0);else{for(var e=this.text.split(this.delimiterChar),t=[],i=0;e.length>i;i++){var s=this.getValueByText(e[i]);u(s)?this.allowCustomValue&&t.push(e[i]):t.push(s)}if(t&&t.length){var a=this.allowObjectBinding?this.getDataByValue(t):t;this.setProperties({value:a},!0)}}},l.prototype.renderList=function(e){!e&&this.allowCustomValue&&this.list&&(this.list.textContent===this.noRecordsTemplate||this.list.querySelector(".e-ul")&&this.list.querySelector(".e-ul").childElementCount===0)&&(e=!0),d.prototype.render.call(this,null,e),this.totalItemCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.unwireListEvents(),this.wireListEvents()},l.prototype.initialValueUpdate=function(e){if(this.list){var t=void 0,i=void 0,s=void 0;if(this.chipCollectionWrapper&&(this.chipCollectionWrapper.innerHTML=""),this.removeListSelection(),!u(this.value))for(var a=0;!u(this.value[a]);a++){s=this.allowObjectBinding?O(this.fields.value?this.fields.value:"",this.value[a]):this.value[a],i=this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",s);var r=!1;if(this.enableVirtualization){if(t=null,e!=null&&e.length>0){for(var n=0;n<e.length;n++)if(O(this.fields.value?this.fields.value:"value",e[n])===s){t=O(this.fields.text,e[n]);break}}u(t)&&this.allowCustomValue&&(t=this.getTextByValue(s),r=!0)}else t=this.getTextByValue(s);if(i&&i.getAttribute("aria-selected")!=="true"||i&&i.getAttribute("aria-selected")==="true"&&this.hideSelectedItem&&(this.mode==="Box"||this.mode==="Default")||this.enableVirtualization&&s!=null&&t!=null&&!r){var h=[],p=this.text!=null?this.text+","+t:t;h.push(p),this.setProperties({text:h.toString()},!0),this.addChip(t,s),this.addListSelection(i)}else if(s&&this.allowCustomValue){var o=this.listData.length,f={};Q(this.fields.text,s,f),Q(this.fields.value,s,f);var c=this.popupWrapper.querySelector("."+D.noData);this.addItem(f,o),this.enableVirtualization&&(this.virtualCustomSelectData&&this.virtualCustomSelectData.length>=0?this.virtualCustomSelectData.push(f):this.virtualCustomSelectData=[f]),i=i||this.findListElement(this.hideSelectedItem?this.ulElement:this.list,"li","data-value",s),this.popupWrapper.contains(c)&&(this.list.setAttribute("style",c.getAttribute("style")),this.popupWrapper.replaceChild(this.list,c),this.wireListEvents());var h=[],p=this.text!=null?this.text+","+t:t;h.push(p),this.setProperties({text:h.toString()},!0),this.addChip(t,s),this.addListSelection(i)}}this.mode==="CheckBox"?(this.updateDelimView(),this.changeOnBlur&&this.updateValueState(null,this.value,this.tempValues),this.updateDelimeter(this.delimiterChar),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar),this.mode==="CheckBox"&&this.showSelectAll&&(u(this.value)||!this.value.length)&&this.notify("checkSelectAll",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",value:"uncheck"}),this.mode==="Box"||this.mode==="Default"&&this.inputFocus?this.chipCollectionWrapper.style.display="":(this.mode==="Delimiter"||this.mode==="CheckBox")&&this.showDelimWrapper()}},l.prototype.updateActionCompleteData=function(e,t){this.value&&(!this.allowObjectBinding&&this.value.indexOf(e.getAttribute("data-value"))>-1||this.allowObjectBinding&&this.isObjectInArray(this.getDataByValue(e.getAttribute("data-value")),this.value))&&(this.mainList=this.ulElement,this.hideSelectedItem&&g([e],G))},l.prototype.updateAddItemList=function(e,t){this.popupObj&&this.popupObj.element&&this.popupObj.element.querySelector("."+D.noData)&&e?(this.list=e,this.mainList=this.ulElement=e.querySelector("ul"),Se(this.popupWrapper.querySelector(".e-content")),this.popupObj=null,this.renderPopup()):this.allowCustomValue&&(this.list=e,this.mainList=this.ulElement=e.querySelector("ul"))},l.prototype.updateDataList=function(){if(this.mainList&&this.ulElement&&!(this.isFiltered||this.filterAction||this.targetElement().trim())){var e=this.mainList.childElementCount<this.ulElement.childElementCount,t=this.ulElement.childElementCount>0&&this.ulElement.children[0].childElementCount>0&&this.mainList.children[0]&&this.mainList.children[0].childElementCount<this.ulElement.children[0].childElementCount,i=this.itemTemplate&&this.ulElement.childElementCount>0&&!(this.ulElement.childElementCount<this.mainList.childElementCount)&&(this.ulElement.children[0].childElementCount>0||this.fields.groupBy&&this.ulElement.children[1]&&this.ulElement.children[1].childElementCount>0);(e||t||i)&&(this.mainList=this.ulElement)}},l.prototype.isValidLI=function(e){return e&&!e.classList.contains(D.disabled)&&!e.classList.contains(D.group)&&e.classList.contains(D.li)},l.prototype.updateListSelection=function(e,t,i){var s=e.getAttribute("data-value"),a=this.allowObjectBinding?this.getDataByValue(s):this.getFormattedValue(s);this.allowCustomValue&&(s!=="false"&&a===!1||!u(a)&&a.toString()==="NaN")&&(a=s),this.removeHover(),!this.value||!this.allowObjectBinding&&this.value.indexOf(a)===-1||this.allowObjectBinding&&this.indexOfObjectInArray(a,this.value)===-1?this.dispatchSelect(a,t,e,e.getAttribute("aria-selected")==="true",i):this.removeValue(a,t,i)},l.prototype.updateListSelectEventCallback=function(e,t,i){var s=this;e=this.allowObjectBinding?O(this.fields.value?this.fields.value:"",e):e;var a=this.getTextByValue(e);if((this.allowCustomValue||this.allowFiltering)&&!this.findListElement(this.mainList,"li","data-value",e)&&(!this.enableVirtualization||this.enableVirtualization&&this.virtualCustomData)){var r=t&&t.cloneNode(!0),n=this.fields.value?this.fields.value:"value";this.allowCustomValue&&this.mainData.length&&typeof O(n,this.mainData[0])=="number"&&(e=isNaN(parseFloat(e.toString()))?e:parseFloat(e.toString()));var h=this.getDataByValue(e),p={newData:h,cancel:!1};this.trigger("customValueSelection",p,function(o){o.cancel||(s.enableVirtualization&&s.virtualCustomData?(s.virtualCustomSelectData&&s.virtualCustomSelectData.length>=0?s.virtualCustomSelectData.push(h):s.virtualCustomSelectData=[h],s.remoteCustomValue=!1,s.addValue(e,a,i)):(Z([r],s.mainList),s.mainData.push(h),s.remoteCustomValue=!1,s.addValue(e,a,i)))})}else this.remoteCustomValue=!1,this.addValue(e,a,i)},l.prototype.removeListSelection=function(){var e=this.hideSelectedItem?G:D.selected,t=this.list.querySelectorAll("."+e),i=t.length;if(t&&t.length)for(C(t,e);i>0;)t[i-1].setAttribute("aria-selected","false"),i--;if(!u(this.mainList)){var s=this.mainList.querySelectorAll("."+e),a=s.length;if(s&&s.length)for(C(s,e);a>0;)s[a-1].setAttribute("aria-selected","false"),this.mode==="CheckBox"&&(t&&t.length>a-1&&C([t[a-1].firstElementChild.lastElementChild],"e-check"),C([s[a-1].firstElementChild.lastElementChild],"e-check")),a--}},l.prototype.removeHover=function(){var e=this.list.querySelectorAll("."+D.hover);e&&e.length&&C(e,D.hover)},l.prototype.removeFocus=function(){if(this.list&&this.mainList){var e=this.list.querySelectorAll("."+D.focus),t=this.mainList.querySelectorAll("."+D.focus);e&&e.length&&(C(e,D.focus),C(t,D.focus))}},l.prototype.addListHover=function(e){this.enabled&&this.isValidLI(e)?(this.removeHover(),g([e],D.hover)):e!==null&&e.classList.contains("e-list-group-item")&&this.enableGroupCheckBox&&this.mode==="CheckBox"&&!u(this.fields.groupBy)&&(this.removeHover(),g([e],D.hover))},l.prototype.addListFocus=function(e){this.enabled&&this.isValidLI(e)?(this.removeFocus(),g([e],D.focus),this.updateAriaActiveDescendant()):this.enableGroupCheckBox&&this.mode==="CheckBox"&&!u(this.fields.groupBy)&&(g([e],D.focus),this.updateAriaActiveDescendant())},l.prototype.addListSelection=function(e,t){var i=this.hideSelectedItem?G:D.selected;if(this.isValidLI(e)&&!e.classList.contains(D.hover)){if(g([e],i),this.updateMainList(!1,e.getAttribute("data-value"),t),e.setAttribute("aria-selected","true"),this.mode==="CheckBox"&&e.classList.contains("e-active")){var s=e.getElementsByClassName("e-check").length;s===0&&this.notify("updatelist",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",li:e,e:this})}this.notify("activeList",{module:"CheckBoxSelection",enable:this.mode==="CheckBox",li:e,e:this}),this.chipCollectionWrapper&&this.removeChipSelection(),this.selectedElementID=e.id}},l.prototype.updateDelimeter=function(e,t){this.updateData(e,t)},l.prototype.onMouseClick=function(e){var t=this;this.keyCode=null,this.scrollFocusStatus=!1,this.keyboardEvent=null;var i=e.target,s=k(i,"."+D.li);if(!(this.enableVirtualization&&s&&s.classList.contains("e-virtual-list"))){var a=k(i,"."+D.group);if(a&&this.enableGroupCheckBox&&this.mode==="CheckBox"&&this.fields.groupBy)i=i.classList.contains("e-list-group-item")?i.firstElementChild.lastElementChild:e.target,i.classList.contains("e-check")?(this.selectAllItem(!1,e),i.classList.remove("e-check"),i.classList.remove("e-stop"),k(i,".e-list-group-item").classList.remove("e-active"),i.setAttribute("aria-selected","false")):(this.selectAllItem(!0,e),i.classList.remove("e-stop"),i.classList.add("e-check"),k(i,".e-list-group-item").classList.add("e-active"),i.setAttribute("aria-selected","true")),this.refreshSelection(),this.checkSelectAll();else{if(this.isValidLI(s)){var r=this.value&&this.value.length?this.value.length:0;s.classList.contains("e-active")&&(r=r-1),r<this.maximumSelectionLength&&(this.updateListSelection(s,e),this.checkPlaceholderSize(),this.addListFocus(s),(this.allowCustomValue||this.allowFiltering)&&this.mainList&&this.listData?this.mode!=="CheckBox"&&(this.focusAtLastListItem(s.getAttribute("data-value")),this.refreshSelection()):this.makeTextBoxEmpty()),this.mode==="CheckBox"?(this.updateDelimView(),this.value&&this.value.length>50?setTimeout(function(){t.updateDelimeter(t.delimiterChar,e)},0):this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,e),this.checkSelectAll(),this.refreshPopup(),this.hideSelectedItem&&this.focusAtFirstListItem(),this.closePopupOnSelect?this.hidePopup(e):e.preventDefault(),this.makeTextBoxEmpty(),this.findGroupStart(i),this.mode!=="CheckBox"&&this.refreshListItems(u(s)?null:s.textContent)}else e.preventDefault();if(this.enableVirtualization&&this.hideSelectedItem){var n=this.list.querySelectorAll("li."+D.li+":not(."+G+"):not(.e-reorder-hide):not(.e-virtual-list)");if(n.length){var h=this.virtualListHeight>0?Math.floor(this.virtualListHeight/this.listItemHeight):0;if(n.length<h+2){var p=this.getForQuery(this.value).clone();if(p=p.skip(this.virtualItemStartIndex),this.resetList(this.dataSource,this.fields,p),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+D.li),this.virtualItemCount=this.itemCount,this.mode!=="CheckBox"&&(this.totalItemCount=this.value&&this.value.length?this.totalItemCount-this.value.length:this.totalItemCount),this.list.querySelector(".e-virtual-ddl"))this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight();else{var o=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl",styles:this.GetVirtualTrackHeight()});this.popupWrapper.querySelector(".e-dropdownbase").appendChild(o)}this.list.querySelector(".e-virtual-ddl-content")&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues())}}}this.refreshPlaceHolder(),this.deselectHeader()}}},l.prototype.findGroupStart=function(e){if(this.enableGroupCheckBox&&this.mode==="CheckBox"&&!u(this.fields.groupBy)){var t=0,i=0,s=0,a=void 0;if(this.itemTemplate&&!e.getElementsByClassName("e-frame").length)for(;!e.getElementsByClassName("e-frame").length;)e=e.parentElement;for(e.classList.contains("e-frame")&&(e=e.parentElement.parentElement),a=this.findGroupAttrtibutes(e,i,s,t,0),a=this.findGroupAttrtibutes(e,a[0],a[1],a[2],1);!e.classList.contains("e-list-group-item")&&(e.classList.contains("e-list-icon")&&(e=e.parentElement),e=e.previousElementSibling,e!=null););this.updateCheckBox(e,a[0],a[1],a[2])}},l.prototype.findGroupAttrtibutes=function(e,t,i,s,a){for(;!e.classList.contains("e-list-group-item")&&(e.classList.contains("e-list-icon")&&(e=e.parentElement),e.getElementsByClassName("e-frame")[0].classList.contains("e-check")&&e.classList.contains("e-list-item")?t++:e.classList.contains("e-list-item")&&i++,s++,e=a?e.nextElementSibling:e.previousElementSibling,e!=null););return[t,i,s]},l.prototype.updateCheckBox=function(e,t,i,s){if(e!==null){var a=e.getElementsByClassName("e-frame")[0];s===t?(a.classList.remove("e-stop"),a.classList.add("e-check"),k(a,".e-list-group-item").classList.add("e-active"),e.setAttribute("aria-selected","true")):s===i?(a.classList.remove("e-check"),a.classList.remove("e-stop"),k(a,".e-list-group-item").classList.remove("e-active"),e.setAttribute("aria-selected","false")):this.maximumSelectionLength===t-1?(a.classList.remove("e-stop"),e.setAttribute("aria-selected","true"),k(a,".e-list-group-item").classList.add("e-active"),a.classList.add("e-check")):(a.classList.remove("e-check"),a.classList.add("e-stop"),k(a,".e-list-group-item").classList.add("e-active"),e.setAttribute("aria-selected","false"))}},l.prototype.deselectHeader=function(){var e=this.value&&this.value.length?this.value.length:0,t=this.list.querySelectorAll("li.e-list-group-item:not(.e-active)");e<this.maximumSelectionLength&&C(t,"e-disable"),e===this.maximumSelectionLength&&g(t,"e-disable")},l.prototype.onMouseOver=function(e){var t=k(e.target,"."+D.li);t===null&&this.mode==="CheckBox"&&!u(this.fields.groupBy)&&this.enableGroupCheckBox&&(t=k(e.target,"."+D.group)),this.addListHover(t)},l.prototype.onMouseLeave=function(){this.removeHover()},l.prototype.onListMouseDown=function(e){e.preventDefault(),this.scrollFocusStatus=!0},l.prototype.onDocumentClick=function(e){if(this.mode!=="CheckBox"){var t=e.target;!(!u(this.popupObj)&&k(t,'[id="'+this.popupObj.element.id+'"]'))&&!this.overAllWrapper.contains(e.target)?this.scrollFocusStatus=!1:this.scrollFocusStatus=(A.isIE||A.info.name==="edge")&&document.activeElement===this.inputElement}},l.prototype.wireListEvents=function(){u(this.list)||(y.add(document,"mousedown",this.onDocumentClick,this),y.add(this.list,"mousedown",this.onListMouseDown,this),y.add(this.list,"mouseup",this.onMouseClick,this),y.add(this.list,"mouseover",this.onMouseOver,this),y.add(this.list,"mouseout",this.onMouseLeave,this))},l.prototype.unwireListEvents=function(){y.remove(document,"mousedown",this.onDocumentClick),this.list&&(y.remove(this.list,"mousedown",this.onListMouseDown),y.remove(this.list,"mouseup",this.onMouseClick),y.remove(this.list,"mouseover",this.onMouseOver),y.remove(this.list,"mouseout",this.onMouseLeave))},l.prototype.hideOverAllClear=function(){(!this.value||!this.value.length||this.inputElement.value==="")&&(this.overAllClear.style.display="none")},l.prototype.showOverAllClear=function(){(this.value&&this.value.length||this.inputElement.value!=="")&&this.showClearButton&&this.readonly!==!0?this.overAllClear.style.display="":this.overAllClear.style.display="none"},l.prototype.focusIn=function(){document.activeElement!==this.inputElement&&this.enabled&&this.inputElement.focus()},l.prototype.focusOut=function(){document.activeElement===this.inputElement&&this.enabled&&this.inputElement.blur()},l.prototype.showSpinner=function(){if(u(this.spinnerElement)){var e=this.filterParent&&this.filterParent.querySelector(".e-clear-icon.e-icons");this.overAllClear.style.display!=="none"||e?this.spinnerElement=e||this.overAllClear:(this.spinnerElement=this.createElement("span",{className:Fi+" "+ji}),this.componentWrapper.appendChild(this.spinnerElement)),ps({target:this.spinnerElement,width:A.isDevice?"16px":"14px"},this.createElement),g([this.spinnerElement],qi),cs(this.spinnerElement)}},l.prototype.hideSpinner=function(){u(this.spinnerElement)||(ds(this.spinnerElement),C([this.spinnerElement],qi),this.spinnerElement.classList.contains(ji)?I(this.spinnerElement):this.spinnerElement.innerHTML="",this.spinnerElement=null)},l.prototype.updateWrapperText=function(e,t){this.valueTemplate||!this.enableHtmlSanitizer?e.innerHTML=this.encodeHtmlEntities(t):e.innerText=t},l.prototype.updateDelimView=function(){if(this.delimiterWrapper&&this.hideDelimWrapper(),this.chipCollectionWrapper&&(this.chipCollectionWrapper.style.display="none"),u(this.viewWrapper)||(this.viewWrapper.style.display="",this.viewWrapper.style.width="",this.viewWrapper.classList.remove(ft)),this.value&&this.value.length){var e="",t=void 0,i=void 0,s=1,a=void 0,r=void 0,n=0,h=void 0;this.enableVirtualization||this.updateWrapperText(this.viewWrapper,e);var p={noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed",overflowCountTemplate:"+${count} more..",totalCountTemplate:"${count} selected"},o=new fe(this.getLocaleName(),p,this.locale);o.getConstant("actionFailureTemplate")===""&&(o=new fe("dropdowns",p,this.locale)),o.getConstant("noRecordsTemplate")===""&&(o=new fe("dropdowns",p,this.locale));var f=o.getConstant("overflowCountTemplate"),c=o.getConstant("totalCountTemplate"),v=this.createElement("span",{className:Ol}),S=f.replace("${count}",this.value.length.toString());v.innerText=S,this.viewWrapper.appendChild(v),this.renderReactTemplates();var b=v.offsetWidth;if(Se(v),this.showDropDownIcon&&(n=this.dropIcon.offsetWidth+parseInt(window.getComputedStyle(this.dropIcon).marginRight,10)),this.checkClearIconWidth(),!u(this.value))for(var w=0;!u(this.value[w]);w++){var x=this.text&&this.text.split(this.delimiterChar);if(this.enableVirtualization?x&&(e+=w===0?"":this.delimiterChar+" ",t=x[w],e+=t,t=this.viewWrapper.innerHTML,this.updateWrapperText(this.viewWrapper,e)):(e+=w===0?"":this.delimiterChar+" ",t=this.getOverflowVal(w),e+=t,t=this.viewWrapper.innerHTML,this.updateWrapperText(this.viewWrapper,e)),a=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10),h=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10),a+n+this.clearIconWidth>h){for(i!==void 0&&i!==""&&(t=i,w=s+1),this.updateWrapperText(this.viewWrapper,t),r=this.value.length-w,a=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10);a+b+n+this.clearIconWidth>h&&a!==0&&this.viewWrapper.innerHTML!=="";){var E=[];this.viewWrapper.innerHTML=E.join(this.delimiterChar),r=this.value.length,a=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10)}break}else a+b+n+this.clearIconWidth<=h?(i=e,s=w):w===0&&(i="",s=-1)}if(r>0){var N=h-n-this.clearIconWidth;this.viewWrapper.appendChild(this.updateRemainTemplate(v,this.viewWrapper,r,f,c,N)),this.updateRemainWidth(this.viewWrapper,N),this.updateRemainingText(v,n,r,f,c)}}else u(this.viewWrapper)||(this.viewWrapper.innerHTML="",this.viewWrapper.style.display="none")},l.prototype.checkClearIconWidth=function(){this.showClearButton&&(this.clearIconWidth=this.overAllClear.offsetWidth)},l.prototype.updateRemainWidth=function(e,t){e.classList.contains(ft)&&t<e.offsetWidth+parseInt(window.getComputedStyle(e).paddingLeft,10)+parseInt(window.getComputedStyle(e).paddingLeft,10)&&(e.style.width=t+"px")},l.prototype.updateRemainTemplate=function(e,t,i,s,a,r){t.firstChild&&t.firstChild.nodeType===3&&t.firstChild.nodeValue===""&&t.removeChild(t.firstChild),e.innerHTML="";var n=s.replace("${count}",i.toString()),h=a.replace("${count}",i.toString());return e.innerText=t.firstChild&&t.firstChild.nodeType===3?n:h,t.firstChild&&t.firstChild.nodeType===3?t.classList.remove(ft):(t.classList.add(ft),this.updateRemainWidth(t,r)),e},l.prototype.updateRemainingText=function(e,t,i,s,a){var r=this.componentWrapper.offsetWidth-parseInt(window.getComputedStyle(this.componentWrapper).paddingLeft,10)-parseInt(window.getComputedStyle(this.componentWrapper).paddingRight,10),n=this.viewWrapper.offsetWidth+parseInt(window.getComputedStyle(this.viewWrapper).paddingRight,10);if(n+t>=r&&n!==0&&this.viewWrapper.firstChild&&this.viewWrapper.firstChild.nodeType===3){for(;n+t>r&&n!==0&&this.viewWrapper.firstChild&&this.viewWrapper.firstChild.nodeType===3;){var h=this.viewWrapper.firstChild.nodeValue.split(this.delimiterChar);h.pop(),this.viewWrapper.firstChild.nodeValue=h.join(this.delimiterChar),this.viewWrapper.firstChild.nodeValue===""&&this.viewWrapper.removeChild(this.viewWrapper.firstChild),i++,n=this.viewWrapper.offsetWidth}var p=r-t;this.updateRemainTemplate(e,this.viewWrapper,i,s,a,p)}},l.prototype.getOverflowVal=function(e){var t;if(this.mainData&&this.mainData.length){var i=this.allowObjectBinding?O(this.fields.value?this.fields.value:"",this.value[e]):this.value[e];if(this.mode==="CheckBox"){var s=this.listData;this.listData=this.mainData,t=this.getTextByValue(i),this.listData=s}else t=this.getTextByValue(i)}else t=this.allowObjectBinding?O(this.fields.value?this.fields.value:"",this.value[e]):this.value[e];return t},l.prototype.unWireEvent=function(){if(u(this.componentWrapper)||y.remove(this.componentWrapper,"mousedown",this.wrapperClick),y.remove(window,"resize",this.windowResize),!u(this.inputElement)){y.remove(this.inputElement,"focus",this.focusInHandler),y.remove(this.inputElement,"keydown",this.onKeyDown),this.mode!=="CheckBox"&&y.remove(this.inputElement,"input",this.onInput),y.remove(this.inputElement,"keyup",this.keyUp);var e=k(this.inputElement,"form");e&&y.remove(e,"reset",this.resetValueHandler),y.remove(this.inputElement,"blur",this.onBlurHandler)}u(this.componentWrapper)||(y.remove(this.componentWrapper,"mouseover",this.mouseIn),y.remove(this.componentWrapper,"mouseout",this.mouseOut)),u(this.overAllClear)||y.remove(this.overAllClear,"mousedown",this.clearAll),u(this.inputElement)||y.remove(this.inputElement,"paste",this.pasteHandler)},l.prototype.selectAllItem=function(e,t,i){var s;if(u(this.list)||(s=this.list.querySelectorAll(e?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)')),this.value&&this.value.length&&t&&t.target&&k(t.target,".e-close-hooker")&&this.allowFiltering&&(s=this.mainList.querySelectorAll(e?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)')),this.enableGroupCheckBox&&this.mode==="CheckBox"&&!u(this.fields.groupBy)){var a=t?this.groupTemplate?k(t.target,".e-list-group-item"):t.target:null;if(a=t&&t.keyCode===32?i:a,a=a&&a.classList.contains("e-frame")?a.parentElement.parentElement:a,a&&a.classList.contains("e-list-group-item")){var r=a.nextElementSibling;if(u(r))return;for(;r.classList.contains("e-list-item");){if(e){if(!r.firstElementChild.lastElementChild.classList.contains("e-check")){var n=this.value&&this.value.length?this.value.length:0;r.classList.contains("e-active")&&(n-=1),n<this.maximumSelectionLength&&this.updateListSelection(r,t)}}else r.firstElementChild.lastElementChild.classList.contains("e-check")&&this.updateListSelection(r,t);if(r=r.nextElementSibling,r==null)break}if(a.classList.contains("e-list-group-item")){var h=this.list.getElementsByClassName("e-item-focus")[0];h&&h.classList.remove("e-item-focus"),e?a.classList.add("e-active"):a.classList.remove("e-active"),a.classList.add("e-item-focus"),this.updateAriaActiveDescendant()}this.textboxValueUpdate(),this.checkPlaceholderSize(),!this.changeOnBlur&&t&&this.updateValueState(t,this.value,this.tempValues)}else this.updateValue(t,s,e)}else this.updateValue(t,s,e);this.addValidInputClass()},l.prototype.updateValue=function(e,t,i){var s=this,a=t.length,r={event:e,items:i?t:[],itemData:i?this.listData:[],isInteracted:!!e,isChecked:i,preventSelectEvent:!1};if(this.trigger("beforeSelectAll",r),t&&t.length||this.enableVirtualization&&!i){var n=0,h=0;if(this.enableGroupCheckBox?h=i?this.maximumSelectionLength-(this.value?this.value.length:0):t.length:h=i?this.maximumSelectionLength-(this.value?this.value.length:0):this.maximumSelectionLength,r.preventSelectEvent){for(var w=0;w<t.length&&w<h;w++){this.removeHover();var x=t[w].getAttribute("data-value"),E=this.getFormattedValue(x);E=this.allowObjectBinding?this.getDataByValue(E):E;var N=this.mainList?this.mainList.querySelectorAll(i?'li.e-list-item:not([aria-selected="true"]):not(.e-reorder-hide)':'li.e-list-item[aria-selected="true"]:not(.e-reorder-hide)')[w]:null;i?(this.value=this.value?this.value:[],(!this.allowObjectBinding&&this.value.indexOf(E)<0||this.allowObjectBinding&&!this.isObjectInArray(E,this.value))&&this.setProperties({value:[].concat([],this.value,[E])},!0),this.removeFocus(),this.addListSelection(t[w],N),this.updateChipStatus(),this.checkMaxSelection()):this.removeAllItems(E,e,!1,t[w],N),this.enableGroupCheckBox&&this.findGroupStart(t[w])}if(!i){var R=this.value&&this.value.length?this.value.length:0;if(R<this.maximumSelectionLength){var F=this.list.querySelectorAll("li."+D.li+":not(.e-active)");C(F,"e-disable")}}var H={event:e,items:i?t:[],itemData:i?this.listData:[],isInteracted:!!e,isChecked:i};this.trigger("selectedAll",H)}else if(this.enableVirtualization){if(i){if(this.virtualSelectAll=!0,this.resetList(this.dataSource,this.fields,new J().skip(this.viewPortInfo.startIndex)),this.virtualSelectAllData instanceof Array){for(var p=0;p<this.virtualSelectAllData.length;p++)if(t[this.skeletonCount+p]){var o=this.allowObjectBinding?this.getDataByValue(t[this.skeletonCount+p].getAttribute("data-value")):this.getFormattedValue(t[this.skeletonCount+p].getAttribute("data-value"));if(!this.allowObjectBinding&&this.value&&this.value.indexOf(o)===1||this.allowObjectBinding&&this.indexOfObjectInArray(o,this.value)===1)continue;this.updateListSelection(t[this.skeletonCount+p],e,a-p)}else if(this.fields){var f=O(this.fields.value,this.virtualSelectAllData[p]);if(f=this.allowObjectBinding?this.getDataByValue(f):f,!this.allowObjectBinding&&this.value&&this.value.indexOf(f)===1||this.allowObjectBinding&&this.indexOfObjectInArray(f,this.value)===1)continue;this.value&&f!=null&&Array.isArray(this.value)&&(!this.allowObjectBinding&&this.value.indexOf(f)<0||this.allowObjectBinding&&!this.isObjectInArray(f,this.value))&&this.dispatchSelect(f,e,null,!1,a)}if(this.virtualSelectAllData&&this.value.length!=this.virtualSelectAllData.length&&this.virtualItemStartIndex!=0){if(this.virtualItemStartIndex>this.itemCount){for(var p=0;p<this.itemCount;p++)if(this.fields){var c=O(this.fields.value,this.virtualSelectAllData[p]);c=this.allowObjectBinding?this.getDataByValue(c):c,this.value&&c!=null&&Array.isArray(this.value)&&(!this.allowObjectBinding&&this.value.indexOf(c)<0||this.allowObjectBinding&&!this.isObjectInArray(c,this.value))&&this.setProperties({value:[].concat([],this.value,this.allowObjectBinding?[this.virtualSelectAllData[p]]:[c])},!0)}}}else for(var p=0;p<this.virtualItemStartIndex;p++)if(this.fields){var v=O(this.fields.value,this.virtualSelectAllData[p]);v=this.allowObjectBinding?this.getDataByValue(v):v,Array.isArray(this.value)&&(!this.allowObjectBinding&&this.value.indexOf(v)<0||this.allowObjectBinding&&!this.isObjectInArray(v,this.value))&&this.setProperties({value:[].concat([],this.value,this.allowObjectBinding?[this.virtualSelectAllData[p]]:[v])},!0)}}}else{for(;n<this.value.length&&n<=50&&n<h&&this.value.length>0;)this.removeValue(this.value[n],e,this.value.length-n),n++;a>50&&setTimeout(function(){for(;n<s.value.length&&n<h&&s.value.length>0;)s.removeValue(v[n],e,s.value.length-n),n++;s.updatedataValueItems(e),s.changeOnBlur||(s.updateValueState(e,s.value,s.tempValues),s.isSelectAll=s.isSelectAll?!s.isSelectAll:s.isSelectAll),s.updateHiddenElement()},0),this.value=[],this.virtualSelectAll=!1,this.renderItems(this.listData,this.fields)}var S=this.list.getElementsByClassName("e-virtual-ddl")[0];S&&(S.style=this.GetVirtualTrackHeight()),this.UpdateSkeleton();var b=this.list.getElementsByClassName("e-virtual-ddl-content")[0];b&&(b.style=this.getTransformValues())}else{for(;n<a&&n<=50&&n<h;)this.isSelectAllTarget=a===n+1,this.updateListSelection(t[n],e,a-n),this.enableGroupCheckBox&&this.findGroupStart(t[n]),n++;a>50&&setTimeout(function(){for(;n<a&&n<h;)s.isSelectAllTarget=a===n+1,s.updateListSelection(t[n],e,a-n),s.enableGroupCheckBox&&s.findGroupStart(t[n]),n++;if(s.updatedataValueItems(e),s.changeOnBlur||(s.updateValueState(e,s.value,s.tempValues),s.isSelectAll=s.isSelectAll?!s.isSelectAll:s.isSelectAll),s.updateHiddenElement(),s.popupWrapper&&t[n-1].classList.contains("e-item-focus")){var ae=document.getElementsByClassName("e-selectall-parent")[0];ae&&ae.classList.contains("e-item-focus")&&t[n-1].classList.remove("e-item-focus")}},0)}}this.updatedataValueItems(e),this.checkPlaceholderSize(),a<=50&&!r.preventSelectEvent&&(this.changeOnBlur||(this.updateValueState(e,this.value,this.tempValues),this.isSelectAll=this.isSelectAll?!this.isSelectAll:this.isSelectAll),this.updateHiddenElement())},l.prototype.updateHiddenElement=function(){var e=this,t="",i="",s="",a=[];this.mode==="CheckBox"&&(this.value.map(function(r,n){t+='<option selected value ="'+r+'">'+n+"</option>",e.listData?s=e.getTextByValue(r):s=r,i+=s+e.delimiterChar+" ",a.push(s)}),this.hiddenElement.innerHTML=t,this.updateWrapperText(this.delimiterWrapper,i),this.delimiterWrapper.setAttribute("id",de("delim_val")),this.inputElement.setAttribute("aria-describedby",this.delimiterWrapper.id),this.setProperties({text:a.toString()},!0),this.refreshInputHight(),this.refreshPlaceHolder())},l.prototype.updatedataValueItems=function(e){this.deselectHeader(),this.textboxValueUpdate(e)},l.prototype.textboxValueUpdate=function(e){var t=e&&e.target&&(k(e.target,".e-selectall-parent")||k(e.target,".e-close-hooker"));this.mode!=="Box"&&!this.isPopupOpen()&&!(this.mode==="CheckBox"&&(this.isSelectAll||t))?this.updateDelimView():this.searchWrapper.classList.remove(dt),this.mode==="CheckBox"?(this.updateDelimView(),!(t||this.isSelectAll)&&this.isSelectAllTarget&&this.updateDelimeter(this.delimiterChar,e),this.refreshInputHight()):this.updateDelimeter(this.delimiterChar,e),this.refreshPlaceHolder()},l.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},l.prototype.updateDataSource=function(e){u(this.list)?this.renderPopup():this.resetList(this.dataSource),this.value&&this.value.length&&(this.setProperties({value:this.value}),this.refreshSelection())},l.prototype.onLoadSelect=function(){this.setDynValue=!0,this.renderPopup()},l.prototype.selectAllItems=function(e,t){var i=this;if(u(this.list))this.selectAllAction=function(){if(i.mode==="CheckBox"&&i.showSelectAll){var a={module:"CheckBoxSelection",enable:i.mode==="CheckBox",value:e?"check":"uncheck"};i.notify("checkSelectAll",a)}i.selectAllItem(e,t),i.selectAllAction=null},d.prototype.render.call(this);else{if(this.selectAllAction=null,this.mode==="CheckBox"&&this.showSelectAll){var s={value:e?"check":"uncheck",enable:this.mode==="CheckBox",module:"CheckBoxSelection"};this.notify("checkSelectAll",s)}this.selectAllItem(e,t)}this.virtualSelectAll=!1},l.prototype.getPersistData=function(){return this.addOnPersist(["value"])},l.prototype.onPropertyChanged=function(e,t){(e.dataSource&&!u(Object.keys(e.dataSource))||e.query&&!u(Object.keys(e.query)))&&(this.resetFilteredData&&(this.resetMainList=this.resetMainList?this.resetMainList:this.mainList,this.resetFilteredData=!1),this.mainList=null,this.mainData=null,this.isFirstClick=!1,this.isDynamicDataChange=!0),this.getModuleName()==="multiselect"&&(this.filterAction=!1,this.setUpdateInitial(["fields","query","dataSource"],e));for(var i=0,s=Object.keys(e);i<s.length;i++){var a=s[i];switch(a){case"query":case"dataSource":this.mode==="CheckBox"&&this.showSelectAll&&(u(this.popupObj)||(this.popupObj.destroy(),this.popupObj=null),this.renderPopup());break;case"htmlAttributes":this.updateHTMLAttribute();break;case"showClearButton":this.updateClearButton(e.showClearButton);break;case"text":this.updateVal(this.value,this.value,"text");break;case"value":this.updateVal(this.value,t.value,"value"),this.addValidInputClass(),!this.closePopupOnSelect&&this.isPopupOpen()&&this.refreshPopup(),this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange;break;case"width":this.setWidth(e.width),this.popupObj.setProperties({width:this.calcPopupWidth()});break;case"placeholder":this.refreshPlaceHolder();break;case"filterBarPlaceholder":this.allowFiltering&&this.notify("filterBarPlaceholder",{filterBarPlaceholder:e.filterBarPlaceholder});break;case"delimiterChar":this.mode!=="Box"&&this.updateDelimView(),this.updateData(e.delimiterChar);break;case"cssClass":this.updateOldPropCssClass(t.cssClass),this.updateCssClass(),this.calculateWidth();break;case"enableRtl":this.enableRTL(e.enableRtl),d.prototype.onPropertyChanged.call(this,e,t);break;case"readonly":this.updateReadonly(e.readonly),this.hidePopup();break;case"enabled":this.hidePopup(),this.enable(e.enabled);break;case"showSelectAll":this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup();break;case"showDropDownIcon":this.dropDownIcon();break;case"floatLabelType":this.setFloatLabelType(),this.addValidInputClass(),V.createSpanElement(this.overAllWrapper,this.createElement),this.calculateWidth(),!u(this.overAllWrapper)&&!u(this.overAllWrapper.getElementsByClassName("e-ddl-icon")[0]&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0]&&this.floatLabelType!=="Never")&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon");break;case"enableSelectionOrder":break;case"selectAllText":this.notify("selectAllText",!1);break;case"popupHeight":if(this.popupObj){var r=parseInt(this.popupHeight,10);this.popupHeight!=="auto"?(this.list.style.maxHeight=$(r),this.popupWrapper.style.maxHeight=$(this.popupHeight)):this.list.style.maxHeight=$(this.popupHeight)}break;case"headerTemplate":case"footerTemplate":this.reInitializePoup();break;case"allowFiltering":this.mode==="CheckBox"&&this.popupObj&&this.reInitializePoup(),this.updateSelectElementData(this.allowFiltering);break;case"fields":u(this.fields.groupBy)&&this.removeScrollEvent();break;default:{var n=this.getPropObject(a,e,t);d.prototype.onPropertyChanged.call(this,n.newProperty,n.oldProperty)}break}}},l.prototype.reInitializePoup=function(){this.popupObj&&(this.popupObj.destroy(),this.popupObj=null),this.renderPopup()},l.prototype.totalItemsCount=function(){var e;this.dataSource instanceof j?e=this.virtualGroupDataSource&&this.virtualGroupDataSource.length?this.virtualGroupDataSource.length:0:e=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.mode==="CheckBox"?this.totalItemCount=e!=0?e:this.totalItemCount:this.totalItemCount=e!=0?e-this.value.length:this.totalItemCount},l.prototype.presentItemValue=function(e){for(var t=[],i=0;i<this.value.length;i++){var s=this.allowObjectBinding?O(this.fields.value?this.fields.value:"",this.value[i]):this.value[i],a=this.findListElement(this.allowFiltering&&!u(this.mainList)?this.mainList:e,"li","data-value",s);if(!a){var r=this.allowObjectBinding?this.getDataByValue(this.value[i]):this.value[i];t.push(r)}}return t},l.prototype.addNonPresentItems=function(e,t,i,s){var a=this;this.dataSource.executeQuery(this.getForQuery(e)).then(function(r){r.result.length>0&&a.addItem(r.result,i.length),a.updateActionList(t,i,s)})},l.prototype.updateVal=function(e,t,i){if(!this.list)this.onLoadSelect();else if(this.dataSource instanceof j&&(!this.listData||!(this.mainList&&this.mainData)))this.onLoadSelect();else{var s=[];if(!u(this.value)&&!this.allowCustomValue&&(s=this.presentItemValue(this.ulElement)),i=="value"&&s.length>0&&this.dataSource instanceof j&&!u(this.value)&&this.listData!=null)this.mainData=null,this.setDynValue=!0,this.addNonPresentItems(s,this.ulElement,this.listData);else{if(i==="text"&&(this.initialTextUpdate(),e=this.value),(u(this.value)||this.value.length===0)&&(this.tempValues=t),this.allowCustomValue&&(this.mode==="Default"||this.mode==="Box")&&this.isReact&&this.inputFocus&&this.isPopupOpen()&&this.mainData!==this.listData){var a=this.mainList.cloneNode?this.mainList.cloneNode(!0):this.mainList;this.onActionComplete(a,this.mainData)}this.initialValueUpdate(),this.mode!=="Box"&&!this.inputFocus&&this.updateDelimView(),this.inputFocus||this.refreshInputHight(),this.refreshPlaceHolder(),this.mode!=="CheckBox"&&this.changeOnBlur&&this.updateValueState(null,e,t),this.checkPlaceholderSize()}}this.changeOnBlur||this.updateValueState(null,e,t)},l.prototype.addItem=function(e,t){d.prototype.addItem.call(this,e,t)},l.prototype.hidePopup=function(e){var t=this,i=100;if(this.isPopupOpen()){var s={name:"FadeOut",duration:100,delay:i},a={popup:this.popupObj,cancel:!1,animation:s,event:e||null};this.trigger("close",a,function(r){if(!r.cancel){t.fields.groupBy&&t.mode!=="CheckBox"&&t.fixedHeaderElement&&(Se(t.fixedHeaderElement),t.fixedHeaderElement=null),t.beforePopupOpen=!1,t.overAllWrapper.classList.remove(Gi),t.popupObj.hide(new it(r.animation)),W(t.inputElement,{"aria-expanded":"false"}),t.inputElement.removeAttribute("aria-owns"),t.inputElement.removeAttribute("aria-activedescendant"),t.allowFiltering&&t.notify("inputFocus",{module:"CheckBoxSelection",enable:t.mode==="CheckBox",value:"clear"}),t.popupObj.hide(),C([document.body,t.popupObj.element],"e-popup-full-page"),y.remove(t.list,"keydown",t.onKeyDown),t.mode==="CheckBox"&&t.showSelectAll&&y.remove(t.popupObj.element,"click",t.clickHandler),t.enableVirtualization&&t.mode==="CheckBox"&&(t.viewPortInfo.startIndex=t.virtualItemStartIndex=0,t.viewPortInfo.endIndex=t.virtualItemEndIndex=t.viewPortInfo.startIndex>0?t.viewPortInfo.endIndex:t.itemCount,t.previousStartIndex=0,t.previousEndIndex=0);var n=void 0;t.dataSource instanceof j?n=t.virtualGroupDataSource&&t.virtualGroupDataSource.length?t.virtualGroupDataSource.length:0:n=t.dataSource&&t.dataSource.length?t.dataSource.length:0,t.enableVirtualization&&(t.allowFiltering||t.allowCustomValue)&&t.value!=null&&t.targetElement()&&t.totalItemCount!==n&&(t.updateInitialData(),t.checkAndResetCache()),t.virtualCustomData&&t.viewPortInfo&&t.viewPortInfo.startIndex===0&&t.viewPortInfo.endIndex===t.itemCount&&t.renderItems(t.mainData,t.fields),t.virtualCustomData=null,t.isVirtualTrackHeight=!1}})}},l.prototype.showPopup=function(e){var t=this;if(this.enabled){this.firstItem=this.dataSource&&this.dataSource.length>0?this.dataSource[0]:null;var i={cancel:!1};this.trigger("beforeOpen",i,function(s){if(!s.cancel){if(!t.ulElement){t.beforePopupOpen=!0,t.mode==="CheckBox"&&A.isDevice&&t.allowFiltering&&t.notify("popupFullScreen",{module:"CheckBoxSelection",enable:t.mode==="CheckBox"}),d.prototype.render.call(t,e);return}t.mode==="CheckBox"&&A.isDevice&&t.allowFiltering&&t.notify("popupFullScreen",{module:"CheckBoxSelection",enable:t.mode==="CheckBox"});var a=t.ulElement.querySelectorAll("li.e-list-item").length,r=t.ulElement.querySelectorAll("li."+D.li+"."+G).length;if(a>0&&a===r&&r===t.mainData.length&&!(t.targetElement()!==""&&t.allowCustomValue)){t.beforePopupOpen=!1;return}if(t.onPopupShown(e),t.enableVirtualization&&t.listData&&t.listData.length&&(!u(t.value)&&(t.getModuleName()==="dropdownlist"||t.getModuleName()==="combobox")&&t.removeHover(),t.beforePopupOpen||(t.hideSelectedItem&&t.value&&Array.isArray(t.value)&&t.value.length>0&&t.totalItemsCount(),!t.preventSetCurrentData&&!u(t.viewPortInfo.startIndex)&&!u(t.viewPortInfo.endIndex)&&t.notify("setCurrentViewDataAsync",{component:t.getModuleName(),module:"VirtualScroll"}))),t.enableVirtualization&&!t.allowFiltering&&t.selectedValueInfo!=null&&t.selectedValueInfo.startIndex>0&&t.value!=null&&t.notify("dataProcessAsync",{module:"VirtualScroll",isOpen:!0}),t.enableVirtualization)t.updatevirtualizationList();else if(t.value&&t.value.length){var n=void 0;t.getItems();for(var h=0,p=t.value;h<p.length;h++){var o=p[h],f=t.allowObjectBinding?O(t.fields.value?t.fields.value:"",o):o;n=t.getElementByValue(f),n&&t.addListSelection(n)}}t.preventSetCurrentData=!0}})}},l.prototype.selectAll=function(e){this.isSelectAll=!0,this.selectAllItems(e)},l.prototype.getModuleName=function(){return"multiselect"},l.prototype.clear=function(){var e=this;this.selectAll(!1),this.value&&this.value.length?setTimeout(function(){e.setProperties({value:null},!0)},0):this.setProperties({value:null},!0)},l.prototype.render=function(){u(this.value)||(this.value=this.value.slice()),this.setDynValue=this.initStatus=!1,this.isSelectAll=!1,this.selectAllEventEle=[],this.searchWrapper=this.createElement("span",{className:Al+" "+(this.mode==="Box"?Wl:"")}),this.viewWrapper=this.createElement("span",{className:El+" "+Ri,styles:"display:none;"}),this.overAllClear=this.createElement("span",{className:Fi,styles:"display:none;"}),this.componentWrapper=this.createElement("div",{className:Sl}),this.overAllWrapper=this.createElement("div",{className:kl}),this.mode==="CheckBox"&&g([this.overAllWrapper],"e-checkbox"),A.isDevice&&this.componentWrapper.classList.add(wl),this.setWidth(this.width),this.overAllWrapper.appendChild(this.componentWrapper),this.popupWrapper=this.createElement("div",{id:this.element.id+"_popup",className:Tl}),this.popupWrapper.setAttribute("aria-label",this.element.id),this.popupWrapper.setAttribute("role","dialog"),this.mode==="Delimiter"||this.mode==="CheckBox"?(this.delimiterWrapper=this.createElement("span",{className:Ri,styles:"display:none"}),this.componentWrapper.appendChild(this.delimiterWrapper)):(this.chipCollectionWrapper=this.createElement("span",{className:xl,styles:"display:none"}),this.mode==="Default"?this.chipCollectionWrapper.setAttribute("id",de("chip_default")):this.mode==="Box"&&this.chipCollectionWrapper.setAttribute("id",de("chip_box")),this.componentWrapper.appendChild(this.chipCollectionWrapper)),this.mode!=="Box"&&this.componentWrapper.appendChild(this.viewWrapper),this.componentWrapper.appendChild(this.searchWrapper),this.showClearButton&&!A.isDevice?this.componentWrapper.appendChild(this.overAllClear):this.componentWrapper.classList.add(jt),this.dropDownIcon(),this.inputElement=this.createElement("input",{className:Il,attrs:{spellcheck:"false",type:"text",autocomplete:"off",tabindex:"0",role:"combobox"}}),(this.mode==="Default"||this.mode==="Box")&&this.inputElement.setAttribute("aria-describedby",this.chipCollectionWrapper.id),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.tagName===this.getNgDirective()?(this.element.appendChild(this.overAllWrapper),this.searchWrapper.appendChild(this.inputElement)):(this.element.parentElement.insertBefore(this.overAllWrapper,this.element),this.searchWrapper.appendChild(this.inputElement),this.searchWrapper.appendChild(this.element),this.element.removeAttribute("tabindex")),this.floatLabelType!=="Never"?Mi(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder):this.floatLabelType==="Never"&&this.refreshPlaceHolder(),this.addValidInputClass(),this.element.style.opacity="";var e=this.element.getAttribute("id")?this.element.getAttribute("id"):de("ej2_dropdownlist");this.element.id=e,this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true",class:Ml,tabindex:"-1",multiple:""}}),this.componentWrapper.appendChild(this.hiddenElement),this.validationAttribute(this.element,this.hiddenElement),this.mode!=="CheckBox"&&this.hideOverAllClear(),!u(k(this.element,"fieldset"))&&k(this.element,"fieldset").disabled&&(this.enabled=!1),this.wireEvent(),this.enable(this.enabled),this.enableRTL(this.enableRtl),this.enableVirtualization&&this.updateVirtualizationProperties(this.itemCount,this.allowFiltering,this.mode==="CheckBox"),this.listItemHeight=this.getListHeight(),this.getSkeletonCount(),this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.viewPortInfo.startIndex>0?this.viewPortInfo.endIndex:this.itemCount,this.checkInitialValue(),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false"),V.createSpanElement(this.overAllWrapper,this.createElement),this.calculateWidth(),!u(this.overAllWrapper)&&!u(this.overAllWrapper.getElementsByClassName("e-ddl-icon")[0]&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0]&&this.floatLabelType!=="Never")&&this.overAllWrapper.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon"),this.renderComplete()},l.prototype.getListHeight=function(){var e=this.createElement("div",{className:"e-dropdownbase"}),t=this.createElement("li",{className:"e-list-item"}),i=$(this.popupHeight);e.style.height=parseInt(i,10).toString()+"px",e.appendChild(t),document.body.appendChild(e),this.virtualListHeight=e.getBoundingClientRect().height;var s=Math.ceil(t.getBoundingClientRect().height);return e.remove(),s},l.prototype.checkInitialValue=function(){var e=this,t=this.dataSource instanceof Array?this.dataSource.length>0:!u(this.dataSource);if(!(this.value&&this.value.length)&&u(this.text)&&!t&&this.element.tagName==="SELECT"&&this.element.options.length>0){for(var i=this.element.options,s=[],a="",r=0,n=i.length;r<n;r++){var h=i[r];if(!u(h.getAttribute("selected")))if(h.getAttribute("value")){var p=this.allowObjectBinding?this.getDataByValue(h.getAttribute("value")):h.getAttribute("value");s.push(p)}else a+=h.text+this.delimiterChar}s.length>0?this.setProperties({value:s},!0):a!==""&&this.setProperties({text:a},!0),(s.length>0||a!=="")&&(this.refreshInputHight(),this.refreshPlaceHolder())}if((this.value&&this.value.length||!u(this.text))&&(this.list||d.prototype.render.call(this)),!u(this.text)&&(u(this.value)||this.value.length===0)&&this.initialTextUpdate(),this.value&&this.value.length){var o;if(this.enableVirtualization){for(var f=this.fields.value?this.fields.value:"",c=void 0,v=0;v<this.value.length;v++){var p=this.allowObjectBinding?O(this.fields.value?this.fields.value:"",this.value[v]):this.value[v];v===0?c=new K(f,"equal",p):c=c.or(f,"equal",p)}this.dataSource instanceof j?this.dataSource.executeQuery(new J().where(c)).then(function(S){S.result.result.length>0&&(o=S.result.result)}):o=new j(this.dataSource).executeLocal(new J().where(c))}this.dataSource instanceof j?this.setInitialValue=function(){e.initStatus=!1,e.initialValueUpdate(o),e.initialUpdate(),e.setInitialValue=null,e.initStatus=!0}:(this.initialValueUpdate(o),this.initialUpdate()),this.updateTempValue()}else this.initialUpdate();this.initStatus=!0,this.checkAutoFocus(),u(this.text)||this.element.setAttribute("data-initial-value",this.text)},l.prototype.checkAutoFocus=function(){this.element.hasAttribute("autofocus")&&this.inputElement.focus()},l.prototype.updatevirtualizationList=function(){if(this.value&&this.value.length){var e=void 0;this.getItems();for(var t=0,i=this.value;t<i.length;t++){var s=i[t],a=this.allowObjectBinding?O(this.fields.value?this.fields.value:"",s):s;e=this.getElementByValue(a),e&&this.addListSelection(e)}if(this.enableVirtualization&&this.hideSelectedItem){var r=this.list.querySelectorAll("li."+D.li+":not(."+G+"):not(.e-reorder-hide):not(.e-virtual-list)");if(r.length){var n=this.virtualListHeight>0?Math.floor(this.virtualListHeight/this.listItemHeight):0;if(r.length<n+2){var h=this.getForQuery(this.value).clone();h=h.skip(this.viewPortInfo.startIndex),this.resetList(this.dataSource,this.fields,h)}}}}},l.prototype.setFloatLabelType=function(){gl(this.overAllWrapper,this.componentWrapper,this.searchWrapper,this.inputElement,this.value,this.floatLabelType,this.placeholder),this.floatLabelType!=="Never"&&Mi(this.overAllWrapper,this.searchWrapper,this.element,this.inputElement,this.value,this.floatLabelType,this.placeholder)},l.prototype.addValidInputClass=function(){u(this.overAllWrapper)||(!u(this.value)&&this.value.length||this.floatLabelType==="Always"?g([this.overAllWrapper],"e-valid-input"):C([this.overAllWrapper],"e-valid-input"))},l.prototype.dropDownIcon=function(){this.showDropDownIcon?(this.dropIcon=this.createElement("span",{className:zi}),this.componentWrapper.appendChild(this.dropIcon),g([this.componentWrapper],["e-down-icon"])):u(this.dropIcon)||(this.dropIcon.parentElement.removeChild(this.dropIcon),C([this.componentWrapper],["e-down-icon"]))},l.prototype.initialUpdate=function(){this.mode!=="Box"&&!(this.setDynValue&&this.mode==="Default"&&this.inputFocus)&&this.updateDelimView(),this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.itemCount,this.updateCssClass(),this.updateHTMLAttribute(),this.updateReadonly(this.readonly),this.refreshInputHight(),this.checkPlaceholderSize()},l.prototype.destroy=function(){this.isReact&&this.clearTemplate(),this.popupObj&&this.popupObj.hide(),this.notify(Vl,{}),this.unwireListEvents(),this.unWireEvent(),this.list=null,this.popupObj=null,this.mainList=null,this.mainData=null,this.filterParent=null,this.ulElement=null,this.mainListCollection=null,d.prototype.destroy.call(this);var e=["readonly","aria-disabled","placeholder"],t=e.length;if(!u(this.inputElement))for(;t>0;)this.inputElement.removeAttribute(e[t-1]),t--;u(this.element)||(this.element.removeAttribute("data-initial-value"),this.element.style.display="block"),this.overAllWrapper&&this.overAllWrapper.parentElement&&(this.overAllWrapper.parentElement.tagName===this.getNgDirective()?Se(this.overAllWrapper):(this.overAllWrapper.parentElement.insertBefore(this.element,this.overAllWrapper),Se(this.overAllWrapper))),this.componentWrapper=null,this.overAllClear=null,this.overAllWrapper=null,this.hiddenElement=null,this.searchWrapper=null,this.viewWrapper=null,this.chipCollectionWrapper=null,this.targetInputElement=null,this.popupWrapper=null,this.inputElement=null,this.delimiterWrapper=null,this.popupObj=null,this.popupWrapper=null,this.liCollections=null,this.header=null,this.mainList=null,this.mainListCollection=null,this.footer=null,this.selectAllEventEle=null},M([tt({text:null,value:null,iconCss:null,groupBy:null},Ws)],l.prototype,"fields",void 0),M([m(!1)],l.prototype,"enablePersistence",void 0),M([m(null)],l.prototype,"groupTemplate",void 0),M([m("No records found")],l.prototype,"noRecordsTemplate",void 0),M([m("Request failed")],l.prototype,"actionFailureTemplate",void 0),M([m("None")],l.prototype,"sortOrder",void 0),M([m(!0)],l.prototype,"enabled",void 0),M([m(!0)],l.prototype,"enableHtmlSanitizer",void 0),M([m(!1)],l.prototype,"enableVirtualization",void 0),M([m([])],l.prototype,"dataSource",void 0),M([m(null)],l.prototype,"query",void 0),M([m("StartsWith")],l.prototype,"filterType",void 0),M([m(1e3)],l.prototype,"zIndex",void 0),M([m(!1)],l.prototype,"ignoreAccent",void 0),M([m()],l.prototype,"locale",void 0),M([m(!1)],l.prototype,"enableGroupCheckBox",void 0),M([m(null)],l.prototype,"cssClass",void 0),M([m("100%")],l.prototype,"width",void 0),M([m("300px")],l.prototype,"popupHeight",void 0),M([m("100%")],l.prototype,"popupWidth",void 0),M([m(null)],l.prototype,"placeholder",void 0),M([m(null)],l.prototype,"filterBarPlaceholder",void 0),M([m({})],l.prototype,"htmlAttributes",void 0),M([m(null)],l.prototype,"valueTemplate",void 0),M([m(null)],l.prototype,"headerTemplate",void 0),M([m(null)],l.prototype,"footerTemplate",void 0),M([m(null)],l.prototype,"itemTemplate",void 0),M([m(null)],l.prototype,"allowFiltering",void 0),M([m(!0)],l.prototype,"changeOnBlur",void 0),M([m(!1)],l.prototype,"allowCustomValue",void 0),M([m(!0)],l.prototype,"showClearButton",void 0),M([m(1e3)],l.prototype,"maximumSelectionLength",void 0),M([m(!1)],l.prototype,"readonly",void 0),M([m(null)],l.prototype,"text",void 0),M([m(null)],l.prototype,"value",void 0),M([m(!1)],l.prototype,"allowObjectBinding",void 0),M([m(!0)],l.prototype,"hideSelectedItem",void 0),M([m(!0)],l.prototype,"closePopupOnSelect",void 0),M([m("Default")],l.prototype,"mode",void 0),M([m(",")],l.prototype,"delimiterChar",void 0),M([m(!0)],l.prototype,"ignoreCase",void 0),M([m(!1)],l.prototype,"showDropDownIcon",void 0),M([m("Never")],l.prototype,"floatLabelType",void 0),M([m(!1)],l.prototype,"showSelectAll",void 0),M([m("Select All")],l.prototype,"selectAllText",void 0),M([m("Unselect All")],l.prototype,"unSelectAllText",void 0),M([m(!0)],l.prototype,"enableSelectionOrder",void 0),M([m(!0)],l.prototype,"openOnClick",void 0),M([m(!1)],l.prototype,"addTagOnBlur",void 0),M([P()],l.prototype,"change",void 0),M([P()],l.prototype,"removing",void 0),M([P()],l.prototype,"removed",void 0),M([P()],l.prototype,"beforeSelectAll",void 0),M([P()],l.prototype,"selectedAll",void 0),M([P()],l.prototype,"beforeOpen",void 0),M([P()],l.prototype,"open",void 0),M([P()],l.prototype,"close",void 0),M([P()],l.prototype,"blur",void 0),M([P()],l.prototype,"focus",void 0),M([P()],l.prototype,"chipSelection",void 0),M([P()],l.prototype,"filtering",void 0),M([P()],l.prototype,"tagging",void 0),M([P()],l.prototype,"customValueSelection",void 0),l=M([we],l),l}(Ps),Fl="e-icons",mt="e-frame",Ae="e-check",_i="e-checkbox-wrapper",Je="e-stop",Rl="e-selectall-parent",Hl="e-input-group-icon e-back-icon e-icons",Yi="e-input-group-icon e-clear-icon e-icons",ql="e-input-filter",jl="e-filter-parent",zl="e-ddl-device-filter",Ut="e-clear-icon",Ki="e-popup-full-page",Gl="e-ddl-device",$i="e-input-focus",Ul=function(){function d(l){this.activeLi=[],this.activeEle=[],this.parent=l,this.removeEventListener(),this.addEventListener()}return d.prototype.getModuleName=function(){return"CheckBoxSelection"},d.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on("updatelist",this.listSelection,this),this.parent.on("listoption",this.listOption,this),this.parent.on("selectAll",this.setSelectAll,this),this.parent.on("checkSelectAll",this.checkSelectAll,this),this.parent.on("searchBox",this.setSearchBox,this),this.parent.on("blur",this.onBlurHandler,this),this.parent.on("targetElement",this.targetElement,this),this.parent.on("deviceSearchBox",this.setDeviceSearchBox,this),this.parent.on("inputFocus",this.getFocus,this),this.parent.on("reOrder",this.setReorder,this),this.parent.on("activeList",this.getActiveList,this),this.parent.on("selectAllText",this.setLocale,this),this.parent.on("filterBarPlaceholder",this.setPlaceholder,this),y.add(document,"mousedown",this.onDocumentClick,this),this.parent.on("addItem",this.checboxCreate,this),this.parent.on("popupFullScreen",this.setPopupFullScreen,this))},d.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off("updatelist",this.listSelection),this.parent.off("listoption",this.listOption),this.parent.off("selectAll",this.setSelectAll),this.parent.off("checkSelectAll",this.checkSelectAll),this.parent.off("searchBox",this.setSearchBox),this.parent.off("blur",this.onBlurHandler),this.parent.off("targetElement",this.targetElement),this.parent.off("deviceSearchBox",this.setDeviceSearchBox),this.parent.off("inputFocus",this.getFocus),this.parent.off("reOrder",this.setReorder),this.parent.off("activeList",this.getActiveList),this.parent.off("selectAllText",this.setLocale),this.parent.off("filterBarPlaceholder",this.setPlaceholder),this.parent.off("addItem",this.checboxCreate),this.parent.off("popupFullScreen",this.setPopupFullScreen))},d.prototype.listOption=function(l){var e=this;if(u(this.parent.listCurrentOptions.itemCreated))this.parent.listCurrentOptions.itemCreated=function(i){e.checboxCreate(i)};else{var t=this.parent.listCurrentOptions.itemCreated;this.parent.listCurrentOptions.itemCreated=function(i){e.checboxCreate(i),t.apply(e,[i])}}},d.prototype.setPlaceholder=function(l){V.setPlaceholder(l.filterBarPlaceholder,this.filterInput)},d.prototype.checboxCreate=function(l){var e;if(u(l.item)?e=l:e=l.item,this.parent.enableGroupCheckBox||e.className!=="e-list-group-item "&&e.className!=="e-list-group-item"){var t=us(this.parent.createElement,!0),i=X("div."+Fl,e);return e.insertBefore(t,e.childNodes[u(i)?0:1]),X("."+mt,t),this.parent.enableGroupCheckBox&&this.parent.popupWrapper.classList.add("e-multiselect-group"),e}else return e},d.prototype.setSelectAll=function(){this.parent.showSelectAll?(u(this.checkAllParent)&&(this.checkAllParent=this.parent.createElement("div",{className:Rl}),this.selectAllSpan=this.parent.createElement("span",{className:"e-all-text"}),this.selectAllSpan.textContent="",this.checkAllParent.appendChild(this.selectAllSpan),this.setLocale(),this.checboxCreate(this.checkAllParent),this.parent.headerTemplate&&(u(this.parent.filterParent)?Z([this.checkAllParent],this.parent.popupWrapper):Z([this.checkAllParent],this.parent.filterParent)),this.parent.headerTemplate||(u(this.parent.filterParent)?ge([this.checkAllParent],this.parent.popupWrapper):this.parent.filterParent.parentNode.insertBefore(this.checkAllParent,this.parent.filterParent.nextSibling)),y.add(this.checkAllParent,"mousedown",this.clickHandler,this)),this.parent.list.classList.contains("e-nodata")||this.parent.listData&&this.parent.listData.length<=1&&!this.parent.enableVirtualization&&!this.parent.isDynamicDataChange||this.parent.isDynamicDataChange&&this.parent.listData&&this.parent.listData.length<=1?this.checkAllParent.style.display="none":this.checkAllParent.style.display="block",this.parent.selectAllHeight=this.checkAllParent.getBoundingClientRect().height):u(this.checkAllParent)||(this.checkAllParent.parentElement.removeChild(this.checkAllParent),this.checkAllParent=null)},d.prototype.destroy=function(){this.removeEventListener(),y.remove(document,"mousedown",this.onDocumentClick),this.checkAllParent=null,this.clearIconElement=null,this.filterInput=null,this.filterInputObj=null,this.checkWrapper=null,this.selectAllSpan=null},d.prototype.listSelection=function(l){var e;if(!u(l.e))l.li.querySelector(".e-checkbox-wrapper .e-frame"),e=u(l.e.target)?l.li.querySelector(".e-checkbox-wrapper").childNodes[1]:l.e.target.classList.contains("e-frame")&&(!this.parent.showSelectAll||this.checkAllParent&&!this.checkAllParent.contains(l.e.target))?l.e.target:l.li.querySelector(".e-checkbox-wrapper").childNodes[1];else{var t=l.li.querySelector(".e-checkbox-wrapper");e=t?t.childNodes[1]:l.li.lastElementChild.childNodes[1]}if((this.parent.itemTemplate||this.parent.enableGroupCheckBox)&&(e=l.li.firstElementChild.childNodes[1]),u(e)||(this.checkWrapper=k(e,"."+_i)),!u(this.checkWrapper)){var i=X("."+mt,this.checkWrapper),s=!1;this.validateCheckNode(this.checkWrapper,i.classList.contains(Ae),l.li,l.e,s)}},d.prototype.validateCheckNode=function(l,e,t,i,s){this.changeState(l,e?"uncheck":"check",i,!0,s)},d.prototype.clickHandler=function(l){var e;l.currentTarget.classList.contains(this.checkAllParent.className)||l.currentTarget.classList.value===this.checkAllParent.className?e=l.currentTarget.firstElementChild.lastElementChild:e=l.currentTarget,this.checkWrapper=k(e,"."+_i);var t=!0;if(!u(this.checkWrapper)){var i=X("."+mt,this.checkWrapper);this.validateCheckNode(this.checkWrapper,i.classList.contains(Ae),null,l,t)}l.preventDefault()},d.prototype.changeState=function(l,e,t,i,s){var a=l.getElementsByClassName(mt)[0];e==="check"&&!a.classList.contains(Ae)?(a.classList.remove(Je),a.classList.add(Ae),s&&(this.parent.selectAllItems(!0,t),this.setLocale(!0))):e==="uncheck"&&(a.classList.contains(Ae)||a.classList.contains(Je))?(C([a],[Ae,Je]),s&&(this.parent.selectAllItems(!1,t),this.setLocale())):e==="indeterminate"&&!a.classList.contains(Je)&&(C([a],[Ae]),a.classList.add(Je),s&&(this.parent.selectAllItems(!1,t),this.setLocale()))},d.prototype.setSearchBox=function(l){if(u(this.parent.filterParent)){this.parent.filterParent=this.parent.createElement("span",{className:jl}),this.filterInput=this.parent.createElement("input",{attrs:{type:"text"},className:ql}),this.parent.element.parentNode.insertBefore(this.filterInput,this.parent.element);var e=!1;return A.isDevice&&(e=!0,this.parent.mobFilter=!1),this.filterInputObj=V.createInput({element:this.filterInput,buttons:e?[Hl,Yi]:[Yi],properties:{placeholder:this.parent.filterBarPlaceholder}},this.parent.createElement),u(this.parent.cssClass)||(this.parent.cssClass.split(" ").indexOf("e-outline")!==-1?g([this.filterInputObj.container],"e-outline"):this.parent.cssClass.split(" ").indexOf("e-filled")!==-1&&g([this.filterInputObj.container],"e-filled")),Z([this.filterInputObj.container],this.parent.filterParent),ge([this.parent.filterParent],l.popupElement),W(this.filterInput,{"aria-disabled":"false",role:"combobox",autocomplete:"off",autocapitalize:"off",spellcheck:"false","aria-label":"multiselect","aria-expanded":"true","aria-controls":l.popupElement.id}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+Ut),!A.isDevice&&this.clearIconElement&&(y.add(this.clearIconElement,"mousedown",this.clearText,this),this.clearIconElement.style.visibility="hidden"),y.add(this.filterInput,"input",this.parent.onInput,this.parent),y.add(this.filterInput,"keyup",this.parent.keyUp,this.parent),y.add(this.filterInput,"keydown",this.parent.onKeyDown,this.parent),y.add(this.filterInput,"blur",this.onBlurHandler,this),y.add(this.filterInput,"paste",this.parent.pasteHandler,this.parent),this.parent.searchBoxHeight=this.filterInputObj.container.parentElement.getBoundingClientRect().height,this.filterInputObj}},d.prototype.clickOnBackIcon=function(l){this.parent.hidePopup(),C([document.body,this.parent.popupObj.element],Ki),this.parent.inputElement.focus()},d.prototype.clearText=function(l){this.parent.targetInputElement.value="",this.parent.allowFiltering&&this.parent.targetInputElement.value===""&&this.parent.search(null),this.parent.refreshPopup(),this.parent.refreshListItems(null),this.clearIconElement.style.visibility="hidden",this.filterInput.focus(),this.setReorder(l),l.preventDefault()},d.prototype.setDeviceSearchBox=function(){this.parent.popupObj.element.classList.add(Gl),this.parent.popupObj.element.classList.add(zl),this.parent.popupObj.position={X:0,Y:0},this.parent.popupObj.dataBind(),this.setSearchBoxPosition(),this.backIconElement=this.filterInputObj.container.querySelector(".e-back-icon"),this.clearIconElement=this.filterInputObj.container.querySelector("."+Ut),this.clearIconElement.style.visibility="hidden",y.add(this.backIconElement,"click",this.clickOnBackIcon,this),y.add(this.clearIconElement,"click",this.clearText,this)},d.prototype.setSearchBoxPosition=function(){var l=this.filterInput.parentElement.getBoundingClientRect().height,e=0;this.checkAllParent&&(e=this.checkAllParent.getBoundingClientRect().height),this.parent.popupObj.element.style.maxHeight="100%",this.parent.popupObj.element.style.width="100%",this.parent.list.style.maxHeight=window.innerHeight-l-e+"px",this.parent.list.style.height=window.innerHeight-l-e+"px";var t=this.filterInput.parentElement.querySelector("."+Ut);I(this.filterInput),t.parentElement.insertBefore(this.filterInput,t)},d.prototype.setPopupFullScreen=function(){this.parent&&this.parent.popupObj&&(W(this.parent.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),g([document.body,this.parent.popupObj.element],Ki),this.parent.popupObj.element.style.maxHeight="100%",this.parent.popupObj.element.style.width="100%")},d.prototype.targetElement=function(){return u(this.clearIconElement)||(this.parent.targetInputElement=this.filterInput,this.clearIconElement.style.visibility=this.parent.targetInputElement.value===""?"hidden":"visible"),this.parent.targetInputElement.value},d.prototype.onBlurHandler=function(l){if(!this.parent.element.classList.contains("e-listbox")){var e=void 0;if(this.parent.keyAction)return;if(A.isIE&&(e=!u(l)&&l.target),A.isIE||(e=!u(l)&&l.relatedTarget),this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&this.parent.popupObj.element.contains(e)&&!A.isIE&&this.filterInput){this.filterInput.focus();return}if(this.parent.scrollFocusStatus&&this.filterInput){l.preventDefault(),this.filterInput.focus(),this.parent.scrollFocusStatus=!1;return}this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&!this.parent.popupObj.element.classList.contains("e-popup-close")&&(this.parent.inputFocus=!1,this.parent.updateValueState(l,this.parent.value,this.parent.tempValues),this.parent.dispatchEvent(this.parent.hiddenElement,"change")),this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&!this.parent.popupObj.element.classList.contains("e-popup-close")&&(this.parent.inputFocus=!1,this.parent.overAllWrapper.classList.remove($i),this.parent.trigger("blur"),this.parent.focused=!0),this.parent.popupObj&&document.body.contains(this.parent.popupObj.element)&&!this.parent.popupObj.element.classList.contains("e-popup-close")&&!A.isDevice&&this.parent.hidePopup()}},d.prototype.onDocumentClick=function(l){if(this.parent.getLocaleName()!=="listbox"){var e=l.target;!u(this.parent.popupObj)&&k(e,'[id="'+this.parent.popupObj.element.id+'"]')&&(this.filterInput&&this.filterInput.value!==""||l.preventDefault()),!(!u(this.parent.popupObj)&&k(e,'[id="'+this.parent.popupObj.element.id+'"]'))&&!u(this.parent.overAllWrapper)&&!this.parent.overAllWrapper.contains(l.target)?(this.parent.overAllWrapper.classList.contains(D.focus)||this.parent.isPopupOpen())&&(this.parent.inputFocus=!1,this.parent.scrollFocusStatus=!1,this.parent.hidePopup(),this.parent.onBlurHandler(l,!0),this.parent.focused=!0):this.parent.scrollFocusStatus=(A.isIE||A.info.name==="edge")&&document.activeElement===this.filterInput,!u(this.parent.overAllWrapper)&&!this.parent.overAllWrapper.contains(l.target)&&this.parent.overAllWrapper.classList.contains("e-input-focus")&&!this.parent.isPopupOpen()&&(A.isIE?this.parent.onBlurHandler():this.parent.onBlurHandler(l)),this.filterInput===e&&this.filterInput.focus()}},d.prototype.getFocus=function(l){if(this.parent.overAllWrapper.classList.remove($i),this.parent.keyAction&&l.value!=="clear"&&l.value!=="focus"){this.parent.keyAction=!1;return}l.value==="focus"&&(this.filterInput.focus(),this.parent.removeFocus(),y.remove(this.parent.list,"keydown",this.parent.onKeyDown)),l.value==="clear"&&(this.filterInput.value="",this.clearIconElement.style.visibility="hidden")},d.prototype.checkSelectAll=function(l){l.value==="check"&&(this.changeState(this.checkAllParent,l.value,null,null,!1),this.setLocale(!0)),l.value==="uncheck"&&(this.changeState(this.checkAllParent,l.value,null,null,!1),this.setLocale()),l.value==="indeterminate"&&(this.changeState(this.checkAllParent,l.value,null,null,!1),this.setLocale())},d.prototype.setLocale=function(l){if(this.parent.selectAllText!=="Select All"||this.parent.unSelectAllText!=="Unselect All"){var e=l?this.parent.unSelectAllText:this.parent.selectAllText;this.selectAllSpan.textContent="";for(var t=le(e),i=l?"unSelectAllText":"selectAllText",s=0,a=t({},this.parent,i,null,!this.parent.isStringTemplate);s<a.length;s++){var r=a[s];this.selectAllSpan.textContent=r.textContent}}else{var n={selectAllText:"Select All",unSelectAllText:"Unselect All"},h=new fe(this.parent.getLocaleName(),{},this.parent.locale);h.getConstant("selectAllText")===""&&(h=new fe("dropdowns",n,this.parent.locale)),this.selectAllSpan.textContent=l?h.getConstant("unSelectAllText"):h.getConstant("selectAllText")}},d.prototype.getActiveList=function(l){l.li.classList.contains("e-active")?this.activeLi.push(l.li.cloneNode(!0)):this.activeLi.splice(l.index,1)},d.prototype.setReorder=function(l){if(this.parent.enableSelectionOrder&&!u(this.parent.value)){var e=this.parent.ulElement.querySelectorAll("li.e-active").length,t=void 0,i=this.parent.createElement("ul",{className:"e-list-parent e-ul e-reorder"});if(e>0){var s=this.parent.ulElement.querySelectorAll("li.e-active");if(s.forEach(function(r){i.appendChild(r)}),t=this.parent.ulElement.querySelectorAll("li.e-active"),g(t,"e-reorder-hide"),this.parent.enableVirtualization){var a=this.parent.list.querySelector(".e-virtual-ddl-content");ge([i],a)}else ge([i],this.parent.list)}this.parent.focusAtFirstListItem()}},d}(),ms=globalThis&&globalThis.__extends||function(){var d=function(l,e){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},d(l,e)};return function(l,e){d(l,e);function t(){this.constructor=l}l.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),_=globalThis&&globalThis.__decorate||function(d,l,e,t){var i=arguments.length,s=i<3?l:t===null?t=Object.getOwnPropertyDescriptor(l,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(d,l,e,t);else for(var r=d.length-1;r>=0;r--)(a=d[r])&&(s=(i<3?a(s):i>3?a(l,e,s):a(l,e))||s);return i>3&&s&&Object.defineProperty(l,e,s),s},ce="e-other-month",_t="e-other-year",Ze="e-calendar",Xi="e-device",_l="e-header",Qi="e-rtl",Yl="e-content",et="e-calendar-content-table",Yt="e-year",Kt="e-month",Ji="e-decade",Zi="e-icons",Kl="e-prev",$l="e-next",Xl="e-date-icon-prev",Ql="e-date-icon-next ",Jl="e-icon-container",Y="e-disabled",ke="e-overlay",Zl="e-weekend",$t="e-week-number",te="e-selected",oe="e-focused-date",vt="e-focused-cell",gt="e-month-hide",es="e-today",ea="e-title",ts="e-day",is="e-cell",ta="e-week-header",yt="e-zoomin",ia="e-footer-container",sa="e-btn",la="e-flat",aa="e-css",ra="e-primary",ss="e-calendar-day-header-lg",Xt=864e5,na=6e4,oa=function(d){ms(l,d);function l(e,t){var i=d.call(this,e,t)||this;return i.effect="",i.isPopupClicked=!1,i.isDateSelected=!0,i.isTodayClicked=!1,i.preventChange=!1,i.isAngular=!1,i.previousDates=!1,i}return l.prototype.render=function(){this.rangeValidation(this.min,this.max),this.calendarEleCopy=this.element.cloneNode(!0),this.calendarMode==="Islamic"&&(+this.min.setSeconds(0)==+new Date(1900,0,1,0,0,0)&&(this.min=new Date(1944,2,18)),+this.max==+new Date(2099,11,31)&&(this.max=new Date(2069,10,16))),this.globalize=new ue(this.locale),(u(this.firstDayOfWeek)||this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:this.globalize.getFirstDayOfWeek()},!0),this.todayDisabled=!1,this.todayDate=new Date(new Date().setHours(0,0,0,0)),this.getModuleName()==="calendar"?(this.element.classList.add(Ze),this.enableRtl&&this.element.classList.add(Qi),A.isDevice&&this.element.classList.add(Xi),W(this.element,{"data-role":"calendar"}),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.setAttribute("tabindex",this.tabIndex)):(this.calendarElement=this.createElement("div"),this.calendarElement.classList.add(Ze),this.enableRtl&&this.calendarElement.classList.add(Qi),A.isDevice&&this.calendarElement.classList.add(Xi),W(this.calendarElement,{"data-role":"calendar"})),!u(k(this.element,"fieldset"))&&k(this.element,"fieldset").disabled&&(this.enabled=!1),this.createHeader(),this.createContent(),this.wireEvents()},l.prototype.rangeValidation=function(e,t){u(e)&&this.setProperties({min:new Date(1900,0,1)},!0),u(t)&&this.setProperties({max:new Date(2099,11,31)},!0)},l.prototype.getDefaultKeyConfig=function(){return this.defaultKeyConfigs={controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",altUpArrow:"alt+uparrow",spacebar:"space",altRightArrow:"alt+rightarrow",altLeftArrow:"alt+leftarrow"},this.defaultKeyConfigs},l.prototype.validateDate=function(e){this.setProperties({min:this.checkDateValue(new Date(this.checkValue(this.min)))},!0),this.setProperties({max:this.checkDateValue(new Date(this.checkValue(this.max)))},!0),this.currentDate=this.currentDate?this.currentDate:new Date(new Date().setHours(0,0,0,0)),!u(e)&&this.min<=this.max&&e>=this.min&&e<=this.max&&(this.currentDate=new Date(this.checkValue(e)))},l.prototype.setOverlayIndex=function(e,t,i,s){if(s&&!u(t)&&!u(i)&&!u(e)){var a=parseInt(t.style.zIndex,10)?parseInt(t.style.zIndex,10):1e3;i.style.zIndex=(a-1).toString(),e.style.zIndex=a.toString()}},l.prototype.minMaxUpdate=function(e){+this.min<=+this.max?C([this.element],ke):(this.setProperties({min:this.min},!0),g([this.element],ke)),this.min=u(this.min)||!+this.min?this.min=new Date(1900,0,1):this.min,this.max=u(this.max)||!+this.max?this.max=new Date(2099,11,31):this.max,+this.min<=+this.max&&e&&+e<=+this.max&&+e>=+this.min?this.currentDate=new Date(this.checkValue(e)):+this.min<=+this.max&&!e&&+this.currentDate>+this.max?this.currentDate=new Date(this.checkValue(this.max)):+this.currentDate<+this.min&&(this.currentDate=new Date(this.checkValue(this.min)))},l.prototype.createHeader=function(){var e={"aria-disabled":"false","aria-label":"previous month"},t={"aria-disabled":"false","aria-label":"next month"},i={"aria-atomic":"true","aria-live":"assertive","aria-label":"title"},s={tabindex:"0"};this.headerElement=this.createElement("div",{className:_l});var a=this.createElement("div",{className:Jl});this.previousIcon=this.createElement("button",{className:""+Kl,attrs:{type:"button"}}),He(this.previousIcon,{duration:400,selector:".e-prev",isCenterRipple:!0}),W(this.previousIcon,e),W(this.previousIcon,s),this.nextIcon=this.createElement("button",{className:""+$l,attrs:{type:"button"}}),He(this.nextIcon,{selector:".e-next",duration:400,isCenterRipple:!0}),this.getModuleName()==="daterangepicker"&&(W(this.previousIcon,{tabIndex:"-1"}),W(this.nextIcon,{tabIndex:"-1"})),W(this.nextIcon,t),W(this.nextIcon,s),this.headerTitleElement=this.createElement("div",{className:""+ts+" "+ea}),W(this.headerTitleElement,i),W(this.headerTitleElement,s),this.headerElement.appendChild(this.headerTitleElement),this.previousIcon.appendChild(this.createElement("span",{className:""+Xl+" "+Zi})),this.nextIcon.appendChild(this.createElement("span",{className:""+Ql+" "+Zi})),a.appendChild(this.previousIcon),a.appendChild(this.nextIcon),this.headerElement.appendChild(a),this.getModuleName()==="calendar"?this.element.appendChild(this.headerElement):this.calendarElement.appendChild(this.headerElement),this.adjustLongHeaderSize()},l.prototype.createContent=function(){this.contentElement=this.createElement("div",{className:Yl}),this.table=this.createElement("table",{attrs:{class:et,tabIndex:"0",role:"grid","aria-activedescendant":"","aria-labelledby":this.element.id}}),this.getModuleName()==="calendar"?this.element.appendChild(this.contentElement):this.calendarElement.appendChild(this.contentElement),this.contentElement.appendChild(this.table),this.createContentHeader(),this.createContentBody(),this.showTodayButton&&this.createContentFooter(),this.getModuleName()!="daterangepicker"&&(y.add(this.table,"focus",this.addContentFocus,this),y.add(this.table,"blur",this.removeContentFocus,this))},l.prototype.addContentFocus=function(e){var t=this.tableBodyElement.querySelector("tr td.e-focused-date"),i=this.tableBodyElement.querySelector("tr td.e-selected");u(i)?u(t)||t.classList.add(vt):i.classList.add(vt)},l.prototype.removeContentFocus=function(e){var t=this.tableBodyElement.querySelector("tr td.e-focused-date"),i=this.tableBodyElement.querySelector("tr td.e-selected");u(i)?u(t)||t.classList.remove(vt):i.classList.remove(vt)},l.prototype.getCultureValues=function(){var e=[],t,i="days.stand-alone."+this.dayHeaderFormat.toLowerCase();if(this.locale==="en"||this.locale==="en-US"?t=O(i,xs()):t=this.getCultureObjects(hs,""+this.locale),!u(t))for(var s=0,a=Object.keys(t);s<a.length;s++){var r=a[s];e.push(O(r,t))}return e},l.prototype.toCapitalize=function(e){return!u(e)&&e.length?e[0].toUpperCase()+e.slice(1):e},l.prototype.createContentHeader=function(){this.getModuleName()==="calendar"?u(this.element.querySelectorAll(".e-content .e-week-header")[0])||I(this.element.querySelectorAll(".e-content .e-week-header")[0]):u(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0])||I(this.calendarElement.querySelectorAll(".e-content .e-week-header")[0]);var e=6,t="";(this.firstDayOfWeek>6||this.firstDayOfWeek<0)&&this.setProperties({firstDayOfWeek:0},!0),this.tableHeadElement=this.createElement("thead",{className:ta}),this.weekNumber&&(t+='<th class="e-week-number" aria-hidden="true"></th>',this.getModuleName()==="calendar"?g([this.element],""+$t):g([this.calendarElement],""+$t));var i=this.getCultureValues().length>0&&this.getCultureValues()?this.shiftArray(this.getCultureValues().length>0&&this.getCultureValues(),this.firstDayOfWeek):null;if(!u(i))for(var s=0;s<=e;s++)t+='<th  class="">'+this.toCapitalize(i[s])+"</th>";t="<tr>"+t+"</tr>",this.tableHeadElement.innerHTML=t,this.table.appendChild(this.tableHeadElement)},l.prototype.createContentBody=function(){switch(this.getModuleName()==="calendar"?u(this.element.querySelectorAll(".e-content tbody")[0])||I(this.element.querySelectorAll(".e-content tbody")[0]):u(this.calendarElement.querySelectorAll(".e-content tbody")[0])||I(this.calendarElement.querySelectorAll(".e-content tbody")[0]),this.start){case"Year":this.renderYears();break;case"Decade":this.renderDecades();break;default:this.renderMonths()}},l.prototype.updateFooter=function(){this.todayElement.textContent=this.l10.getConstant("today"),this.todayElement.setAttribute("aria-label",this.l10.getConstant("today")),this.todayElement.setAttribute("tabindex","0")},l.prototype.createContentFooter=function(){if(this.showTodayButton){var e=new Date(+this.min),t=new Date(+this.max),i={today:"Today"};this.globalize=new ue(this.locale),this.l10=new fe(this.getModuleName(),i,this.locale),this.todayElement=this.createElement("button",{attrs:{role:"button"}}),He(this.todayElement),this.updateFooter(),g([this.todayElement],[sa,es,la,ra,aa]),(!(+new Date(e.setHours(0,0,0,0))<=+this.todayDate&&+this.todayDate<=+new Date(t.setHours(0,0,0,0)))||this.todayDisabled)&&g([this.todayElement],Y),this.footer=this.createElement("div",{className:ia}),this.footer.appendChild(this.todayElement),this.getModuleName()==="calendar"&&this.element.appendChild(this.footer),this.getModuleName()==="datepicker"&&this.calendarElement.appendChild(this.footer),this.getModuleName()==="datetimepicker"&&this.calendarElement.appendChild(this.footer),this.todayElement.classList.contains(Y)||y.add(this.todayElement,"click",this.todayButtonClick,this)}},l.prototype.wireEvents=function(e,t,i,s){y.add(this.headerTitleElement,"click",this.navigateTitle,this),this.defaultKeyConfigs=ie(this.defaultKeyConfigs,this.keyConfigs),this.getModuleName()==="calendar"?this.keyboardModule=new ye(this.element,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs}):this.keyboardModule=new ye(this.calendarElement,{eventName:"keydown",keyAction:this.keyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})},l.prototype.dateWireEvents=function(e,t,i,s){this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.defaultKeyConfigs=ie(this.defaultKeyConfigs,i),this.serverModuleName=s},l.prototype.todayButtonClick=function(e,t,i){this.showTodayButton&&(this.currentView()===this.depth?this.effect="":this.effect="e-zoomin",this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?this.navigateTo(this.depth,new Date(this.checkValue(t)),i):this.navigateTo("Month",new Date(this.checkValue(t)),i))},l.prototype.resetCalendar=function(){this.calendarElement&&I(this.calendarElement),this.tableBodyElement&&I(this.tableBodyElement),this.table&&I(this.table),this.tableHeadElement&&I(this.tableHeadElement),this.nextIcon&&I(this.nextIcon),this.previousIcon&&I(this.previousIcon),this.footer&&I(this.footer),this.todayElement=null,this.renderDayCellArgs=null,this.calendarElement=this.tableBodyElement=this.footer=this.tableHeadElement=this.nextIcon=this.previousIcon=this.table=null},l.prototype.keyActionHandle=function(e,t,i){var s=this.tableBodyElement.querySelector("tr td.e-focused-date"),a;i?!u(s)&&+t===parseInt(s.getAttribute("id").split("_")[0],10)?a=s:a=this.tableBodyElement.querySelector("tr td.e-selected"):a=this.tableBodyElement.querySelector("tr td.e-selected");var r=this.getViewNumber(this.currentView()),n=this.getViewNumber(this.depth),h=r===n&&this.getViewNumber(this.start)>=n;switch(this.effect="",e.action){case"moveLeft":this.getModuleName()!="daterangepicker"&&!u(e.target)&&e.target.classList.length>0&&e.target.classList.contains(et)&&(this.keyboardNavigate(-1,r,e,this.max,this.min),e.preventDefault());break;case"moveRight":this.getModuleName()!="daterangepicker"&&!u(e.target)&&e.target.classList.length>0&&e.target.classList.contains(et)&&(this.keyboardNavigate(1,r,e,this.max,this.min),e.preventDefault());break;case"moveUp":this.getModuleName()!="daterangepicker"&&!u(e.target)&&e.target.classList.length>0&&e.target.classList.contains(et)&&(r===0?this.keyboardNavigate(-7,r,e,this.max,this.min):this.keyboardNavigate(-4,r,e,this.max,this.min),e.preventDefault());break;case"moveDown":this.getModuleName()!="daterangepicker"&&!u(e.target)&&e.target.classList.length>0&&e.target.classList.contains(et)&&(r===0?this.keyboardNavigate(7,r,e,this.max,this.min):this.keyboardNavigate(4,r,e,this.max,this.min),e.preventDefault());break;case"select":if(e.target===this.headerTitleElement)this.navigateTitle(e);else if(e.target===this.previousIcon)this.navigatePrevious(e);else if(e.target===this.nextIcon)this.navigateNext(e);else if(e.target===this.todayElement)this.todayButtonClick(e,t),(this.getModuleName()==="datepicker"||this.getModuleName()==="datetimepicker")&&this.element.focus();else{var p=u(s)?a:s;if(!u(p)&&!p.classList.contains(Y)){if(h){var o=new Date(parseInt(""+p.id,0));this.selectDate(e,o,p)}else this.contentClick(null,--r,p,t);(this.getModuleName()==="datepicker"||this.getModuleName()==="datetimepicker")&&this.element.focus()}}break;case"controlUp":this.title(),e.preventDefault();break;case"controlDown":(!u(s)&&!h||!u(a)&&!h)&&this.contentClick(null,--r,s||a,t),e.preventDefault();break;case"home":this.currentDate=this.firstDay(this.currentDate),I(this.tableBodyElement),r===0?this.renderMonths(e):r===1?this.renderYears(e):this.renderDecades(e),e.preventDefault();break;case"end":this.currentDate=this.lastDay(this.currentDate,r),I(this.tableBodyElement),r===0?this.renderMonths(e):r===1?this.renderYears(e):this.renderDecades(e),e.preventDefault();break;case"pageUp":this.addMonths(this.currentDate,-1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"pageDown":this.addMonths(this.currentDate,1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"shiftPageUp":this.addYears(this.currentDate,-1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"shiftPageDown":this.addYears(this.currentDate,1),this.navigateTo("Month",this.currentDate),e.preventDefault();break;case"controlHome":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),0,1)),e.preventDefault();break;case"controlEnd":this.navigateTo("Month",new Date(this.currentDate.getFullYear(),11,31)),e.preventDefault();break;case"tab":(this.getModuleName()==="datepicker"||this.getModuleName()==="datetimepicker")&&e.target===this.todayElement&&(e.preventDefault(),this.element.focus(),this.hide());break;case"shiftTab":(this.getModuleName()==="datepicker"||this.getModuleName()==="datetimepicker")&&e.target===this.headerTitleElement&&(e.preventDefault(),this.element.focus(),this.hide());break}},l.prototype.keyboardNavigate=function(e,t,i,s,a){var r=new Date(this.checkValue(this.currentDate));switch(t){case 2:this.addYears(this.currentDate,e),this.isMonthYearRange(this.currentDate)?(I(this.tableBodyElement),this.renderDecades(i)):this.currentDate=r;break;case 1:this.addMonths(this.currentDate,e),this.calendarMode==="Gregorian"?this.isMonthYearRange(this.currentDate)?(I(this.tableBodyElement),this.renderYears(i)):this.currentDate=r:this.isMonthYearRange(this.currentDate)?(I(this.tableBodyElement),this.renderYears(i)):this.currentDate=r;break;case 0:this.addDay(this.currentDate,e,i,s,a),this.isMinMaxRange(this.currentDate)?(I(this.tableBodyElement),this.renderMonths(i)):this.currentDate=r;break}},l.prototype.preRender=function(e){var t=this;this.navigatePreviousHandler=this.navigatePrevious.bind(this),this.navigateNextHandler=this.navigateNext.bind(this),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.navigateHandler=function(i){t.triggerNavigate(i)}},l.prototype.minMaxDate=function(e){var t=new Date(new Date(+e).setHours(0,0,0,0)),i=new Date(new Date(+this.min).setHours(0,0,0,0)),s=new Date(new Date(+this.max).setHours(0,0,0,0));return(+t==+i||+t==+s)&&(+e<+this.min&&(e=new Date(+this.min)),+e>+this.max&&(e=new Date(+this.max))),e},l.prototype.renderMonths=function(e,t,i){var s=this.weekNumber?8:7,a;this.calendarMode==="Gregorian"?a=this.renderDays(this.currentDate,t,null,null,i,e):a=this.islamicModule.islamicRenderDays(this.currentDate,t),this.createContentHeader(),this.calendarMode==="Gregorian"?this.renderTemplate(a,s,Kt,e,t):this.islamicModule.islamicRenderTemplate(a,s,Kt,e,t)},l.prototype.renderDays=function(e,t,i,s,a,r){var n=[],h=42,p=a?new Date(+e):this.getDate(new Date,this.timezone),o=new Date(this.checkValue(e)),f,c=o.getMonth();this.titleUpdate(e,"days");var v=o;for(o=new Date(v.getFullYear(),v.getMonth(),0,v.getHours(),v.getMinutes(),v.getSeconds(),v.getMilliseconds());o.getDay()!==this.firstDayOfWeek;)this.setStartDate(o,-1*Xt);for(var S=0;S<h;++S){var b=this.createElement("td",{className:is}),w=this.createElement("span");if(S%7===0&&this.weekNumber){var x=this.weekRule==="FirstDay"?6:this.weekRule==="FirstFourDayWeek"?3:0,E=new Date(o.getFullYear(),o.getMonth(),o.getDate()+x);w.textContent=""+this.getWeek(E),b.appendChild(w),g([b],""+$t),n.push(b)}f=new Date(+o),o=this.minMaxDate(o);var N={type:"dateTime",skeleton:"full"},R=this.globalize.parseDate(this.globalize.formatDate(o,N),N),F=this.dayCell(o),H=this.globalize.formatDate(o,{type:"date",skeleton:"full"}),ae=this.createElement("span");ae.textContent=this.globalize.formatDate(o,{format:"d",type:"date",skeleton:"yMd"});var ze=this.min>o||this.max<o;ze?(g([F],Y),g([F],ke)):ae.setAttribute("title",""+H),c!==o.getMonth()&&(g([F],ce),ae.setAttribute("aria-disabled","true")),(o.getDay()===0||o.getDay()===6)&&g([F],Zl),F.appendChild(ae),this.renderDayCellArgs={date:o,isDisabled:!1,element:F,isOutOfRange:ze};var se=this.renderDayCellArgs;if(this.renderDayCellEvent(se),se.isDisabled){var Ge=new Date(this.checkValue(t)),Ue=new Date(this.checkValue(se.date));if(i){if(!u(s)&&s.length>0)for(var re=0;re<s.length;re++){var _e=+new Date(this.globalize.formatDate(se.date,{type:"date",skeleton:"yMd"})),Le=+new Date(this.globalize.formatDate(s[re],{type:"date",skeleton:"yMd"}));_e===Le&&(s.splice(re,1),re=-1)}}else Ge&&+Ge==+Ue&&this.setProperties({value:null},!0)}this.renderDayCellArgs.isDisabled&&!F.classList.contains(te)&&(g([F],Y),g([F],ke),ae.setAttribute("aria-disabled","true"),+this.renderDayCellArgs.date==+this.todayDate&&(this.todayDisabled=!0));var Ye=F.classList.contains(ce),be=F.classList.contains(Y);be||y.add(F,"click",this.clickHandler,this);var me=void 0;if(!u(r)&&r.type==="click"&&(me=r.currentTarget),i&&!u(s)&&!be){for(var Be=0;Be<s.length;Be++){var xt=this.calendarMode==="Gregorian"?"gregorian":"islamic",rt={format:null,type:"date",skeleton:"short",calendar:xt},_e=this.globalize.formatDate(o,rt),Le=this.globalize.formatDate(s[Be],rt);if((_e===Le&&this.getDateVal(o,s[Be])||this.getDateVal(o,t))&&g([F],te),!u(me)&&me.innerText===F.innerText&&this.previousDates&&F.classList.contains(te)&&me.classList.contains(te)){C([F],te),this.previousDates=!1;for(var Ne=this.copyValues(s),nt=0;nt<Ne.length;nt++){var Cs=this.calendarMode==="Gregorian"?"gregorian":"islamic",ni={format:null,type:"date",skeleton:"short",calendar:Cs},ks=this.globalize.formatDate(R,ni),Ss=this.globalize.formatDate(Ne[nt],ni);if(ks===Ss){var re=Ne.indexOf(Ne[nt]);Ne.splice(re,1),s.splice(re,1)}}this.setProperties({values:Ne},!0)}else this.updateFocus(Ye,be,o,F,e)}s.length<=0&&this.updateFocus(Ye,be,o,F,e)}else!be&&this.getDateVal(o,t)&&g([F],te);this.updateFocus(Ye,be,o,F,e),!u(R)&&R.getFullYear()===p.getFullYear()&&R.getMonth()===p.getMonth()&&R.getDate()===p.getDate()&&g([F],es),n.push(this.renderDayCellArgs.element),o=new Date(+f),this.addDay(o,1,null,this.max,this.min)}return n},l.prototype.updateFocus=function(e,t,i,s,a){a.getDate()===i.getDate()&&!e&&!t?g([s],oe):(a>=this.max&&parseInt(s.id,0)===+this.max&&!e&&!t&&g([s],oe),a<=this.min&&parseInt(s.id,0)===+this.min&&!e&&!t&&g([s],oe))},l.prototype.renderYears=function(e,t){this.removeTableHeadElement();var i=4,s=[],a=u(t),r=new Date(this.checkValue(this.currentDate)),n=r.getMonth(),h=r.getFullYear(),p=r,o=p.getFullYear(),f=new Date(this.checkValue(this.min)).getFullYear(),c=new Date(this.checkValue(this.min)).getMonth(),v=new Date(this.checkValue(this.max)).getFullYear(),S=new Date(this.checkValue(this.max)).getMonth();p.setMonth(0),this.titleUpdate(this.currentDate,"months"),p.setDate(1);for(var b=0;b<12;++b){var w=this.dayCell(p),x=this.createElement("span"),E=t&&t.getMonth()===p.getMonth(),N=t&&t.getFullYear()===h&&E,R=this.globalize.formatDate(p,{type:"date",format:"MMM y"});x.textContent=this.toCapitalize(this.globalize.formatDate(p,{format:null,type:"dateTime",skeleton:"MMM"})),this.min&&(o<f||b<c&&o===f)||this.max&&(o>v||b>S&&o>=v)?g([w],Y):!a&&N?g([w],te):p.getMonth()===n&&this.currentDate.getMonth()===n&&g([w],oe),p.setDate(1),p.setMonth(p.getMonth()+1),w.classList.contains(Y)||(y.add(w,"click",this.clickHandler,this),x.setAttribute("title",""+R)),w.appendChild(x),s.push(w)}this.renderTemplate(s,i,Yt,e,t)},l.prototype.renderDecades=function(e,t){this.removeTableHeadElement();var i=4,s=12,a=[],r=new Date(this.checkValue(this.currentDate));r.setMonth(0),r.setDate(1);var n=r.getFullYear(),h=new Date(r.setFullYear(n-n%10)),p=new Date(r.setFullYear(n-n%10+(10-1))),o=h.getFullYear(),f=p.getFullYear(),c=this.globalize.formatDate(h,{format:null,type:"dateTime",skeleton:"y"}),v=this.globalize.formatDate(p,{format:null,type:"dateTime",skeleton:"y"});this.headerTitleElement.textContent=c+" - "+v;for(var S=new Date(n-n%10-1,0,1),b=S.getFullYear(),w=0;w<s;++w){var x=b+w;r.setFullYear(x);var E=this.dayCell(r),N=this.createElement("span");N.textContent=this.globalize.formatDate(r,{format:null,type:"dateTime",skeleton:"y"}),x<o||x>f?(g([E],_t),N.setAttribute("aria-disabled","true"),!u(t)&&r.getFullYear()===t.getFullYear()&&g([E],te),(x<new Date(this.checkValue(this.min)).getFullYear()||x>new Date(this.checkValue(this.max)).getFullYear())&&g([E],Y)):x<new Date(this.checkValue(this.min)).getFullYear()||x>new Date(this.checkValue(this.max)).getFullYear()?g([E],Y):!u(t)&&r.getFullYear()===t.getFullYear()?g([E],te):r.getFullYear()===this.currentDate.getFullYear()&&!E.classList.contains(Y)&&g([E],oe),E.classList.contains(Y)||(y.add(E,"click",this.clickHandler,this),N.setAttribute("title",""+N.textContent)),E.appendChild(N),a.push(E)}this.renderTemplate(a,i,"e-decade",e,t)},l.prototype.dayCell=function(e){var t=this.calendarMode==="Gregorian"?"gregorian":"islamic",i={skeleton:"full",type:"dateTime",calendar:t},s=this.globalize.parseDate(this.globalize.formatDate(e,i),i),a;u(s)||(a=s.valueOf());var r={className:is,attrs:{id:""+de(""+a),"aria-selected":"false"}};return this.createElement("td",r)},l.prototype.firstDay=function(e){var t=this.currentView()!=="Decade"?this.tableBodyElement.querySelectorAll("td:not(."+ce):this.tableBodyElement.querySelectorAll("td:not(."+_t);if(t.length){for(var i=0;i<t.length;i++)if(!t[i].classList.contains(Y)){e=new Date(parseInt(t[i].id,0));break}}return e},l.prototype.lastDay=function(e,t){var i=new Date(e.getFullYear(),e.getMonth()+1,0);if(t!==2){var s=Math.abs(i.getTimezoneOffset()-this.firstDay(e).getTimezoneOffset());return s&&i.setHours(this.firstDay(e).getHours()+s/60),this.findLastDay(i)}else return this.findLastDay(this.firstDay(i))},l.prototype.checkDateValue=function(e){return!u(e)&&e instanceof Date&&!isNaN(+e)?e:null},l.prototype.findLastDay=function(e){var t=this.currentView()==="Decade"?this.tableBodyElement.querySelectorAll("td:not(."+_t):this.tableBodyElement.querySelectorAll("td:not(."+ce);if(t.length){for(var i=t.length-1;i>=0;i--)if(!t[i].classList.contains(Y)){e=new Date(parseInt(t[i].id,0));break}}return e},l.prototype.removeTableHeadElement=function(){this.getModuleName()==="calendar"?u(this.element.querySelectorAll(".e-content table thead")[0])||I(this.tableHeadElement):u(this.calendarElement.querySelectorAll(".e-content table thead")[0])||I(this.tableHeadElement)},l.prototype.renderTemplate=function(e,t,i,s,a){var r=this.getViewNumber(this.currentView()),n;this.tableBodyElement=this.createElement("tbody"),this.table.appendChild(this.tableBodyElement),C([this.contentElement,this.headerElement],[Kt,Ji,Yt]),g([this.contentElement,this.headerElement],[i]);for(var h=41,p=35,o=6,f=t,c=0,v=0;v<e.length/t;++v){for(n=this.createElement("tr"),c=0+c;c<f;c++)!e[c].classList.contains("e-week-number")&&!u(e[c].children[0])&&(g([e[c].children[0]],[ts]),He(e[c].children[0],{duration:600,isCenterRipple:!0})),n.appendChild(e[c]),this.weekNumber&&c===o+1&&e[o+1].classList.contains(ce)&&g([n],gt),!this.weekNumber&&c===o&&e[o].classList.contains(ce)&&g([n],gt),this.weekNumber?c===h&&e[h].classList.contains(ce)&&g([n],gt):c===p&&e[p].classList.contains(ce)&&g([n],gt);f=f+t,c=c+0,this.tableBodyElement.appendChild(n)}this.table.querySelector("tbody").className=this.effect,this.calendarMode==="Gregorian"?this.iconHandler():this.islamicModule.islamicIconHandler(),(r!==this.getViewNumber(this.currentView())||r===0&&r!==this.getViewNumber(this.currentView()))&&this.navigateHandler(s),this.setAriaActiveDescendant()},l.prototype.clickHandler=function(e,t){this.clickEventEmitter(e);var i=e.currentTarget,s=this.getViewNumber(this.currentView());i.classList.contains(ce)?this.contentClick(e,0,null,t):s===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?this.contentClick(e,1,null,t):s===2?this.contentClick(e,1,null,t):!i.classList.contains(ce)&&s===0?this.selectDate(e,this.getIdValue(e,null),null):this.contentClick(e,0,i,t),this.getModuleName()==="calendar"&&this.table.focus()},l.prototype.clickEventEmitter=function(e){e.preventDefault()},l.prototype.contentClick=function(e,t,i,s){var a=this.getViewNumber(this.currentView()),r=this.getIdValue(e,i);switch(t){case 0:a===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth)?(I(this.tableBodyElement),this.currentDate=r,this.effect=yt,this.renderMonths(e)):(this.calendarMode==="Gregorian"?(this.currentDate.setMonth(r.getMonth()),r.getMonth()>0&&this.currentDate.getMonth()!==r.getMonth()&&this.currentDate.setDate(0),this.currentDate.setFullYear(r.getFullYear())):this.currentDate=r,this.effect=yt,I(this.tableBodyElement),this.renderMonths(e));break;case 1:if(a===this.getViewNumber(this.depth)&&this.getViewNumber(this.start)>=this.getViewNumber(this.depth))this.selectDate(e,r,null);else{if(this.calendarMode==="Gregorian")this.currentDate.setFullYear(r.getFullYear());else{this.islamicPreviousHeader=this.headerElement.textContent;var n=this.islamicModule.getIslamicDate(r);this.currentDate=this.islamicModule.toGregorian(n.year,n.month,1)}this.effect=yt,I(this.tableBodyElement),this.renderYears(e)}}},l.prototype.switchView=function(e,t,i,s){switch(e){case 0:I(this.tableBodyElement),this.renderMonths(t,null,s);break;case 1:I(this.tableBodyElement),this.renderYears(t);break;case 2:I(this.tableBodyElement),this.renderDecades(t)}},l.prototype.getModuleName=function(){return"calendar"},l.prototype.requiredModules=function(){var e=[];return this.calendarMode==="Islamic"&&e.push({args:[this],member:"islamic",name:"Islamic"}),e},l.prototype.getPersistData=function(){var e=["value"];return this.addOnPersist(e)},l.prototype.onPropertyChanged=function(e,t,i,s){this.effect="";for(var a=0,r=Object.keys(e);a<r.length;a++){var n=r[a];switch(n){case"enableRtl":e.enableRtl?this.getModuleName()==="calendar"?this.element.classList.add("e-rtl"):this.calendarElement.classList.add("e-rtl"):this.getModuleName()==="calendar"?this.element.classList.remove("e-rtl"):this.calendarElement.classList.remove("e-rtl");break;case"dayHeaderFormat":this.getCultureValues(),this.getModuleName()!=="datepicker"?this.createContentHeader():this.calendarElement&&this.createContentHeader(),this.adjustLongHeaderSize();break;case"min":case"max":this.rangeValidation(this.min,this.max),n==="min"?this.setProperties({min:this.checkDateValue(new Date(this.checkValue(e.min)))},!0):this.setProperties({max:this.checkDateValue(new Date(this.checkValue(e.max)))},!0),this.setProperties({start:this.currentView()},!0),this.tableBodyElement&&I(this.tableBodyElement),this.minMaxUpdate(),i&&this.validateValues(i,s),this.getModuleName()!=="datepicker"?this.createContentBody():this.calendarElement&&this.createContentBody(),(this.todayDate<this.min||this.max<this.todayDate)&&this.footer&&this.todayElement?(I(this.todayElement),I(this.footer),this.todayElement=this.footer=null,this.createContentFooter()):this.footer&&this.todayElement&&this.todayElement.classList.contains("e-disabled")&&(C([this.todayElement],Y),I(this.todayElement),I(this.footer),this.todayElement=this.footer=null,this.createContentFooter());break;case"start":case"depth":case"weekNumber":case"firstDayOfWeek":case"weekRule":this.checkView(),this.getModuleName()!=="datepicker"?(this.createContentHeader(),this.createContentBody()):this.calendarElement&&(this.createContentHeader(),this.createContentBody());break;case"locale":if(this.globalize=new ue(this.locale),this.getModuleName()!=="datepicker"?(this.createContentHeader(),this.createContentBody()):this.calendarElement&&(this.createContentHeader(),this.createContentBody()),this.getModuleName()==="calendar"){var h={today:"Today"};this.l10=new fe(this.getModuleName(),h,this.locale)}this.l10.setLocale(this.locale),this.showTodayButton&&this.updateFooter();break;case"showTodayButton":e.showTodayButton?this.createContentFooter():!u(this.todayElement)&&!u(this.footer)&&(I(this.todayElement),I(this.footer),this.todayElement=this.footer=void 0),this.setProperties({showTodayButton:e.showTodayButton},!0);break}}},l.prototype.validateValues=function(e,t){if(e&&!u(t)&&t.length>0){for(var i=this.copyValues(t),s=0;s<i.length;s++){var a=i[s],r=this.calendarMode==="Gregorian"?"gregorian":"islamic",n=void 0;this.calendarMode==="Gregorian"?n=this.globalize.formatDate(a,{type:"date",skeleton:"yMd"}):n=this.globalize.formatDate(a,{type:"dateTime",skeleton:"full",calendar:"islamic"});var h={type:"date",skeleton:"yMd",calendar:r},p=this.globalize.formatDate(this.min,h),o=p,f={type:"date",skeleton:"yMd",calendar:r},c=this.globalize.formatDate(this.max,f),v=c;(+new Date(n)<+new Date(o)||+new Date(n)>+new Date(v))&&(i.splice(s,1),s=-1)}this.setProperties({values:i},!0)}},l.prototype.setValueUpdate=function(){u(this.tableBodyElement)||(I(this.tableBodyElement),this.setProperties({start:this.currentView()},!0),this.createContentBody())},l.prototype.copyValues=function(e){var t=[];if(!u(e)&&e.length>0)for(var i=0;i<e.length;i++)t.push(new Date(+e[i]));return t},l.prototype.titleUpdate=function(e,t){var i=new ue(this.locale),s,a,r=this.calendarMode==="Gregorian"?"gregorian":"islamic";switch(this.calendarMode==="Gregorian"?(s=i.formatDate(e,{type:"dateTime",skeleton:"yMMMM",calendar:r}),a=i.formatDate(e,{format:null,type:"dateTime",skeleton:"y",calendar:r})):(s=i.formatDate(e,{type:"dateTime",format:"MMMM y",calendar:r}),a=i.formatDate(e,{type:"dateTime",format:"y",calendar:r})),t){case"days":this.headerTitleElement.textContent=this.toCapitalize(s);break;case"months":this.headerTitleElement.textContent=a}},l.prototype.setActiveDescendant=function(){var e,t=this.tableBodyElement.querySelector("tr td.e-focused-date"),i=this.tableBodyElement.querySelector("tr td.e-selected"),s=this.calendarMode==="Gregorian"?"gregorian":"islamic",a,r=this.currentView();return r==="Month"?a=this.globalize.formatDate(this.currentDate,{type:"date",skeleton:"full",calendar:s}):r==="Year"?s!=="islamic"?a=this.globalize.formatDate(this.currentDate,{type:"date",skeleton:"yMMMM",calendar:s}):a=this.globalize.formatDate(this.currentDate,{type:"date",skeleton:"GyMMM",calendar:s}):a=this.globalize.formatDate(this.currentDate,{format:null,type:"date",skeleton:"y",calendar:s}),(i||t)&&(u(i)||i.setAttribute("aria-selected","true"),(t||i).setAttribute("aria-label",a),e=(t||i).getAttribute("id")),e},l.prototype.iconHandler=function(){switch(new Date(this.checkValue(this.currentDate)).setDate(1),this.currentView()){case"Month":this.previousIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Year":this.previousIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)),this.max)>-1);break;case"Decade":this.previousIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.min)<1),this.nextIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)),this.max)>-1)}},l.prototype.destroy=function(){this.getModuleName()==="calendar"&&this.element?C([this.element],[Ze]):this.calendarElement&&this.element&&C([this.element],[Ze]),this.getModuleName()==="calendar"&&this.element&&(u(this.headerTitleElement)||y.remove(this.headerTitleElement,"click",this.navigateTitle),this.todayElement&&y.remove(this.todayElement,"click",this.todayButtonClick),this.previousIconHandler(!0),this.nextIconHandler(!0),this.keyboardModule.destroy(),this.element.removeAttribute("data-role"),u(this.calendarEleCopy.getAttribute("tabindex"))?this.element.removeAttribute("tabindex"):this.element.setAttribute("tabindex",this.tabIndex)),this.element&&(this.element.innerHTML=""),this.todayElement=null,this.tableBodyElement=null,this.todayButtonEvent=null,this.renderDayCellArgs=null,this.headerElement=null,this.nextIcon=null,this.table=null,this.tableHeadElement=null,this.previousIcon=null,this.headerTitleElement=null,this.footer=null,this.contentElement=null,d.prototype.destroy.call(this)},l.prototype.title=function(e){var t=this.getViewNumber(this.currentView());this.effect=yt,this.switchView(++t,e)},l.prototype.getViewNumber=function(e){return e==="Month"?0:e==="Year"?1:2},l.prototype.navigateTitle=function(e){e.preventDefault(),this.title(e),this.getModuleName()==="calendar"&&this.table.focus()},l.prototype.previous=function(){this.effect="";var e=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,-1),this.switchView(e);break;case"Year":this.addYears(this.currentDate,-1),this.switchView(e);break;case"Decade":this.addYears(this.currentDate,-10),this.switchView(e);break}},l.prototype.navigatePrevious=function(e){!A.isDevice&&e.preventDefault(),this.calendarMode==="Gregorian"?this.previous():this.islamicModule.islamicPrevious(),this.triggerNavigate(e),this.getModuleName()==="calendar"&&this.table.focus()},l.prototype.next=function(){this.effect="";var e=this.getViewNumber(this.currentView());switch(this.currentView()){case"Month":this.addMonths(this.currentDate,1),this.switchView(e);break;case"Year":this.addYears(this.currentDate,1),this.switchView(e);break;case"Decade":this.addYears(this.currentDate,10),this.switchView(e);break}},l.prototype.navigateNext=function(e){!A.isDevice&&e.preventDefault(),this.calendarMode==="Gregorian"?this.next():this.islamicModule.islamicNext(),this.triggerNavigate(e),this.getModuleName()==="calendar"&&this.table.focus()},l.prototype.navigateTo=function(e,t,i){+t>=+this.min&&+t<=+this.max&&(this.currentDate=t),+t<=+this.min&&(this.currentDate=new Date(this.checkValue(this.min))),+t>=+this.max&&(this.currentDate=new Date(this.checkValue(this.max))),this.getViewNumber(this.depth)>=this.getViewNumber(e)&&(this.getViewNumber(this.depth)<=this.getViewNumber(this.start)||this.getViewNumber(this.depth)===this.getViewNumber(e))&&(e=this.depth),this.switchView(this.getViewNumber(e),null,null,i)},l.prototype.currentView=function(){return!u(this.contentElement)&&this.contentElement.classList.contains(Yt)?"Year":!u(this.contentElement)&&this.contentElement.classList.contains(Ji)?"Decade":"Month"},l.prototype.getDateVal=function(e,t){return!u(t)&&e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},l.prototype.getCultureObjects=function(e,t){var i=".dates.calendars.gregorian.days.format."+this.dayHeaderFormat.toLowerCase(),s=".dates.calendars.islamic.days.format."+this.dayHeaderFormat.toLowerCase(),a="main.";return this.calendarMode==="Gregorian"?O(a+""+this.locale+i,e):O("main."+this.locale+s,e)},l.prototype.getWeek=function(e){var t=new Date(this.checkValue(e)).valueOf(),i=new Date(e.getFullYear(),0,1).valueOf();return Math.ceil((t-i+Xt)/Xt/7)},l.prototype.setStartDate=function(e,t){var i=e.getTimezoneOffset(),s=new Date(e.getTime()+t),a=s.getTimezoneOffset()-i;e.setTime(s.getTime()+a*na)},l.prototype.addMonths=function(e,t){if(this.calendarMode==="Gregorian"){var i=e.getDate();e.setDate(1),e.setMonth(e.getMonth()+t),e.setDate(Math.min(i,this.getMaxDays(e)))}else{var s=this.islamicModule.getIslamicDate(e);this.currentDate=this.islamicModule.toGregorian(s.year,s.month+t,1)}},l.prototype.addYears=function(e,t){if(this.calendarMode==="Gregorian"){var i=e.getDate();e.setDate(1),e.setFullYear(e.getFullYear()+t),e.setDate(Math.min(i,this.getMaxDays(e)))}else{var s=this.islamicModule.getIslamicDate(e);this.currentDate=this.islamicModule.toGregorian(s.year+t,s.month,1)}},l.prototype.getIdValue=function(e,t){var i;e?i=e.currentTarget:i=t;var s=this.calendarMode==="Gregorian"?"gregorian":"islamic",a={type:"dateTime",skeleton:"full",calendar:s},r=this.globalize.formatDate(new Date(parseInt(""+i.getAttribute("id"),0)),a),n=this.globalize.parseDate(r,a),h=n.valueOf()-n.valueOf()%1e3;return new Date(h)},l.prototype.adjustLongHeaderSize=function(){C([this.element],ss),this.dayHeaderFormat==="Wide"&&g([this.getModuleName()==="calendar"?this.element:this.calendarElement],ss)},l.prototype.selectDate=function(e,t,i,s,a){var r=i||e.currentTarget;if(this.isDateSelected=!1,this.currentView()==="Decade")this.setDateDecade(this.currentDate,t.getFullYear());else if(this.currentView()==="Year")this.setDateYear(this.currentDate,t);else{if(s&&!this.checkPresentDate(t,a)){var n=this.copyValues(a);!u(a)&&n.length>0?(n.push(new Date(this.checkValue(t))),this.setProperties({values:n},!0),this.setProperties({value:a[a.length-1]},!0)):this.setProperties({values:[new Date(this.checkValue(t))]},!0)}else this.setProperties({value:new Date(this.checkValue(t))},!0);this.currentDate=new Date(this.checkValue(t))}var h=k(r,"."+Ze);if(u(h)&&(h=this.tableBodyElement),!s&&!u(h.querySelector("."+te))&&C([h.querySelector("."+te)],te),!s&&!u(h.querySelector("."+oe))&&C([h.querySelector("."+oe)],oe),s){for(var n=this.copyValues(a),p=Array.prototype.slice.call(this.tableBodyElement.querySelectorAll("td")),o=0;o<p.length;o++){var f=h.querySelectorAll("td."+oe)[0],c=h.querySelectorAll("td."+te)[0];p[o]===f&&C([p[o]],oe),p[o]===c&&!this.checkPresentDate(new Date(parseInt(c.getAttribute("id").split("_")[0],10)),a)&&C([p[o]],te)}if(r.classList.contains(te)){C([r],te);for(var v=0;v<n.length;v++){var S=this.calendarMode==="Gregorian"?"gregorian":"islamic",b={format:null,type:"date",skeleton:"short",calendar:S},w=this.globalize.formatDate(t,b),x=this.globalize.formatDate(n[v],b);if(w===x){var o=n.indexOf(n[v]);n.splice(o,1),g([r],oe)}}this.setProperties({values:n},!0)}else g([r],te)}else g([r],te);this.isDateSelected=!0},l.prototype.checkPresentDate=function(e,t){var i=!1;if(!u(t))for(var s=0;s<t.length;s++){var a=this.calendarMode==="Gregorian"?"gregorian":"islamic",r=this.globalize.formatDate(e,{format:null,type:"date",skeleton:"short",calendar:a}),n=this.globalize.formatDate(t[s],{format:null,type:"date",skeleton:"short",calendar:a});r===n&&(i=!0)}return i},l.prototype.setAriaActiveDescendant=function(){W(this.table,{"aria-activedescendant":""+this.setActiveDescendant()})},l.prototype.previousIconHandler=function(e){e?u(this.previousIcon)||(y.remove(this.previousIcon,"click",this.navigatePreviousHandler),g([this.previousIcon],""+Y),g([this.previousIcon],""+ke),this.previousIcon.setAttribute("aria-disabled","true")):(y.add(this.previousIcon,"click",this.navigatePreviousHandler),C([this.previousIcon],""+Y),C([this.previousIcon],""+ke),this.previousIcon.setAttribute("aria-disabled","false"))},l.prototype.renderDayCellEvent=function(e){ie(this.renderDayCellArgs,{name:"renderDayCell"}),this.trigger("renderDayCell",e)},l.prototype.navigatedEvent=function(e){ie(this.navigatedArgs,{name:"navigated",event:e}),this.trigger("navigated",this.navigatedArgs)},l.prototype.triggerNavigate=function(e){this.navigatedArgs={view:this.currentView(),date:this.currentDate},this.navigatedEvent(e)},l.prototype.nextIconHandler=function(e){e?u(this.previousIcon)||(y.remove(this.nextIcon,"click",this.navigateNextHandler),g([this.nextIcon],Y),g([this.nextIcon],ke),this.nextIcon.setAttribute("aria-disabled","true")):(y.add(this.nextIcon,"click",this.navigateNextHandler),C([this.nextIcon],Y),C([this.nextIcon],ke),this.nextIcon.setAttribute("aria-disabled","false"))},l.prototype.compare=function(e,t,i){var s=t.getFullYear(),a,r;return a=s,r=0,i&&(s=s-s%i,a=s-s%i+i-1),e.getFullYear()>a?r=1:e.getFullYear()<s&&(r=-1),r},l.prototype.isMinMaxRange=function(e){return+e>=+this.min&&+e<=+this.max},l.prototype.isMonthYearRange=function(e){if(this.calendarMode==="Gregorian")return e.getMonth()>=this.min.getMonth()&&e.getFullYear()>=this.min.getFullYear()&&e.getMonth()<=this.max.getMonth()&&e.getFullYear()<=this.max.getFullYear();var t=this.islamicModule.getIslamicDate(e);return t.month>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).month&&t.year>=this.islamicModule.getIslamicDate(new Date(1944,1,18)).year&&t.month<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).month&&t.year<=this.islamicModule.getIslamicDate(new Date(2069,1,16)).year},l.prototype.compareYear=function(e,t){return this.compare(e,t,0)},l.prototype.compareDecade=function(e,t){return this.compare(e,t,10)},l.prototype.shiftArray=function(e,t){return e.slice(t).concat(e.slice(0,t))},l.prototype.addDay=function(e,t,i,s,a){var r=t,n=new Date(+e);if(!u(this.tableBodyElement)&&!u(i)){for(;this.findNextTD(new Date(+e),r,s,a);)r+=t;var h=new Date(n.setDate(n.getDate()+r));r=+h>+s||+h<+a?r===t?t-t:t:r}e.setDate(e.getDate()+r)},l.prototype.findNextTD=function(e,t,i,s){var a=new Date(e.setDate(e.getDate()+t)),r=[],n=!1;if((!u(a)&&a.getMonth())===(!u(this.currentDate)&&this.currentDate.getMonth())){var h=void 0;this.calendarMode==="Gregorian"?h=this.renderDays(a):h=this.islamicModule.islamicRenderDays(this.currentDate,a),r=h.filter(function(o){return o.classList.contains(Y)})}else r=this.tableBodyElement.querySelectorAll("td."+Y);if(+a<=+i&&+a>=+s&&r.length)for(var p=0;p<r.length&&(n=+a==+new Date(parseInt(r[p].id,0)),!n);p++);return n},l.prototype.getMaxDays=function(e){var t,i=new Date(this.checkValue(e));t=28;for(var s=i.getMonth();i.getMonth()===s;)++t,i.setDate(t);return t-1},l.prototype.setDateDecade=function(e,t){e.setFullYear(t),this.setProperties({value:new Date(this.checkValue(e))},!0)},l.prototype.setDateYear=function(e,t){e.setFullYear(t.getFullYear(),t.getMonth(),e.getDate()),t.getMonth()!==e.getMonth()&&(e.setDate(0),this.currentDate=new Date(this.checkValue(t))),this.setProperties({value:new Date(this.checkValue(e))},!0)},l.prototype.compareMonth=function(e,t){var i;return e.getFullYear()>t.getFullYear()?i=1:e.getFullYear()<t.getFullYear()?i=-1:i=e.getMonth()===t.getMonth()?0:e.getMonth()>t.getMonth()?1:-1,i},l.prototype.checkValue=function(e){return e instanceof Date?e.toUTCString():""+e},l.prototype.checkView=function(){this.start!=="Decade"&&this.start!=="Year"&&this.setProperties({start:"Month"},!0),this.depth!=="Decade"&&this.depth!=="Year"&&this.setProperties({depth:"Month"},!0),this.getViewNumber(this.depth)>this.getViewNumber(this.start)&&this.setProperties({depth:"Month"},!0)},l.prototype.getDate=function(e,t){return t&&(e=new Date(e.toLocaleString("en-US",{timeZone:t}))),e},_([m(new Date(1900,0,1))],l.prototype,"min",void 0),_([m(!0)],l.prototype,"enabled",void 0),_([m(null)],l.prototype,"cssClass",void 0),_([m(new Date(2099,11,31))],l.prototype,"max",void 0),_([m(null)],l.prototype,"firstDayOfWeek",void 0),_([m("Gregorian")],l.prototype,"calendarMode",void 0),_([m("Month")],l.prototype,"start",void 0),_([m("Month")],l.prototype,"depth",void 0),_([m(!1)],l.prototype,"weekNumber",void 0),_([m("FirstDay")],l.prototype,"weekRule",void 0),_([m(!0)],l.prototype,"showTodayButton",void 0),_([m("Short")],l.prototype,"dayHeaderFormat",void 0),_([m(!1)],l.prototype,"enablePersistence",void 0),_([m(null)],l.prototype,"keyConfigs",void 0),_([m(null)],l.prototype,"serverTimezoneOffset",void 0),_([P()],l.prototype,"created",void 0),_([P()],l.prototype,"destroyed",void 0),_([P()],l.prototype,"navigated",void 0),_([P()],l.prototype,"renderDayCell",void 0),l=_([we],l),l}(lt),ha=function(d){ms(l,d);function l(e,t){return d.call(this,e,t)||this}return l.prototype.render=function(){if(this.calendarMode==="Islamic"&&this.islamicModule===void 0&&Ds("Requires the injectable Islamic modules to render Calendar in Islamic mode"),this.isMultiSelection&&typeof this.values=="object"&&!u(this.values)&&this.values.length>0){for(var e=[],t=[],i=0;i<this.values.length;i++)e.indexOf(+this.values[i])===-1&&(e.push(+this.values[i]),t.push(this.values[i]));this.setProperties({values:t},!0);for(var s=0;s<this.values.length;s++)if(!this.checkDateValue(this.values[s]))if(typeof this.values[s]=="string"&&this.checkDateValue(new Date(this.checkValue(this.values[s])))){var a=new Date(this.checkValue(this.values[s]));this.values.splice(s,1),this.values.splice(s,0,a)}else this.values.splice(s,1);this.setProperties({value:this.values[this.values.length-1]},!0),this.previousValues=this.values.length}if(this.validateDate(),this.minMaxUpdate(),this.getModuleName()==="calendar"&&(this.setEnable(this.enabled),this.setClass(this.cssClass)),d.prototype.render.call(this),this.getModuleName()==="calendar"){var r=k(this.element,"form");r&&y.add(r,"reset",this.formResetHandler.bind(this)),this.setTimeZone(this.serverTimezoneOffset)}this.renderComplete()},l.prototype.setEnable=function(e){e?C([this.element],Y):g([this.element],Y)},l.prototype.setClass=function(e,t){u(t)||(t=t.replace(/\s+/g," ").trim()),u(e)||(e=e.replace(/\s+/g," ").trim()),!u(t)&&t!==""&&C([this.element],t.split(" ")),u(e)||g([this.element],e.split(" "))},l.prototype.isDayLightSaving=function(){var e=new Date(this.value.getFullYear(),6,1).getTimezoneOffset(),t=new Date(this.value.getFullYear(),0,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(t,e)},l.prototype.setTimeZone=function(e){if(!u(this.serverTimezoneOffset)&&this.value){var t=e,i=new Date().getTimezoneOffset()/60,s=t+i;s=this.isDayLightSaving()?s--:s,this.value=new Date(this.value.getTime()+s*60*60*1e3)}},l.prototype.formResetHandler=function(){this.setProperties({value:null},!0)},l.prototype.validateDate=function(){typeof this.value=="string"&&this.setProperties({value:this.checkDateValue(new Date(this.checkValue(this.value)))},!0),d.prototype.validateDate.call(this,this.value),!u(this.value)&&this.min<=this.max&&this.value>=this.min&&this.value<=this.max&&(this.currentDate=new Date(this.checkValue(this.value))),isNaN(+this.value)&&this.setProperties({value:null},!0)},l.prototype.minMaxUpdate=function(){this.getModuleName()==="calendar"&&(!u(this.value)&&this.value<=this.min&&this.min<=this.max?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!u(this.value)&&this.value>=this.max&&this.min<=this.max&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})),this.getModuleName()!=="calendar"&&!u(this.value)?!u(this.value)&&this.value<this.min&&this.min<=this.max?d.prototype.minMaxUpdate.call(this,this.min):!u(this.value)&&this.value>this.max&&this.min<=this.max&&d.prototype.minMaxUpdate.call(this,this.max):d.prototype.minMaxUpdate.call(this,this.value)},l.prototype.generateTodayVal=function(e){var t=new Date;return u(this.timezone)||(t=d.prototype.getDate.call(this,t,this.timezone)),e&&u(this.timezone)?(t.setHours(e.getHours()),t.setMinutes(e.getMinutes()),t.setSeconds(e.getSeconds()),t.setMilliseconds(e.getMilliseconds())):t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0),t},l.prototype.todayButtonClick=function(e){if(this.showTodayButton){var t=this.generateTodayVal(this.value);if(this.setProperties({value:t},!0),this.isTodayClicked=!0,this.todayButtonEvent=e,this.isMultiSelection){var i=this.copyValues(this.values);d.prototype.checkPresentDate.call(this,t,this.values)||(i.push(t),this.setProperties({values:i}))}d.prototype.todayButtonClick.call(this,e,new Date(+this.value))}},l.prototype.keyActionHandle=function(e){d.prototype.keyActionHandle.call(this,e,this.value,this.isMultiSelection)},l.prototype.preRender=function(){var e=this;this.changeHandler=function(t){e.triggerChange(t)},this.checkView(),d.prototype.preRender.call(this,this.value)},l.prototype.createContent=function(){this.previousDate=this.value,this.previousDateTime=this.value,d.prototype.createContent.call(this)},l.prototype.minMaxDate=function(e){return d.prototype.minMaxDate.call(this,e)},l.prototype.renderMonths=function(e,t,i){d.prototype.renderMonths.call(this,e,this.value,i)},l.prototype.renderDays=function(e,t,i,s,a,r){var n=d.prototype.renderDays.call(this,e,this.value,this.isMultiSelection,this.values,a,r);return this.isMultiSelection&&d.prototype.validateValues.call(this,this.isMultiSelection,this.values),n},l.prototype.renderYears=function(e){this.calendarMode==="Gregorian"?d.prototype.renderYears.call(this,e,this.value):this.islamicModule.islamicRenderYears(e,this.value)},l.prototype.renderDecades=function(e){this.calendarMode==="Gregorian"?d.prototype.renderDecades.call(this,e,this.value):this.islamicModule.islamicRenderDecade(e,this.value)},l.prototype.renderTemplate=function(e,t,i,s){this.calendarMode==="Gregorian"?d.prototype.renderTemplate.call(this,e,t,i,s,this.value):this.islamicModule.islamicRenderTemplate(e,t,i,s,this.value),this.changedArgs={value:this.value,values:this.values},s&&s.type==="click"&&s.currentTarget.classList.contains(ce)?this.changeHandler(s):this.changeHandler()},l.prototype.clickHandler=function(e){var t=e.currentTarget;if(this.isPopupClicked=!0,t.classList.contains(ce))if(this.isMultiSelection){var i=this.copyValues(this.values);i.toString().indexOf(this.getIdValue(e,null).toString())===-1?(i.push(this.getIdValue(e,null)),this.setProperties({values:i},!0),this.setProperties({value:this.values[this.values.length-1]},!0)):this.previousDates=!0}else this.setProperties({value:this.getIdValue(e,null)},!0);var s=this.currentView();d.prototype.clickHandler.call(this,e,this.value),this.isMultiSelection&&this.currentDate!==this.value&&!u(this.tableBodyElement.querySelectorAll("."+oe)[0])&&s==="Year"&&this.tableBodyElement.querySelectorAll("."+oe)[0].classList.remove(oe)},l.prototype.switchView=function(e,t,i,s){d.prototype.switchView.call(this,e,t,this.isMultiSelection,s)},l.prototype.getModuleName=function(){return d.prototype.getModuleName.call(this),"calendar"},l.prototype.getPersistData=function(){d.prototype.getPersistData.call(this);var e=["value","values"];return this.addOnPersist(e)},l.prototype.onPropertyChanged=function(e,t){this.effect="",this.rangeValidation(this.min,this.max);for(var i=0,s=Object.keys(e);i<s.length;i++){var a=s[i];switch(a){case"value":this.isDateSelected&&(typeof e.value=="string"?this.setProperties({value:new Date(this.checkValue(e.value))},!0):e.value=new Date(this.checkValue(e.value)),isNaN(+this.value)&&this.setProperties({value:t.value},!0),this.update());break;case"values":if(this.isDateSelected){if(typeof e.values=="string"||typeof e.values=="number")this.setProperties({values:null},!0);else{for(var r=this.copyValues(this.values),n=0;n<r.length;n++){var h=r[n];this.checkDateValue(h)&&!d.prototype.checkPresentDate.call(this,h,r)&&r.push(h)}this.setProperties({values:r},!0),this.values.length>0&&this.setProperties({value:e.values[e.values.length-1]},!0)}this.validateValues(this.isMultiSelection,this.values),this.update()}break;case"isMultiSelection":this.isDateSelected&&(this.setProperties({isMultiSelection:e.isMultiSelection},!0),this.update());break;case"enabled":this.setEnable(this.enabled);break;case"cssClass":this.getModuleName()==="calendar"&&this.setClass(e.cssClass,t.cssClass);break;default:d.prototype.onPropertyChanged.call(this,e,t,this.isMultiSelection,this.values)}}this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange},l.prototype.destroy=function(){if(d.prototype.destroy.call(this),this.getModuleName()==="calendar"){this.changedArgs=null;var e=k(this.element,"form");e&&y.remove(e,"reset",this.formResetHandler.bind(this))}},l.prototype.navigateTo=function(e,t,i){this.minMaxUpdate(),d.prototype.navigateTo.call(this,e,t,i)},l.prototype.currentView=function(){return d.prototype.currentView.call(this)},l.prototype.addDate=function(e){if(typeof e!="string"&&typeof e!="number"){var t=this.copyValues(this.values);if(typeof e=="object"&&e.length>0)for(var i=e,s=0;s<i.length;s++)this.checkDateValue(i[s])&&!d.prototype.checkPresentDate.call(this,i[s],t)&&(!u(t)&&t.length>0?t.push(i[s]):t=[new Date(+i[s])]);else this.checkDateValue(e)&&!d.prototype.checkPresentDate.call(this,e,t)&&(!u(t)&&t.length>0?t.push(e):t=[new Date(+e)]);this.setProperties({values:t},!0),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.validateValues(this.isMultiSelection,t),this.update(),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}},l.prototype.removeDate=function(e){if(typeof e!="string"&&typeof e!="number"&&!u(this.values)&&this.values.length>0){var t=this.copyValues(this.values);if(typeof e=="object"&&e.length>0)for(var i=e,s=0;s<i.length;s++)for(var a=0;a<t.length;a++)+t[a]==+i[s]&&t.splice(a,1);else for(var a=0;a<t.length;a++)+t[a]==+e&&t.splice(a,1);this.setProperties({values:t},!1),this.update(),this.isMultiSelection&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler()}},l.prototype.setTodayDate=function(e){var t=new Date(+e);this.setProperties({value:t},!0),d.prototype.todayButtonClick.call(this,null,t,!0)},l.prototype.update=function(){this.validateDate(),this.minMaxUpdate(),d.prototype.setValueUpdate.call(this)},l.prototype.selectDate=function(e,t,i){d.prototype.selectDate.call(this,e,t,i,this.isMultiSelection,this.values),this.isMultiSelection&&!u(this.values)&&this.values.length>0&&this.setProperties({value:this.values[this.values.length-1]},!0),this.changedArgs={value:this.value,values:this.values},this.changeHandler(e)},l.prototype.changeEvent=function(e){((this.value&&this.value.valueOf())!==(this.previousDate&&+this.previousDate.valueOf())||this.isMultiSelection)&&(this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.changedArgs),this.previousDate=new Date(+this.value))},l.prototype.triggerChange=function(e){!u(this.todayButtonEvent)&&this.isTodayClicked&&(e=this.todayButtonEvent,this.isTodayClicked=!1),this.changedArgs.event=e||null,this.changedArgs.isInteracted=!u(e),u(this.value)||this.setProperties({value:this.value},!0),!this.isMultiSelection&&+this.value!==Number.NaN&&(!u(this.value)&&!u(this.previousDate)||this.previousDate===null&&!isNaN(+this.value))?this.changeEvent(e):!u(this.values)&&this.previousValues!==this.values.length&&(this.changeEvent(e),this.previousValues=this.values.length)},_([m(null)],l.prototype,"value",void 0),_([m(null)],l.prototype,"values",void 0),_([m(!1)],l.prototype,"isMultiSelection",void 0),_([P()],l.prototype,"change",void 0),l=_([we],l),l}(oa),ua=globalThis&&globalThis.__extends||function(){var d=function(l,e){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},d(l,e)};return function(l,e){d(l,e);function t(){this.constructor=l}l.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),z=globalThis&&globalThis.__decorate||function(d,l,e,t){var i=arguments.length,s=i<3?l:t===null?t=Object.getOwnPropertyDescriptor(l,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(d,l,e,t);else for(var r=d.length-1;r>=0;r--)(a=d[r])&&(s=(i<3?a(s):i>3?a(l,e,s):a(l,e))||s);return i>3&&s&&Object.defineProperty(l,e,s),s},pa="e-date-wrapper",bt="e-datepicker",ca="e-lib",da="e-control",ls="e-popup-wrapper",fa="e-input-group-icon",ma="e-popup",va="e-input-group",Qt="e-input-focus",ga="e-input",as="e-error",Ct="e-active",rs="e-date-overflow",ya="e-date-icon",ba="e-icons",Ca=300,ka=4,kt="e-selected",Sa="e-focused-date",Jt="e-non-edit",ns=["title","class","style"],St=function(d){ua(l,d);function l(e,t){var i=d.call(this,e,t)||this;return i.isDateIconClicked=!1,i.isAltKeyPressed=!1,i.isInteracted=!0,i.invalidValueString=null,i.checkPreviousValue=null,i.maskedDateValue="",i.isAngular=!1,i.preventChange=!1,i.isIconClicked=!1,i.isDynamicValueChanged=!1,i.moduleName=i.getModuleName(),i.isFocused=!1,i.isBlur=!1,i.isKeyAction=!1,i.datepickerOptions=e,i}return l.prototype.render=function(){this.initialize(),this.bindEvents(),this.floatLabelType==="Auto"&&V.calculateWidth(this.inputElement,this.inputWrapper.container),!u(this.inputWrapper.buttons[0])&&!u(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon"),!u(k(this.element,"fieldset"))&&k(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete(),this.setTimeZone(this.serverTimezoneOffset)},l.prototype.setTimeZone=function(e){if(!u(this.serverTimezoneOffset)&&this.value){var t=new Date().getTimezoneOffset()/60,i=e,s=i+t;s=this.isDayLightSaving()?s--:s,this.value=new Date(this.value.getTime()+s*60*60*1e3),this.updateInput()}},l.prototype.isDayLightSaving=function(){var e=new Date(this.value.getFullYear(),0,1).getTimezoneOffset(),t=new Date(this.value.getFullYear(),6,1).getTimezoneOffset();return this.value.getTimezoneOffset()<Math.max(e,t)},l.prototype.setAllowEdit=function(){this.allowEdit?this.readonly||this.inputElement.removeAttribute("readonly"):W(this.inputElement,{readonly:""}),this.updateIconState()},l.prototype.updateIconState=function(){!this.allowEdit&&this.inputWrapper&&!this.readonly?this.inputElement.value===""?C([this.inputWrapper.container],[Jt]):g([this.inputWrapper.container],[Jt]):this.inputWrapper&&C([this.inputWrapper.container],[Jt])},l.prototype.initialize=function(){this.checkInvalidValue(this.value),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"}),this.createInput(),this.updateHtmlAttributeToWrapper(),this.setAllowEdit(),this.enableMask&&!this.value&&this.maskedDateValue&&(this.floatLabelType==="Always"||!this.floatLabelType||!this.placeholder)?(this.updateInput(!0),this.updateInputValue(this.maskedDateValue)):this.enableMask||this.updateInput(!0),this.previousElementValue=this.inputElement.value,this.previousDate=u(this.value)?null:new Date(+this.value),this.inputElement.setAttribute("value",this.inputElement.value),this.inputValueCopy=this.value},l.prototype.createInput=function(){var e={"aria-atomic":"true","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-invalid":"false","aria-label":this.getModuleName()};if(this.getModuleName()==="datepicker"){var t={placeholder:this.placeholder};this.globalize=new ue(this.locale),this.l10n=new fe("datepicker",t,this.locale),this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0)}this.fullScreenMode&&A.isDevice&&(this.cssClass+=" e-popup-expand");var i=this.cssClass;!u(this.cssClass)&&this.cssClass!==""&&(i=this.cssClass.replace(/\s+/g," ").trim());var s=!this.enableMask;this.inputWrapper=V.createInput({element:this.inputElement,floatLabelType:this.floatLabelType,bindClearAction:s,properties:{readonly:this.readonly,placeholder:this.placeholder,cssClass:i,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton},buttons:[fa+" "+ya+" "+ba]},this.createElement),this.setWidth(this.width),this.inputElement.name!==""?this.inputElement.setAttribute("name",""+this.inputElement.getAttribute("name")):this.inputElement.setAttribute("name",""+this.element.id),W(this.inputElement,e),this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1),V.addAttributes({"aria-label":"select",role:"button"},this.inputWrapper.buttons[0]),g([this.inputWrapper.container],pa)},l.prototype.updateInput=function(e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var i;if(this.value&&!this.isCalendar()&&this.disabledDates(e,t),isNaN(+new Date(this.checkValue(this.value)))&&this.setProperties({value:null},!0),this.strictMode&&(d.prototype.validateDate.call(this),this.minMaxUpdates(),d.prototype.minMaxUpdate.call(this)),!u(this.value)){var s=this.value,a=void 0,r=u(this.formatString)?this.dateTimeFormat:this.formatString;if(this.getModuleName()==="datetimepicker"?this.calendarMode==="Gregorian"?a=this.globalize.formatDate(this.value,{format:r,type:"dateTime",skeleton:"yMd"}):a=this.globalize.formatDate(this.value,{format:r,type:"dateTime",skeleton:"yMd",calendar:"islamic"}):(this.calendarMode==="Gregorian"?i={format:this.formatString,type:"dateTime",skeleton:"yMd"}:i={format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},a=this.globalize.formatDate(this.value,i)),+s<=+this.max&&+s>=+this.min)this.updateInputValue(a);else{var n=+s>=+this.max||!+this.value||!+this.value||+s<=+this.min;!this.strictMode&&n&&this.updateInputValue(a)}}u(this.value)&&this.strictMode&&(this.enableMask?(this.updateInputValue(this.maskedDateValue),this.notify("createMask",{module:"MaskedDateTime"})):this.updateInputValue("")),!this.strictMode&&u(this.value)&&this.invalidValueString&&this.updateInputValue(this.invalidValueString),this.changedArgs={value:this.value},this.errorClass(),this.updateIconState()},l.prototype.minMaxUpdates=function(){!u(this.value)&&this.value<this.min&&this.min<=this.max&&this.strictMode?(this.setProperties({value:this.min},!0),this.changedArgs={value:this.value}):!u(this.value)&&this.value>this.max&&this.min<=this.max&&this.strictMode&&(this.setProperties({value:this.max},!0),this.changedArgs={value:this.value})},l.prototype.checkStringValue=function(e){var t=null,i=null,s=null;if(this.getModuleName()==="datetimepicker"){var a=new ue(this.locale);this.calendarMode==="Gregorian"?(i={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd"},s={format:a.getDatePattern({skeleton:"yMd"}),type:"dateTime"}):(i={format:this.dateTimeFormat,type:"dateTime",skeleton:"yMd",calendar:"islamic"},s={format:a.getDatePattern({skeleton:"yMd"}),type:"dateTime",calendar:"islamic"})}else this.calendarMode==="Gregorian"?i={format:this.formatString,type:"dateTime",skeleton:"yMd"}:i={format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};return t=this.checkDateValue(this.globalize.parseDate(e,i)),u(t)&&this.getModuleName()==="datetimepicker"&&(t=this.checkDateValue(this.globalize.parseDate(e,s))),t},l.prototype.checkInvalidValue=function(e){if(!(e instanceof Date)&&!u(e)){var t=null,i=e;if(typeof e=="number"&&(i=e.toString()),this.getModuleName()==="datetimepicker"){var s=new ue(this.locale);this.calendarMode==="Gregorian"?(this.dateTimeFormat,s.getDatePattern({skeleton:"yMd"})):(this.dateTimeFormat,s.getDatePattern({skeleton:"yMd"}))}else this.calendarMode==="Gregorian"?this.formatString:this.formatString;var a=!1;if(typeof i!="string")i=null,a=!0;else if(typeof i=="string"&&(i=i.trim()),t=this.checkStringValue(i),!t){var r=null,n=null;r=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,n=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,!r.test(i)&&!n.test(i)||/^[a-zA-Z0-9- ]*$/.test(i)||isNaN(+new Date(this.checkValue(i)))?a=!0:t=new Date(i)}a?(this.strictMode||(this.invalidValueString=i),this.setProperties({value:null},!0)):this.setProperties({value:t},!0)}},l.prototype.bindInputEvent=function(){(!u(this.formatString)||this.enableMask)&&(this.enableMask||this.formatString.indexOf("y")===-1?y.add(this.inputElement,"input",this.inputHandler,this):y.remove(this.inputElement,"input",this.inputHandler))},l.prototype.bindEvents=function(){y.add(this.inputWrapper.buttons[0],"mousedown",this.dateIconHandler,this),y.add(this.inputElement,"mouseup",this.mouseUpHandler,this),y.add(this.inputElement,"focus",this.inputFocusHandler,this),y.add(this.inputElement,"blur",this.inputBlurHandler,this),y.add(this.inputElement,"keyup",this.keyupHandler,this),this.enableMask&&y.add(this.inputElement,"keydown",this.keydownHandler,this),this.bindInputEvent(),y.add(this.inputElement,"change",this.inputChangeHandler,this),this.showClearButton&&this.inputWrapper.clearButton&&y.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this),this.formElement&&y.add(this.formElement,"reset",this.resetFormHandler,this),this.defaultKeyConfigs=ie(this.defaultKeyConfigs,this.keyConfigs),this.keyboardModules=new ye(this.inputElement,{eventName:"keydown",keyAction:this.inputKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})},l.prototype.keydownHandler=function(e){switch(e.code){case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"ArrowDown":case"Home":case"End":case"Delete":this.enableMask&&!this.popupObj&&!this.readonly&&(e.code!=="Delete"&&e.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e}));break}},l.prototype.unBindEvents=function(){u(this.inputWrapper)||y.remove(this.inputWrapper.buttons[0],"mousedown",this.dateIconHandler),y.remove(this.inputElement,"mouseup",this.mouseUpHandler),y.remove(this.inputElement,"focus",this.inputFocusHandler),y.remove(this.inputElement,"blur",this.inputBlurHandler),y.remove(this.inputElement,"change",this.inputChangeHandler),y.remove(this.inputElement,"keyup",this.keyupHandler),this.enableMask&&y.remove(this.inputElement,"keydown",this.keydownHandler),this.showClearButton&&this.inputWrapper.clearButton&&y.remove(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler),this.formElement&&y.remove(this.formElement,"reset",this.resetFormHandler)},l.prototype.resetFormHandler=function(){if(this.enabled&&!this.inputElement.disabled){var e=this.inputElement.getAttribute("value");(this.element.tagName==="EJS-DATEPICKER"||this.element.tagName==="EJS-DATETIMEPICKER")&&(e="",this.inputValueCopy=null,this.inputElement.setAttribute("value","")),this.setProperties({value:this.inputValueCopy},!0),this.restoreValue(),this.inputElement&&(this.updateInputValue(e),this.errorClass())}},l.prototype.restoreValue=function(){this.currentDate=this.value?this.value:new Date,this.previousDate=this.value,this.previousElementValue=u(this.inputValueCopy)?"":this.globalize.formatDate(this.inputValueCopy,{format:this.formatString,type:"dateTime",skeleton:"yMd"})},l.prototype.inputChangeHandler=function(e){this.enabled&&e.stopPropagation()},l.prototype.bindClearEvent=function(){this.showClearButton&&this.inputWrapper.clearButton&&y.add(this.inputWrapper.clearButton,"mousedown touchstart",this.resetHandler,this)},l.prototype.resetHandler=function(e){this.enabled&&(e.preventDefault(),this.clear(e))},l.prototype.mouseUpHandler=function(e){this.enableMask&&(e.preventDefault(),this.notify("setMaskSelection",{module:"MaskedDateTime"}))},l.prototype.clear=function(e){this.setProperties({value:null},!0),this.enableMask||this.updateInputValue("");var t={event:e};if(this.trigger("cleared",t),this.invalidValueString="",this.updateInput(),this.popupUpdate(),this.changeEvent(e),this.enableMask&&this.notify("clearHandler",{module:"MaskedDateTime"}),k(this.element,"form")){var i=this.element,s=document.createEvent("KeyboardEvent");s.initEvent("keyup",!1,!0),i.dispatchEvent(s)}},l.prototype.preventEventBubbling=function(e){e.preventDefault(),this.interopAdaptor.invokeMethodAsync("OnDateIconClick")},l.prototype.updateInputValue=function(e){V.setValue(e,this.inputElement,this.floatLabelType,this.showClearButton)},l.prototype.dateIconHandler=function(e){this.enabled&&(this.isIconClicked=!0,A.isDevice&&(this.inputElement.setAttribute("readonly",""),this.inputElement.blur()),e.preventDefault(),this.readonly||(this.isCalendar()?this.hide(e):(this.isDateIconClicked=!0,this.show(null,e),this.getModuleName()==="datetimepicker"&&this.inputElement.focus(),this.inputElement.focus(),g([this.inputWrapper.container],[Qt]),g(this.inputWrapper.buttons,Ct))),this.isIconClicked=!1)},l.prototype.updateHtmlAttributeToWrapper=function(){if(!u(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];if(!u(this.htmlAttributes[""+i])&&ns.indexOf(i)>-1)if(i==="class"){var s=this.htmlAttributes[""+i].replace(/\s+/g," ").trim();s!==""&&g([this.inputWrapper.container],s.split(" "))}else if(i==="style"){var a=this.inputWrapper.container.getAttribute(i);u(a)?a=this.htmlAttributes[""+i]:a.charAt(a.length-1)===";"?a=a+this.htmlAttributes[""+i]:a=a+";"+this.htmlAttributes[""+i],this.inputWrapper.container.setAttribute(i,a)}else this.inputWrapper.container.setAttribute(i,this.htmlAttributes[""+i])}},l.prototype.updateHtmlAttributeToElement=function(){if(!u(this.htmlAttributes))for(var e=0,t=Object.keys(this.htmlAttributes);e<t.length;e++){var i=t[e];ns.indexOf(i)<0&&this.inputElement.setAttribute(i,this.htmlAttributes[""+i])}},l.prototype.updateCssClass=function(e,t){u(t)||(t=t.replace(/\s+/g," ").trim()),u(e)||(e=e.replace(/\s+/g," ").trim()),V.setCssClass(e,[this.inputWrapper.container],t),this.popupWrapper&&V.setCssClass(e,[this.popupWrapper],t)},l.prototype.calendarKeyActionHandle=function(e){switch(e.action){case"escape":this.isCalendar()?this.hide(e):this.inputWrapper.container.children[this.index].blur();break;case"enter":this.isCalendar()?+this.value!=+this.currentDate&&!this.isCalendar()&&this.inputWrapper.container.children[this.index].focus():this.show(null,e),this.getModuleName()==="datetimepicker"&&this.inputElement.focus();break}},l.prototype.inputFocusHandler=function(){if(this.isFocused=!0,!!this.enabled){this.enableMask&&!this.inputElement.value&&this.placeholder&&this.maskedDateValue&&!this.value&&(this.floatLabelType==="Auto"||this.floatLabelType==="Never"||this.placeholder)&&(this.updateInputValue(this.maskedDateValue),this.inputElement.selectionStart=0,this.inputElement.selectionEnd=this.inputElement.value.length);var e={model:this};this.isDateIconClicked=!1,this.trigger("focus",e),this.updateIconState(),this.openOnFocus&&!this.isIconClicked&&this.show()}},l.prototype.inputHandler=function(){this.isPopupClicked=!1,this.enableMask&&this.notify("inputHandler",{module:"MaskedDateTime"})},l.prototype.inputBlurHandler=function(e){if(this.enabled){if(this.strictModeUpdate(),this.inputElement.value===""&&u(this.value)&&(this.invalidValueString=null,this.updateInputValue("")),this.isBlur=!0,this.updateInput(!1,!0),this.isBlur=!1,this.popupUpdate(),this.changeTrigger(e),this.enableMask&&this.maskedDateValue&&this.placeholder&&this.floatLabelType!=="Always"&&this.inputElement.value===this.maskedDateValue&&!this.value&&(this.floatLabelType==="Auto"||this.floatLabelType==="Never"||this.placeholder)&&this.updateInputValue(""),this.errorClass(),this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(e),this.getModuleName()==="datepicker"){var t={model:this};this.trigger("blur",t)}this.isCalendar()&&(this.defaultKeyConfigs=ie(this.defaultKeyConfigs,this.keyConfigs),this.calendarKeyboardModules=new ye(this.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:this.calendarKeyActionHandle.bind(this),keyConfigs:this.defaultKeyConfigs})),this.isPopupClicked=!1}},l.prototype.documentHandler=function(e){!u(this.popupObj)&&!u(this.inputWrapper)&&(this.inputWrapper.container.contains(e.target)&&e.type!=="mousedown"||this.popupObj.element&&this.popupObj.element.contains(e.target))&&e.type!=="touchstart"&&e.preventDefault();var t=e.target;!k(t,".e-datepicker.e-popup-wrapper")&&!u(this.inputWrapper)&&k(t,"."+va)!==this.inputWrapper.container&&!t.classList.contains("e-day")&&!t.classList.contains("e-dlg-overlay")?(this.hide(e),this.focusOut()):k(t,".e-datepicker.e-popup-wrapper")&&(t.classList.contains("e-day")&&!u(e.target.parentElement)&&e.target.parentElement.classList.contains("e-selected")&&k(t,".e-content")&&k(t,".e-content").classList.contains("e-"+this.depth.toLowerCase())?this.hide(e):k(t,".e-footer-container")&&t.classList.contains("e-today")&&t.classList.contains("e-btn")&&+new Date(+this.value)==+d.prototype.generateTodayVal.call(this,this.value)&&this.hide(e))},l.prototype.inputKeyActionHandle=function(e){var t=this.currentView();switch(e.action){case"altUpArrow":this.isAltKeyPressed=!1,this.hide(e),this.inputElement.focus();break;case"altDownArrow":this.isAltKeyPressed=!0,this.strictModeUpdate(),this.updateInput(),this.changeTrigger(e),this.getModuleName()==="datepicker"&&this.show(null,e);break;case"escape":this.hide(e);break;case"enter":this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass(),!this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(e),this.isCalendar()&&(e.preventDefault(),e.stopPropagation());break;case"tab":case"shiftTab":{var i=this.inputElement.selectionStart,s=this.inputElement.selectionEnd;if(this.enableMask&&!this.popupObj&&!this.readonly){var a=this.inputElement.value.length;(i===0&&s===a||s!==a&&e.action==="tab"||i!==0&&e.action==="shiftTab")&&e.preventDefault(),this.notify("keyDownHandler",{module:"MaskedDateTime",e}),i=this.inputElement.selectionStart,s=this.inputElement.selectionEnd}this.strictModeUpdate(),this.updateInput(),this.popupUpdate(),this.changeTrigger(e),this.errorClass(),this.enableMask&&(this.inputElement.selectionStart=i,this.inputElement.selectionEnd=s),e.action==="tab"&&e.target===this.inputElement&&this.isCalendar()&&document.activeElement===this.inputElement&&(e.preventDefault(),this.headerTitleElement.focus()),e.action==="shiftTab"&&e.target===this.inputElement&&this.isCalendar()&&document.activeElement===this.inputElement&&this.hide(e);break}default:this.defaultAction(e),e.action==="select"&&t===this.depth&&this.hide(e)}},l.prototype.defaultAction=function(e){this.previousDate=!u(this.value)&&new Date(+this.value)||null,this.isCalendar()&&(d.prototype.keyActionHandle.call(this,e),this.isCalendar()&&W(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()}))},l.prototype.popupUpdate=function(){if((u(this.value)&&!u(this.previousDate)||this.getModuleName()!=="datetimepicker"&&+this.value!=+this.previousDate||this.getModuleName()==="datetimepicker"&&+this.value!=+this.previousDateTime)&&(this.popupObj&&this.popupObj.element.querySelectorAll("."+kt).length>0&&C(this.popupObj.element.querySelectorAll("."+kt),[kt]),!u(this.value)&&+this.value>=+this.min&&+this.value<=+this.max)){var e=new Date(this.checkValue(this.value));d.prototype.navigateTo.call(this,"Month",e)}},l.prototype.strictModeUpdate=function(){var e,t=/^y/,i=/[^a-zA-Z]/,s;if(this.getModuleName()==="datetimepicker"?e=u(this.formatString)?this.dateTimeFormat:this.formatString:(!t.test(this.formatString)||i.test(this.formatString))&&(e=u(this.formatString)?this.formatString:this.formatString.replace("dd","d")),u(e))e=this.formatString;else{var a=e.split("M").length-1;a<3&&(e=e.replace("MM","M"))}var r;this.getModuleName()==="datetimepicker"?this.calendarMode==="Gregorian"?r={format:u(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:r={format:u(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:(this.calendarMode==="Gregorian"?s={format:e,type:"dateTime",skeleton:"yMd"}:s={format:e,type:"dateTime",skeleton:"yMd",calendar:"islamic"},r=s);var n;if(typeof this.inputElement.value=="string"&&(this.inputElement.value=this.inputElement.value.trim()),this.getModuleName()==="datetimepicker")if(this.checkDateValue(this.globalize.parseDate(this.inputElement.value,r))){var h=this.inputElement.value.replace(/(am|pm|Am|aM|pM|Pm)/g,function(p){return p.toLocaleUpperCase()});n=this.globalize.parseDate(h,r)}else this.calendarMode==="Gregorian"?s={format:e,type:"dateTime",skeleton:"yMd"}:s={format:e,type:"dateTime",skeleton:"yMd",calendar:"islamic"},n=this.globalize.parseDate(this.inputElement.value,s);else n=this.globalize.parseDate(this.inputElement.value,r),n=!u(n)&&isNaN(+n)?null:n,!u(this.formatString)&&this.inputElement.value!==""&&this.strictMode&&(this.isPopupClicked||!this.isPopupClicked&&this.inputElement.value===this.previousElementValue)&&this.formatString.indexOf("y")===-1&&n.setFullYear(this.value.getFullYear());this.getModuleName()==="datepicker"&&this.value&&!isNaN(+this.value)&&n&&n.setHours(this.value.getHours(),this.value.getMinutes(),this.value.getSeconds(),this.value.getMilliseconds()),this.strictMode&&n?(this.updateInputValue(this.globalize.formatDate(n,r)),this.inputElement.value!==this.previousElementValue&&this.setProperties({value:n},!0)):this.strictMode||this.inputElement.value!==this.previousElementValue&&this.setProperties({value:n},!0),this.strictMode&&!n&&this.inputElement.value===(this.enableMask?this.maskedDateValue:"")&&this.setProperties({value:null},!0),isNaN(+this.value)&&this.setProperties({value:null},!0),u(this.value)&&(this.currentDate=new Date(new Date().setHours(0,0,0,0)))},l.prototype.createCalendar=function(){var e=this;this.popupWrapper=this.createElement("div",{className:""+bt+" "+ls,id:this.inputElement.id+"_options"}),this.popupWrapper.setAttribute("aria-label",this.element.id),this.popupWrapper.setAttribute("role","dialog"),u(this.cssClass)||(this.popupWrapper.className+=" "+this.cssClass),A.isDevice&&(this.modelHeader(),this.modal=this.createElement("div"),this.modal.className=""+bt+" e-date-modal",document.body.className+=" "+rs,this.modal.style.display="block",document.body.appendChild(this.modal)),this.calendarElement.querySelector("table tbody").className="",this.popupObj=new si(this.popupWrapper,{content:this.calendarElement,relateTo:A.isDevice?document.body:this.inputWrapper.container,position:A.isDevice?{X:"center",Y:"center"}:this.enableRtl?{X:"right",Y:"bottom"}:{X:"left",Y:"bottom"},offsetY:ka,targetType:"container",enableRtl:this.enableRtl,zIndex:this.zIndex,collision:A.isDevice?{X:"fit",Y:"fit"}:this.enableRtl?{X:"fit",Y:"flip"}:{X:"flip",Y:"flip"},open:function(){A.isDevice&&e.fullScreenMode&&(e.iconRight=parseInt(window.getComputedStyle(e.calendarElement.querySelector(".e-header.e-month .e-prev")).marginRight,10)>16,e.touchModule=new As(e.calendarElement.querySelector(".e-content.e-month"),{swipe:e.CalendarSwipeHandler.bind(e)}),y.add(e.calendarElement.querySelector(".e-content.e-month"),"touchstart",e.TouchStartHandler,e)),e.getModuleName()!=="datetimepicker"&&document.activeElement!==e.inputElement&&(e.defaultKeyConfigs=ie(e.defaultKeyConfigs,e.keyConfigs),e.calendarElement.children[1].firstElementChild.focus(),e.calendarKeyboardModules=new ye(e.calendarElement.children[1].firstElementChild,{eventName:"keydown",keyAction:e.calendarKeyActionHandle.bind(e),keyConfigs:e.defaultKeyConfigs}),e.calendarKeyboardModules=new ye(e.inputWrapper.container.children[e.index],{eventName:"keydown",keyAction:e.calendarKeyActionHandle.bind(e),keyConfigs:e.defaultKeyConfigs}))},close:function(){e.isDateIconClicked&&e.inputWrapper.container.children[e.index].focus(),e.value&&e.disabledDates(),e.popupObj&&e.popupObj.destroy(),e.resetCalendar(),I(e.popupWrapper),e.popupObj=e.popupWrapper=null,e.preventArgs=null,e.calendarKeyboardModules=null,e.setAriaAttributes()},targetExitViewport:function(){A.isDevice||e.hide()}}),this.popupObj.element.className+=" "+this.cssClass,this.setAriaAttributes()},l.prototype.CalendarSwipeHandler=function(e){var t=0;if(this.iconRight)switch(e.swipeDirection){case"Left":t=1;break;case"Right":t=-1;break}else switch(e.swipeDirection){case"Up":t=1;break;case"Down":t=-1;break}this.touchStart&&(t===1?this.navigateNext(e):t===-1&&this.navigatePrevious(e),this.touchStart=!1)},l.prototype.TouchStartHandler=function(e){this.touchStart=!0},l.prototype.setAriaDisabled=function(){this.enabled?(this.inputElement.setAttribute("aria-disabled","false"),this.inputElement.setAttribute("tabindex",this.tabIndex)):(this.inputElement.setAttribute("aria-disabled","true"),this.inputElement.tabIndex=-1)},l.prototype.modelHeader=function(){var e,t=this.createElement("div",{className:"e-model-header"}),i=this.createElement("h1",{className:"e-model-year"}),s=this.createElement("div"),a=this.createElement("span",{className:"e-model-day"}),r=this.createElement("span",{className:"e-model-month"});if(this.calendarMode==="Gregorian"?e={format:"y",skeleton:"dateTime"}:e={format:"y",skeleton:"dateTime",calendar:"islamic"},i.textContent=""+this.globalize.formatDate(this.value||new Date,e),this.calendarMode==="Gregorian"?e={format:"E",skeleton:"dateTime"}:e={format:"E",skeleton:"dateTime",calendar:"islamic"},a.textContent=""+this.globalize.formatDate(this.value||new Date,e)+", ",this.calendarMode==="Gregorian"?e={format:"MMM d",skeleton:"dateTime"}:e={format:"MMM d",skeleton:"dateTime",calendar:"islamic"},r.textContent=""+this.globalize.formatDate(this.value||new Date,e),this.fullScreenMode){var n=this.createElement("span",{className:"e-popup-close"});y.add(n,"mousedown touchstart",this.modelCloseHandler,this);var h=this.calendarElement.querySelector("button.e-today");s.classList.add("e-day-wrapper"),h.classList.add("e-outline"),t.appendChild(n),t.appendChild(h)}this.fullScreenMode||t.appendChild(i),s.appendChild(a),s.appendChild(r),t.appendChild(s),this.calendarElement.insertBefore(t,this.calendarElement.firstElementChild)},l.prototype.modelCloseHandler=function(e){this.hide()},l.prototype.changeTrigger=function(e){this.inputElement.value!==this.previousElementValue&&(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())&&(this.isDynamicValueChanged&&this.isCalendar()&&this.popupUpdate(),this.changedArgs.value=this.value,this.changedArgs.event=e||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=!u(e),this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",this.changedArgs),this.previousElementValue=this.inputElement.value,this.previousDate=isNaN(+new Date(this.checkValue(this.value)))?null:new Date(this.checkValue(this.value)),this.isInteracted=!0),this.isKeyAction=!1},l.prototype.navigatedEvent=function(){this.trigger("navigated",this.navigatedArgs)},l.prototype.keyupHandler=function(e){this.isKeyAction=this.inputElement.value!==this.previousElementValue},l.prototype.changeEvent=function(e){!this.isIconClicked&&!(this.isBlur||this.isKeyAction)&&this.selectCalendar(e),(this.previousDate&&this.previousDate.valueOf())!==(this.value&&this.value.valueOf())?(this.changedArgs.event=e||null,this.changedArgs.element=this.element,this.changedArgs.isInteracted=this.isInteracted,this.isDynamicValueChanged||this.trigger("change",this.changedArgs),this.previousDate=this.value&&new Date(+this.value),this.isDynamicValueChanged||this.hide(e),this.previousElementValue=this.inputElement.value,this.errorClass()):e&&this.hide(e),this.isKeyAction=!1},l.prototype.requiredModules=function(){var e=[];return this.calendarMode==="Islamic"&&e.push({args:[this],member:"islamic",name:"Islamic"}),this.enableMask&&e.push({args:[this],member:"MaskedDateTime"}),e},l.prototype.selectCalendar=function(e){var t,i,s;this.getModuleName()==="datetimepicker"?i=u(this.formatString)?this.dateTimeFormat:this.formatString:i=this.formatString,this.value&&(this.getModuleName()==="datetimepicker"?(this.calendarMode==="Gregorian"?s={format:i,type:"dateTime",skeleton:"yMd"}:s={format:i,type:"dateTime",skeleton:"yMd",calendar:"islamic"},t=this.globalize.formatDate(this.changedArgs.value,s)):(this.calendarMode==="Gregorian"?s={format:this.formatString,type:"dateTime",skeleton:"yMd"}:s={format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},t=this.globalize.formatDate(this.changedArgs.value,s)),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"})),u(t)||(this.updateInputValue(t),this.enableMask&&this.notify("setMaskSelection",{module:"MaskedDateTime"}))},l.prototype.isCalendar=function(){return!!(this.popupWrapper&&this.popupWrapper.classList.contains(""+ls))},l.prototype.setWidth=function(e){typeof e=="number"?this.inputWrapper.container.style.width=$(this.width):typeof e=="string"?this.inputWrapper.container.style.width=e.match(/px|%|em/)?this.width:$(this.width):this.inputWrapper.container.style.width="100%"},l.prototype.show=function(e,t){var i=this;if(!(this.enabled&&this.readonly||!this.enabled||this.popupObj)){var s=!0,a=void 0;!u(this.value)&&!(+this.value>=+new Date(this.checkValue(this.min))&&+this.value<=+new Date(this.checkValue(this.max)))?(a=new Date(this.checkValue(this.value)),this.setProperties({value:null},!0)):a=this.value||null,this.isCalendar()||(d.prototype.render.call(this),this.setProperties({value:a||null},!0),this.previousDate=a,this.createCalendar()),A.isDevice&&(this.mobilePopupWrapper=this.createElement("div",{className:"e-datepick-mob-popup-wrap"}),document.body.appendChild(this.mobilePopupWrapper)),this.preventArgs={preventDefault:function(){s=!1},popup:this.popupObj,event:t||null,cancel:!1,appendTo:A.isDevice?this.mobilePopupWrapper:document.body};var r=this.preventArgs;if(this.trigger("open",r,function(h){if(i.preventArgs=h,s&&!i.preventArgs.cancel){g(i.inputWrapper.buttons,Ct),i.preventArgs.appendTo.appendChild(i.popupWrapper),i.popupObj.refreshPosition(i.inputElement);var p={name:"FadeIn",duration:A.isDevice?0:Ca};i.zIndex===1e3?i.popupObj.show(new it(p),i.element):i.popupObj.show(new it(p),null),d.prototype.setOverlayIndex.call(i,i.mobilePopupWrapper,i.popupObj.element,i.modal,A.isDevice),i.setAriaAttributes()}else i.popupObj.destroy(),i.popupWrapper=i.popupObj=null;!u(i.inputElement)&&i.inputElement.value===""&&!u(i.tableBodyElement)&&i.tableBodyElement.querySelectorAll("td.e-selected").length>0&&(g([i.tableBodyElement.querySelector("td.e-selected")],Sa),C(i.tableBodyElement.querySelectorAll("td.e-selected"),kt)),y.add(document,"mousedown touchstart",i.documentHandler,i)}),A.isDevice){var n=this.createElement("div",{className:"e-dlg-overlay"});n.style.zIndex=(this.zIndex-1).toString(),this.mobilePopupWrapper.appendChild(n)}}},l.prototype.hide=function(e){var t=this;if(u(this.popupWrapper))A.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit();else{var i=!0;this.preventArgs={preventDefault:function(){i=!1},popup:this.popupObj,event:e||null,cancel:!1},C(this.inputWrapper.buttons,Ct),C([document.body],rs);var s=this.preventArgs;this.isCalendar()?this.trigger("close",s,function(a){t.closeEventCallback(i,a)}):this.closeEventCallback(i,s)}},l.prototype.closeEventCallback=function(e,t){this.preventArgs=t,this.isCalendar()&&e&&!this.preventArgs.cancel&&(this.popupObj.hide(),this.isAltKeyPressed=!1,this.keyboardModule.destroy(),C(this.inputWrapper.buttons,Ct)),this.setAriaAttributes(),A.isDevice&&this.modal&&(this.modal.style.display="none",this.modal.outerHTML="",this.modal=null),A.isDevice&&!u(this.mobilePopupWrapper)&&e&&(u(this.preventArgs)||!this.preventArgs.cancel)&&(this.mobilePopupWrapper.remove(),this.mobilePopupWrapper=null),y.remove(document,"mousedown touchstart",this.documentHandler),A.isDevice&&this.allowEdit&&!this.readonly&&this.inputElement.removeAttribute("readonly"),this.setAllowEdit()},l.prototype.focusIn=function(e){document.activeElement!==this.inputElement&&this.enabled&&(this.inputElement.focus(),g([this.inputWrapper.container],[Qt]))},l.prototype.focusOut=function(){document.activeElement===this.inputElement&&(C([this.inputWrapper.container],[Qt]),this.inputElement.blur())},l.prototype.currentView=function(){var e;return this.calendarElement&&(e=d.prototype.currentView.call(this)),e},l.prototype.navigateTo=function(e,t){this.calendarElement&&d.prototype.navigateTo.call(this,e,t)},l.prototype.destroy=function(){this.unBindEvents(),this.showClearButton&&(this.clearButton=document.getElementsByClassName("e-clear-icon")[0]),d.prototype.destroy.call(this),V.destroy({element:this.inputElement,floatLabelType:this.floatLabelType,properties:this.properties},this.clearButton),u(this.keyboardModules)||this.keyboardModules.destroy(),this.popupObj&&this.popupObj.element.classList.contains(ma)&&d.prototype.destroy.call(this);var e={"aria-atomic":"true","aria-disabled":"true","aria-expanded":"false",role:"combobox",autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false","aria-label":this.getModuleName()};this.inputElement&&(V.removeAttributes(e,this.inputElement),u(this.inputElementCopy.getAttribute("tabindex"))?this.inputElement.removeAttribute("tabindex"):this.inputElement.setAttribute("tabindex",this.tabIndex),y.remove(this.inputElement,"blur",this.inputBlurHandler),y.remove(this.inputElement,"focus",this.inputFocusHandler),this.ensureInputAttribute()),this.isCalendar()&&(this.popupWrapper&&I(this.popupWrapper),this.popupObj=this.popupWrapper=null,this.keyboardModule.destroy()),this.ngTag===null&&(this.inputElement&&(u(this.inputWrapper)||this.inputWrapper.container.insertAdjacentElement("afterend",this.inputElement),C([this.inputElement],[ga])),C([this.element],[bt]),u(this.inputWrapper)||I(this.inputWrapper.container)),this.formElement&&y.remove(this.formElement,"reset",this.resetFormHandler),this.inputWrapper=null,this.keyboardModules=null},l.prototype.ensureInputAttribute=function(){for(var e=[],t=0;t<this.inputElement.attributes.length;t++)e[t]=this.inputElement.attributes[t].name;for(var t=0;t<e.length;t++)u(this.inputElementCopy.getAttribute(e[t]))?(e[t].toLowerCase()==="value"&&(this.inputElement.value=""),this.inputElement.removeAttribute(e[t])):(e[t].toLowerCase()==="value"&&(this.inputElement.value=this.inputElementCopy.getAttribute(e[t])),this.inputElement.setAttribute(e[t],this.inputElementCopy.getAttribute(e[t])))},l.prototype.preRender=function(){this.inputElementCopy=this.element.cloneNode(!0),C([this.inputElementCopy],[bt,da,ca]),this.inputElement=this.element,this.formElement=k(this.inputElement,"form"),this.index=this.showClearButton?2:1,this.ngTag=null,(this.element.tagName==="EJS-DATEPICKER"||this.element.tagName==="EJS-DATETIMEPICKER")&&(this.ngTag=this.element.tagName,this.inputElement=this.createElement("input"),this.element.appendChild(this.inputElement)),this.element.getAttribute("id")?this.ngTag!==null&&(this.inputElement.id=this.element.getAttribute("id")+"_input"):this.getModuleName()==="datetimepicker"?(this.element.id=de("ej2-datetimepicker"),this.ngTag!==null&&W(this.inputElement,{id:this.element.id+"_input"})):(this.element.id=de("ej2-datepicker"),this.ngTag!==null&&W(this.inputElement,{id:this.element.id+"_input"})),this.ngTag!==null&&this.validationAttribute(this.element,this.inputElement),this.updateHtmlAttributeToElement(),this.defaultKeyConfigs=this.getDefaultKeyConfig(),this.checkHtmlAttributes(!1),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex"),d.prototype.preRender.call(this)},l.prototype.getDefaultKeyConfig=function(){return this.defaultKeyConfigs={altUpArrow:"alt+uparrow",altDownArrow:"alt+downarrow",escape:"escape",enter:"enter",controlUp:"ctrl+38",controlDown:"ctrl+40",moveDown:"downarrow",moveUp:"uparrow",moveLeft:"leftarrow",moveRight:"rightarrow",select:"enter",home:"home",end:"end",pageUp:"pageup",pageDown:"pagedown",shiftPageUp:"shift+pageup",shiftPageDown:"shift+pagedown",controlHome:"ctrl+home",controlEnd:"ctrl+end",shiftTab:"shift+tab",tab:"tab"},this.defaultKeyConfigs},l.prototype.validationAttribute=function(e,t){var i=e.getAttribute("name")?e.getAttribute("name"):e.getAttribute("id");t.setAttribute("name",i),e.removeAttribute("name");for(var s=["required","aria-required","form"],a=0;a<s.length;a++)if(!u(e.getAttribute(s[a]))){var r=e.getAttribute(s[a]);t.setAttribute(s[a],r),e.removeAttribute(s[a])}},l.prototype.checkFormat=function(){var e=new ue(this.locale);if(this.format)if(typeof this.format=="string")this.formatString=this.format;else if(this.format.skeleton!==""&&!u(this.format.skeleton)){var t=this.format.skeleton;this.getModuleName()==="datetimepicker"?this.formatString=e.getDatePattern({skeleton:t,type:"dateTime"}):this.formatString=e.getDatePattern({skeleton:t,type:"date"})}else this.getModuleName()==="datetimepicker"?this.formatString=this.dateTimeFormat:this.formatString=null;else this.formatString=null},l.prototype.checkHtmlAttributes=function(e){this.globalize=new ue(this.locale),this.checkFormat(),this.checkView();var t=e?u(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["value","min","max","disabled","readonly","style","name","placeholder","type"],i;this.getModuleName()==="datetimepicker"?this.calendarMode==="Gregorian"?i={format:u(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}:i={format:u(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}:this.calendarMode==="Gregorian"?i={format:this.formatString,type:"dateTime",skeleton:"yMd"}:i={format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"};for(var s=0,a=t;s<a.length;s++){var r=a[s];if(!u(this.inputElement.getAttribute(r)))switch(r){case"disabled":if(u(this.datepickerOptions)||this.datepickerOptions.enabled===void 0||e){var n=!(this.inputElement.getAttribute(r)==="disabled"||this.inputElement.getAttribute(r)===""||this.inputElement.getAttribute(r)==="true");this.setProperties({enabled:n},!e)}break;case"readonly":if(u(this.datepickerOptions)||this.datepickerOptions.readonly===void 0||e){var h=this.inputElement.getAttribute(r)==="readonly"||this.inputElement.getAttribute(r)===""||this.inputElement.getAttribute(r)==="true";this.setProperties({readonly:h},!e)}break;case"placeholder":(u(this.datepickerOptions)||this.datepickerOptions.placeholder===void 0||e)&&this.setProperties({placeholder:this.inputElement.getAttribute(r)},!e);break;case"style":this.inputElement.setAttribute("style",""+this.inputElement.getAttribute(r));break;case"name":this.inputElement.setAttribute("name",""+this.inputElement.getAttribute(r));break;case"value":if(u(this.datepickerOptions)||this.datepickerOptions.value===void 0||e){var p=this.inputElement.getAttribute(r);this.setProperties(Q(r,this.globalize.parseDate(p,i),{}),!e)}break;case"min":if(+this.min==+new Date(1900,0,1)||e){var o=this.inputElement.getAttribute(r);this.setProperties(Q(r,this.globalize.parseDate(o),{}),!e)}break;case"max":if(+this.max==+new Date(2099,11,31)||e){var f=this.inputElement.getAttribute(r);this.setProperties(Q(r,this.globalize.parseDate(f),{}),!e)}break;case"type":this.inputElement.getAttribute(r)!=="text"&&this.inputElement.setAttribute("type","text");break}}},l.prototype.getModuleName=function(){return"datepicker"},l.prototype.disabledDates=function(e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var i,s,a=this.checkDateValue(this.value)?new Date(+this.value):new Date(this.checkValue(this.value)),r=this.previousDate;this.minMaxUpdates(),(!e||e&&!u(this.renderDayCell))&&d.prototype.render.call(this),this.previousDate=r;var n=a&&+a,h='*[id^="/id"]'.replace("/id",""+n);this.strictMode||(typeof this.value=="string"||typeof this.value=="object"&&+this.value!=+a)&&this.setProperties({value:a},!0),!u(this.calendarElement)&&!u(this.calendarElement.querySelectorAll(h)[0])&&this.calendarElement.querySelectorAll(h)[0].classList.contains("e-disabled")&&(this.strictMode||(this.currentDate=new Date(new Date().setHours(0,0,0,0))));var p;this.getModuleName()==="datetimepicker"?(this.calendarMode==="Gregorian"?s=this.globalize.formatDate(a,{format:u(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd"}):s=this.globalize.formatDate(a,{format:u(this.formatString)?this.dateTimeFormat:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"}),p=s):(this.calendarMode==="Gregorian"?i={format:this.formatString,type:"dateTime",skeleton:"yMd"}:i={format:this.formatString,type:"dateTime",skeleton:"yMd",calendar:"islamic"},p=this.globalize.formatDate(a,i)),this.popupObj||(this.updateInputValue(p),this.enableMask&&(this.updateInputValue(this.maskedDateValue),this.notify("createMask",{module:"MaskedDateTime",isBlur:t})))},l.prototype.setAriaAttributes=function(){this.isCalendar()?(V.addAttributes({"aria-expanded":"true"},this.inputElement),W(this.inputElement,{"aria-owns":this.inputElement.id+"_options"}),W(this.inputElement,{"aria-controls":this.inputElement.id}),this.value&&W(this.inputElement,{"aria-activedescendant":""+this.setActiveDescendant()})):(V.addAttributes({"aria-expanded":"false"},this.inputElement),this.inputElement.removeAttribute("aria-owns"),this.inputElement.removeAttribute("aria-controls"),this.inputElement.removeAttribute("aria-activedescendant"))},l.prototype.errorClass=function(){var e='*[id^="/id"]'.replace("/id",""+ +this.value),t=this.calendarElement&&this.calendarElement.querySelectorAll(e)[0]&&this.calendarElement.querySelectorAll(e)[0].classList.contains("e-disabled");!u(this.value)&&!u(this.min)&&!u(this.max)&&!(new Date(this.value).setMilliseconds(0)>=new Date(this.min).setMilliseconds(0)&&new Date(this.value).setMilliseconds(0)<=new Date(this.max).setMilliseconds(0))||!this.strictMode&&this.inputElement.value!==""&&this.inputElement.value!==this.maskedDateValue&&u(this.value)||t?(g([this.inputWrapper.container],as),W(this.inputElement,{"aria-invalid":"true"})):u(this.inputWrapper)||(C([this.inputWrapper.container],as),W(this.inputElement,{"aria-invalid":"false"}))},l.prototype.onPropertyChanged=function(e,t){for(var i=0,s=Object.keys(e);i<s.length;i++){var a=s[i];switch(a){case"value":this.isDynamicValueChanged=!0,this.isInteracted=!1,this.invalidValueString=null,this.checkInvalidValue(e.value),e.value=this.value,this.previousElementValue=this.inputElement.value,u(this.value)&&(this.enableMask?this.updateInputValue(this.maskedDateValue):this.updateInputValue(""),this.currentDate=new Date(new Date().setHours(0,0,0,0))),this.updateInput(!0),+this.previousDate!=+this.value&&this.changeTrigger(null),this.isInteracted=!0,this.preventChange=this.isAngular&&this.preventChange?!this.preventChange:this.preventChange,this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"format":this.checkFormat(),this.bindInputEvent(),this.updateInput(),this.enableMask&&(this.notify("createMask",{module:"MaskedDateTime"}),this.value||this.updateInputValue(this.maskedDateValue));break;case"allowEdit":this.setAllowEdit();break;case"placeholder":V.setPlaceholder(this.placeholder,this.inputElement);break;case"readonly":V.setReadonly(this.readonly,this.inputElement);break;case"enabled":V.setEnabled(this.enabled,this.inputElement),this.setAriaDisabled();break;case"htmlAttributes":this.updateHtmlAttributeToElement(),this.updateHtmlAttributeToWrapper(),this.checkHtmlAttributes(!0);break;case"locale":this.globalize=new ue(this.locale),this.l10n.setLocale(this.locale),this.datepickerOptions&&this.datepickerOptions.placeholder==null&&(this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),V.setPlaceholder(this.placeholder,this.inputElement)),this.updateInput(),this.enableMask&&this.notify("createMask",{module:"MaskedDateTime"});break;case"enableRtl":V.setEnableRtl(this.enableRtl,[this.inputWrapper.container]);break;case"start":case"depth":this.checkView(),this.calendarElement&&d.prototype.onPropertyChanged.call(this,e,t);break;case"zIndex":this.setProperties({zIndex:e.zIndex},!0);break;case"cssClass":this.updateCssClass(e.cssClass,t.cssClass);break;case"showClearButton":V.setClearButton(this.showClearButton,this.inputElement,this.inputWrapper),this.bindClearEvent(),this.index=this.showClearButton?2:1;break;case"strictMode":this.invalidValueString=null,this.updateInput();break;case"width":this.setWidth(e.width),V.calculateWidth(this.inputElement,this.inputWrapper.container),!u(this.inputWrapper.buttons[0])&&!u(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"floatLabelType":this.floatLabelType=e.floatLabelType,V.removeFloating(this.inputWrapper),V.addFloating(this.inputElement,this.floatLabelType,this.placeholder),!u(this.inputWrapper.buttons[0])&&!u(this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0])&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"enableMask":this.enableMask?(this.notify("createMask",{module:"MaskedDateTime"}),this.updateInputValue(this.maskedDateValue),this.bindInputEvent()):this.inputElement.value===this.maskedDateValue&&this.updateInputValue("");break;default:this.calendarElement&&this.isCalendar()&&d.prototype.onPropertyChanged.call(this,e,t);break}this.isDynamicValueChanged||this.hide(null),this.isDynamicValueChanged=!1}},z([m(null)],l.prototype,"width",void 0),z([m(null)],l.prototype,"value",void 0),z([m(null)],l.prototype,"cssClass",void 0),z([m(!1)],l.prototype,"strictMode",void 0),z([m(null)],l.prototype,"format",void 0),z([m(!0)],l.prototype,"enabled",void 0),z([m(!1)],l.prototype,"fullScreenMode",void 0),z([m({})],l.prototype,"htmlAttributes",void 0),z([m(null)],l.prototype,"values",void 0),z([m(!1)],l.prototype,"isMultiSelection",void 0),z([m(!0)],l.prototype,"showClearButton",void 0),z([m(!0)],l.prototype,"allowEdit",void 0),z([m(null)],l.prototype,"keyConfigs",void 0),z([m(!1)],l.prototype,"enablePersistence",void 0),z([m(1e3)],l.prototype,"zIndex",void 0),z([m(!1)],l.prototype,"readonly",void 0),z([m(null)],l.prototype,"placeholder",void 0),z([m("Never")],l.prototype,"floatLabelType",void 0),z([m(null)],l.prototype,"serverTimezoneOffset",void 0),z([m(!1)],l.prototype,"openOnFocus",void 0),z([m(!1)],l.prototype,"enableMask",void 0),z([m({day:"day",month:"month",year:"year",hour:"hour",minute:"minute",second:"second",dayOfTheWeek:"day of the week"})],l.prototype,"maskPlaceholder",void 0),z([P()],l.prototype,"open",void 0),z([P()],l.prototype,"cleared",void 0),z([P()],l.prototype,"close",void 0),z([P()],l.prototype,"blur",void 0),z([P()],l.prototype,"focus",void 0),z([P()],l.prototype,"created",void 0),z([P()],l.prototype,"destroyed",void 0),l=z([we],l),l}(ha),at=globalThis&&globalThis.__extends||function(){var d=function(l,e){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var s in i)i.hasOwnProperty(s)&&(t[s]=i[s])},d(l,e)};return function(l,e){d(l,e);function t(){this.constructor=l}l.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),ne=globalThis&&globalThis.__assign||function(){return ne=Object.assign||function(d){for(var l,e=1,t=arguments.length;e<t;e++){l=arguments[e];for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&(d[i]=l[i])}return d},ne.apply(this,arguments)},B=globalThis&&globalThis.__decorate||function(d,l,e,t){var i=arguments.length,s=i<3?l:t===null?t=Object.getOwnPropertyDescriptor(l,e):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(d,l,e,t);else for(var r=d.length-1;r>=0;r--)(a=d[r])&&(s=(i<3?a(s):i>3?a(l,e,s):a(l,e))||s);return i>3&&s&&Object.defineProperty(l,e,s),s};(function(d){at(l,d);function l(){return d!==null&&d.apply(this,arguments)||this}return B([m(null)],l.prototype,"field",void 0),B([m(null)],l.prototype,"label",void 0),B([m(null)],l.prototype,"type",void 0),B([m(null)],l.prototype,"values",void 0),B([m(null)],l.prototype,"operators",void 0),B([m()],l.prototype,"ruleTemplate",void 0),B([m(null)],l.prototype,"template",void 0),B([m({isRequired:!0,min:0,max:Number.MAX_VALUE})],l.prototype,"validation",void 0),B([m(null)],l.prototype,"format",void 0),B([m(null)],l.prototype,"step",void 0),B([m(null)],l.prototype,"value",void 0),B([m(null)],l.prototype,"category",void 0),B([m(null)],l.prototype,"columns",void 0),l})(je);var wa=function(d){at(l,d);function l(){return d!==null&&d.apply(this,arguments)||this}return B([m(null)],l.prototype,"condition",void 0),B([Os([],l)],l.prototype,"rules",void 0),B([m(null)],l.prototype,"field",void 0),B([m(null)],l.prototype,"label",void 0),B([m(null)],l.prototype,"type",void 0),B([m(null)],l.prototype,"operator",void 0),B([m(null)],l.prototype,"value",void 0),B([m(!1)],l.prototype,"not",void 0),B([m(!1)],l.prototype,"isLocked",void 0),l}(je);(function(d){at(l,d);function l(){return d!==null&&d.apply(this,arguments)||this}return B([m(null)],l.prototype,"numericTextBoxModel",void 0),B([m(null)],l.prototype,"multiSelectModel",void 0),B([m(null)],l.prototype,"datePickerModel",void 0),B([m(null)],l.prototype,"textBoxModel",void 0),B([m(null)],l.prototype,"radioButtonModel",void 0),l})(je);var Ea=function(d){at(l,d);function l(){return d!==null&&d.apply(this,arguments)||this}return B([m(!1)],l.prototype,"cloneRule",void 0),B([m(!1)],l.prototype,"cloneGroup",void 0),B([m(!1)],l.prototype,"lockRule",void 0),B([m(!1)],l.prototype,"lockGroup",void 0),B([m(!0)],l.prototype,"ruleDelete",void 0),B([m(!0)],l.prototype,"groupInsert",void 0),B([m(!0)],l.prototype,"groupDelete",void 0),l}(je),xa=function(d){at(l,d);function l(e,t){var i=d.call(this,e,t)||this;return i.isReadonly=!0,i.fields={text:"label",value:"field"},i.updatedRule={not:!1,condition:"and",isLocked:!1},i.isLocale=!1,i.isRefreshed=!1,i.isNotified=!1,i.isAddSuccess=!1,i.isNotValueChange=!1,i.isFieldChange=!1,i.isFieldClose=!1,i.isDestroy=!1,i.isGetNestedData=!1,i.isCustomOprCols=[],i.groupCounter=0,i.lockItems=[],i.groupIndex=-1,i.ruleIndex=-1,i.isLastGroup=!1,i.cloneGrpBtnClick=!1,i.isMiddleGroup=!1,i.cloneRuleBtnClick=!1,Gt.Inject(Ul),i}return l.prototype.getPersistData=function(){return this.addOnPersist(["rule"])},l.prototype.reset=function(){this.isImportRules=!1;for(var e=this.element.querySelector(".e-group-body"),t=this.element.querySelectorAll("input.e-control"),i=0,s=t.length;i<s;i++)t[i].className.indexOf("e-tooltip")>-1?T(t[i],"tooltip").destroy():t[i].parentElement.className.indexOf("e-tooltip")>-1&&T(t[i].parentElement,"tooltip").destroy();if(e)e.innerHTML="";else{var a=this.createElement("div",{attrs:{class:"e-group-container"}}),r=this.createElement("div",{attrs:{class:"e-group-header"}}),n=this.createElement("div",{attrs:{class:"e-group-body"}});a.appendChild(r).appendChild(n),this.element.appendChild(a),e=this.element.querySelector(".e-group-body")}this.headerTemplate&&this.isRoot&&(this.element.innerHTML="",this.isRoot=!1),this.enableNotCondition&&C(this.element.querySelectorAll(".e-qb-toggle"),"e-active-toggle"),e.appendChild(this.createElement("div",{attrs:{class:"e-rule-list"}})),this.levelColl[this.element.id+"_group0"]=[0],this.setProperties({rule:{condition:"and",not:!1,rules:[]}},!0),this.disableRuleCondition(e.parentElement)},l.prototype.getWrapper=function(){return this.element},l.prototype.getModuleName=function(){return"query-builder"},l.prototype.requiredModules=function(){var e=[];return e.push({member:"query-library",args:[this]}),e},l.prototype.GetRootColumnName=function(e){return this.separator?e.split(this.separator)[0]:e},l.prototype.initialize=function(){if(this.dataColl.length){var e=Object.keys(this.dataColl[0]),t=[],i=[],s=void 0,a=!1,r=!1,n=void 0,h={isRequired:!0,min:0,max:Number.MAX_VALUE};if(this.columns.length){this.columnSort();for(var p=this.columns,o=0,f=p.length;o<f;o++)this.updateCustomOperator(p[o],"initial"),p[o].type||(e.indexOf(p[o].field)>-1&&(n=this.dataColl[0][p[o].field],s=typeof n,s==="string"?r=!isNaN(Date.parse(n)):s==="object"&&(r=n instanceof Date&&!isNaN(n.getTime()),s="string"),p[o].type=s,r=!1),s="string"),p[o].validation||(p[o].validation=h),p[o].category?a=!0:p[o].category=this.l10n.getConstant("OtherFields"),i.indexOf(p[o].category)<0&&i.push(p[o].category),(!p[o].operators||this.isLocale&&this.isCustomOprCols.indexOf(p[o].field)!==0)&&(p[o].operators=this.customOperators[p[o].type+"Operator"]);a&&(i.length>1||i[0]!==this.l10n.getConstant("OtherFields"))&&(this.fields={text:"label",value:"field",groupBy:"category"}),this.updateSubFieldsFromColumns(this.columns)}else{for(var o=0,f=e.length;o<f;o++)n=this.dataColl[0][e[o]],s=typeof n,s==="string"?r=!isNaN(Date.parse(n)):s==="object"&&!Object.keys(n).length&&(r=n instanceof Date&&!isNaN(n.getTime()),s="string"),t[o]={field:e[o],label:e[o],type:r?"date":s,validation:h},r=!1,t[o].operators=this.customOperators[t[o].type+"Operator"],s==="object"&&this.updateSubFields(n,t[o]);this.columns=t}}else if(this.columns.length){for(var p=this.columns,o=0,f=p.length;o<f;o++)p[o].category?this.fields={text:"label",value:"field",groupBy:"category"}:p[o].category=this.l10n.getConstant("OtherFields"),this.updateCustomOperator(p[o]),(!p[o].operators||this.isLocale)&&(p[o].operators=this.customOperators[p[o].type+"Operator"]);this.updateSubFieldsFromColumns(this.columns)}this.trigger("dataBound",{type:"dataBound"})},l.prototype.updateSubFieldsFromColumns=function(e,t){for(var i=0;i<e.length;i++)this.separator!==""&&e[i].field.indexOf(this.separator)<0&&(e[i].field=t?t+this.separator+e[i].field:e[i].field),e[i].operators?this.updateCustomOperator(e[i]):e[i].type&&e[i].type!=="object"&&(e[i].operators=this.customOperators[e[i].type+"Operator"]),e[i].columns&&(e[i].type="object",this.updateSubFieldsFromColumns(e[i].columns,e[i].field))},l.prototype.updateSubFields=function(e,t,i){var s;t.columns=[];var a=Object.keys(e),r,n,h,p;i=i||this.dataColl[0];for(var o=0,f=a.length;o<f;o++){var c=t.field.split(".");i?p=i[c[c.length-1]][a[o]]:p=this.dataColl[0][t.field][a[o]];var v=i[t.field.split(this.separator)[t.field.split(this.separator).length-1]];h=typeof p,r=t.field+this.separator+a[o],n=a[o],h=h==="object"&&!isNaN(Date.parse(p))?"date":h,s={field:r,label:n,type:h},h!=="object"&&(s.operators=this.customOperators[h+"Operator"]),t.columns.push(s),h==="object"&&this.updateSubFields(p,s,v)}},l.prototype.updateCustomOperator=function(e,t){if(e.operators){!this.isLocale&&t==="initial"&&!u(this.isCustomOprCols)&&this.isCustomOprCols.push(e.field);for(var i=function(r){var n=Object.keys(e.operators[r]).indexOf("sqlOperator");if(n>-1){var h=e.operators[r],p=Object.keys(h),o=p.map(function(c){return h[""+c]}).join(",").split(","),f=p.indexOf("value");s.operators[o[f]]=o[n]}},s=this,a=0;a<e.operators.length;a++)i(a)}},l.prototype.focusEventHandler=function(e){this.target=e.target},l.prototype.clickEventHandler=function(e){var t=this,i=e.target,s;this.isImportRules=!1;var a;if(i.tagName==="SPAN"&&(i=i.parentElement),i.className.indexOf("e-collapse-rule")>-1){var r=new it({duration:1e3,delay:0});this.element.querySelectorAll(".e-summary-content").length<1&&this.renderSummary();var n=document.getElementById(this.element.id+"_summary_content"),h=n.querySelector(".e-summary-text");r.animate(".e-query-builder",{name:"SlideLeftIn"});var p=this.element.querySelector(".e-group-container");p.style.display="none",h.textContent=this.getSqlFromRules(this.rule),n.style.display="block",h.style.height=h.scrollHeight+"px"}if(i.tagName==="BUTTON"&&i.className.indexOf("e-qb-toggle")<0)switch(!0){case i.className.indexOf("e-removerule")>-1:this.actionButton=i,this.deleteRule(i);break;case i.className.indexOf("e-clone-rule-btn")>-1:this.actionButton=i,this.cloneRuleBtnClick=!0,this.ruleClone(i);break;case i.className.indexOf("e-lock-rule-btn")>-1:this.actionButton=i,this.ruleLock(i);break;case i.className.indexOf("e-lock-grp-btn")>-1:this.actionButton=i,this.groupLock(i);break;case i.className.indexOf("e-clone-grp-btn")>-1:this.actionButton=i,this.cloneGrpBtnClick=!0,this.groupClone(k(i,".e-group-container"));break;case i.className.indexOf("e-deletegroup")>-1:this.actionButton=i,this.deleteGroup(k(i,".e-group-container"));break;case i.className.indexOf("e-edit-rule")>-1:var r=new it({duration:1e3,delay:0});if(r.animate(".e-query-builder",{name:"SlideLeftIn"}),document.getElementById(this.element.id+"_summary_content").style.display="none",this.element.querySelectorAll(".e-group-container").length<1){this.addGroupElement(!1,this.element,this.rule.condition,!1,this.rule.not);var o=ie({},this.rule,{},!0);this.setGroupRules(o),this.renderSummaryCollapse()}else{var p=this.element.querySelector(".e-group-container");p.querySelectorAll(".e-collapse-rule").length<1&&this.renderSummaryCollapse(),p.style.display="block"}break}else if(i.tagName==="LABEL"&&i.parentElement.className.indexOf("e-btn-group")>-1||i.className.indexOf("e-qb-toggle")>-1){var f=k(i,".e-group-container");if(!this.headerTemplate){var c=i.getAttribute("for"),v=void 0;c&&(v=document.getElementById(c).getAttribute("value")),a=f.id.replace(this.element.id+"_","");var S=this.getGroup(a),b=void 0;if(this.enableNotCondition)if(i.className.indexOf("e-qb-toggle")>-1){var w=f.getElementsByClassName("e-qb-toggle")[0];w.className.indexOf("e-active-toggle")>-1?(C([w],"e-active-toggle"),b=!1):(g([w],"e-active-toggle"),b=!0),v=S.condition}else b=S.not;s={groupID:a,cancel:!1,type:"condition",value:v.toLowerCase()},this.enableNotCondition&&(s={groupID:a,cancel:!1,type:"condition",value:v.toLowerCase(),not:b})}this.isImportRules?this.beforeSuccessCallBack(s,i):this.trigger("beforeChange",s,function(x){t.beforeSuccessCallBack(x,i)}),this.target=i}},l.prototype.beforeSuccessCallBack=function(e,t){if(!e.cancel){var i=k(t,".e-group-container"),s=i.id.replace(this.element.id+"_",""),a=this.getValidRules(this.rule),r=this.getParentGroup(i);r.condition=e.value,this.enableNotCondition&&(r.not=e.not),this.isImportRules||this.trigger("change",{groupID:s,type:"condition",value:r.condition}),this.filterRules(a,this.getValidRules(this.rule),"condition")}},l.prototype.selectBtn=function(e,t){t.name==="beforeOpen"?this.showButtons.groupInsert||u(this.showButtons.groupInsert)?(this.element.querySelectorAll(".e-group-container").length>=this.maxGroupCount+1?g([t.element.querySelector("li span.e-addgroup").parentElement],"e-button-hide"):C([t.element.querySelector("li span.e-addgroup").parentElement],"e-button-hide"),this.enableRtl&&g([t.element.querySelector("li").parentElement],"e-rtl")):g([t.element.querySelector("li span.e-addgroup").parentElement],"e-button-hide"):t.element.children[0].className.indexOf("e-addrule")>-1?this.addRuleElement(k(e,".e-group-container"),{}):t.element.children[0].className.indexOf("e-addgroup")>-1&&this.addGroupElement(!0,k(e,".e-group-container"),"",!0)},l.prototype.appendRuleElem=function(e,t,i,s,a,r){var n,h,p=e.querySelector(".e-rule-list"),o;if(i==="change"?n=X("#"+s,e):(n=this.createElement("div",{attrs:{class:"e-rule-container"}}),n.setAttribute("id",e.id+"_rule"+this.ruleIdCounter),this.showButtons.cloneRule&&this.cloneRuleBtnClick?(this.ruleIndex<0?p.appendChild(n):p.insertBefore(n,p.children[this.ruleIndex+1]),this.cloneRuleBtnClick=!1):p.appendChild(n),this.ruleIdCounter++),t&&t.ruleTemplate&&r){o={requestType:"template-initialize",ruleID:n.id,action:a,fields:this.fields,rule:r},this.trigger("actionBegin",o),this.ruleTemplateFn=this.templateParser(t.ruleTemplate);var f=this.element.id+t.field,c=void 0;if(o.fields=this.fields,o.columns=this.columns,r.field===""&&(r.field=t.field),o.operators=this.getOperators(r.field),o.operatorFields={text:"key",value:"value"},this.isReact)c=this.ruleTemplateFn(o,this,n.id,f)[0],h=c,h.className+=" e-rule-field",n.appendChild(h);else if(this.isAngular){var v=this.ruleTemplateFn(o,this,n.id,f);c=v[0].nodeType===3?v[1]:v[0],h=c,h.className+=" e-rule-field",n.appendChild(h)}else this.isVue3?(c=this.ruleTemplateFn(o,this,"Template",f),h=c,Z(h,n),n.children[n.children.length-1].className+=" e-rule-field"):(c=this.ruleTemplateFn(o,this,"Template",f)[0],h=c,h.className+=" e-rule-field",n.appendChild(h))}else h=this.ruleElem.querySelector(".e-rule-field").cloneNode(!0),n.appendChild(h);return this.showButtons.lockGroup&&C(n.querySelectorAll(".e-lock-grp-btn"),"e-button-hide"),this.showButtons.lockRule&&C(n.querySelectorAll(".e-lock-rule-btn"),"e-button-hide"),this.showButtons.cloneGroup&&C(n.querySelectorAll(".e-clone-grp-btn"),"e-button-hide"),this.showButtons.cloneRule&&C(n.querySelectorAll(".e-clone-rule-btn"),"e-button-hide"),this.showButtons.ruleDelete&&C(n.querySelectorAll(".e-lock-grp-btn"),"e-button-hide"),t&&t.ruleTemplate&&r&&this.renderReactTemplates(),n},l.prototype.addRuleElement=function(e,t,i,s,a,r){var n=this;if(e){var h={groupID:e.id.replace(this.element.id+"_",""),cancel:!1,type:"insertRule"};!this.isImportRules&&!this.isInitialLoad?this.trigger("beforeChange",h,function(p){n.addRuleSuccessCallBack(p,e,t,i,s,a,r)}):(this.isInitialLoad=!1,this.addRuleSuccessCallBack(h,e,t,i,s,a,r))}},l.prototype.addRuleSuccessCallBack=function(e,t,i,s,a,r,n){var h=this.element.className.indexOf("e-device")>-1?"250px":"200px",p,o=i&&i.field?this.getColumn(i.field):s||this.columns[0],f,c,v,S={label:"",field:"",type:"",operator:""};if(!e.cancel){if(o&&o.ruleTemplate&&i.field){this.selectedColumn=o,f=this.selectedColumn.operators,S={label:o.label,field:o.field,type:o.type,operator:f[0].value};var b=Object.keys(i).length?i:S;v=this.appendRuleElem(t,o,a,r,"field",b);var w={requestType:"template-create",action:"insert-rule",ruleID:v.id,fields:this.fields,rule:b};this.trigger("actionBegin",w)}else{v=this.appendRuleElem(t,o,a,r,"field"),v.querySelector(".e-filter-input").setAttribute("id",v.id+"_filterkey");var x=v.querySelector(".e-rule-delete");if(this.element.className.indexOf("e-device")>-1||this.displayMode==="Vertical")x.textContent=this.l10n.getConstant("Remove"),g([x],"e-flat"),g([x],"e-primary");else{g([x],"e-round"),g([x],"e-icon-btn"),x.setAttribute("title",this.l10n.getConstant("DeleteRule"));var E=this.createElement("span",{attrs:{class:"e-btn-icon e-icons e-delete-icon"}});v.querySelector(".e-rule-delete").appendChild(E)}this.showButtons.ruleDelete||x.classList.add("e-button-hide")}if(this.displayMode==="Vertical"||this.element.className.indexOf("e-device")>-1?v.className="e-rule-container e-vertical-mode":v.className="e-rule-container e-horizontal-mode",v.previousElementSibling&&v.previousElementSibling.className.indexOf("e-rule-container")>-1&&(v.className.indexOf("e-joined-rule")<0&&(v.className+=" e-joined-rule"),v.previousElementSibling.className.indexOf("e-prev-joined-rule")<0&&(v.previousElementSibling.className+=" e-prev-joined-rule")),v.previousElementSibling&&v.previousElementSibling.className.indexOf("e-group-container")>-1&&v.className.indexOf("e-separate-rule")<0&&(v.className+=" e-separate-rule"),this.isImportRules||this.updateAddedRule(t,i,S,n,r),!o||o&&!o.ruleTemplate||!i.field)if(this.fieldMode==="Default"){var N=void 0,R=void 0;this.separator&&i.field?R=this.GetRootColumnName(i.field):this.autoSelectField?R=this.GetRootColumnName(i.field):R=this.isImportRules?this.GetRootColumnName(i.field):i.field,N={dataSource:this.columns,fields:this.fields,placeholder:this.l10n.getConstant("SelectField"),popupHeight:this.columns.length>5?h:"auto",close:this.fieldClose.bind(this,v.id+"_filterkey"),change:this.changeField.bind(this),value:i?R:null,open:this.popupOpen.bind(this,!0),cssClass:"qb-dropdownlist"},this.fieldModel&&(N=ne({},N,this.fieldModel)),c=new ot(N),c.appendTo("#"+v.id+"_filterkey");var F=void 0;this.separator&&i.field?F=this.GetRootColumnName(i.field):F=this.isImportRules?this.GetRootColumnName(i.field):c.value,this.selectedColumn=c.getDataByValue(F),Object.keys(i).length&&this.changeRule(i,{element:c.element,itemData:this.selectedColumn})}else{var N=void 0,R=(this.isImportRules,i.field);this.dummyDropdownTreeDs=ie([],this.columns,[],!0),this.updateDropdowntreeDS(this.dummyDropdownTreeDs),N={fields:{dataSource:this.dummyDropdownTreeDs,value:"field",text:"label",child:"columns",expanded:"expanded",selectable:"selectable"},placeholder:this.l10n.getConstant("SelectField"),showClearButton:!1,popupHeight:this.columns.length>5?h:"auto",changeOnBlur:!1,change:this.changeField.bind(this),value:u(R)?null:[R],open:this.popupOpen.bind(this,!1),treeSettings:{expandOn:"Click"},cssClass:"e-qb-ddt"},this.fieldModel&&(N=ne({},N,this.fieldModel));var H=new ml(N);if(H.appendTo("#"+v.id+"_filterkey"),!u(H.value)){var ae=this.getLabelFromColumn(H.value[0]);H.element.value=ae}var F=u(i.field)?H.value:this.GetRootColumnName(i.field);this.selectedColumn=this.getColumn(F),Object.keys(i).length&&this.changeRule(i,{element:H.element,itemData:this.selectedColumn})}p=v.id.replace(this.element.id+"_",""),this.isImportRules||this.trigger("change",{groupID:t.id.replace(this.element.id+"_",""),ruleID:p,type:"insertRule"})}},l.prototype.updateDropdowntreeDS=function(e){for(var t=0;t<e.length;t++)e[parseInt(t.toString(),10)].type==="object"&&(e[parseInt(t.toString(),10)].selectable=!1,this.updateDropdowntreeDS(e[parseInt(t.toString(),10)].columns))},l.prototype.updateAddedRule=function(e,t,i,s,a){var r,n=0,h,p;if(s){for(r=X("#"+a,e),h=k(e,".e-group-container"),p=this.getParentGroup(h);r&&r.previousElementSibling!==null;)r=r.previousElementSibling,n++;p.rules[n]=t}else{h=k(e,".e-group-container"),p=this.getParentGroup(h);var o=t.custom;Object.keys(t).length?this.ruleIndex<0?(p.rules.push({field:t.field,type:t.type,label:t.label,operator:t.operator,value:t.value}),o&&(p.rules[p.rules.length-1].custom=o)):(p.rules.splice(this.ruleIndex+1,0,{field:t.field,type:t.type,label:t.label,operator:t.operator,value:t.value}),o&&(p.rules[this.ruleIndex+1].custom=o)):(o&&(i.custom=o),this.autoSelectField&&(t.field=i.field=this.rule.rules[0].field),p.rules.push(i))}this.disableRuleCondition(e,p)},l.prototype.changeRuleTemplate=function(e,t){var i=this.selectedColumn.operators;if(!e.ruleTemplate){var s=k(t,".e-group-container"),a=k(t,".e-rule-container").id;if(this.previousColumn&&this.previousColumn.ruleTemplate&&(I(t.closest('[id="'+a+'"]').querySelector(".e-rule-field")),this.clearQBTemplate([a])),e){var r={field:e.field,label:e.label,operator:i[0].value,value:""};this.addRuleElement(s,r,e,"change",a,!0)}}},l.prototype.renderToolTip=function(e){var t=new Fs({content:this.l10n.getConstant("ValidationMessage"),isSticky:!0,position:"BottomCenter",cssClass:"e-querybuilder-error",afterClose:function(){t.destroy()},beforeOpen:function(i){var s=i.element.querySelector(".e-tooltip-close");s&&(s.style.display="none")}});t.appendTo(e),t.open(e)},l.prototype.validateFields=function(){var e=!0,t;if(this.allowValidation){var i=["isnull","isnotnull","isempty","isnotempty"],s=void 0,a=void 0,r=void 0,n=void 0,h=[],p=void 0,o=void 0,f=void 0,c=void 0,v=void 0,S=this.element.querySelectorAll(".e-rule-container");for(s=0,a=S.length;s<a;s++){var b=void 0;if(p=k(S[s],".e-group-container"),v=this.getParentGroup(p),o=0,n=c=S[s],this.fieldMode==="DropdownTree"?(t=T(S[s].querySelector(".e-rule-filter input.e-dropdowntree"),"dropdowntree"),t&&t.value&&t.value.length&&(this.selectedColumn=this.getColumn(t.value[0]),b=this.selectedColumn.validation)):(f=T(S[s].querySelector(".e-rule-filter input.e-dropdownlist"),"dropdownlist"),f&&f.value&&(this.selectedColumn=f.getDataByValue(f.value),b=!u(f.index)&&this.selectedColumn.validation)),r=c.querySelector(".e-rule-field input.e-control"),b&&b.isRequired){for(;n&&n.previousElementSibling!==null;)n=n.previousElementSibling,o++;if(r=c.querySelector(".e-rule-operator .e-control"),v.rules[o].operator||(r.parentElement.className.indexOf("e-tooltip")<0&&r.className.indexOf("e-tooltip")<0&&this.renderToolTip(r.parentElement),e=!1),v.rules[o].value instanceof Array&&(h=v.rules[o].value),i.indexOf(v.rules[o].operator)<-1&&u(v.rules[o].value)&&v.rules[o].type!=="date"||v.rules[o].value===""||v.rules[o].value instanceof Array&&h.length<1){var w=c.querySelectorAll(".e-rule-value .e-control");e=!1;for(var x=0,E=w.length;x<E;x++){var N=w[x],R=void 0;N.parentElement.className.indexOf("e-searcher")>-1?(R=k(N,".e-multi-select-wrapper"),R.className.indexOf("e-tooltip")<0&&this.renderToolTip(R)):w[x].parentElement.className.indexOf("e-tooltip")<0&&w[x].className.indexOf("e-tooltip")<0&&this.renderToolTip(w[x].parentElement),x++}}}else(f&&f.element&&u(f.index)||t&&t.element&&(u(t.value)||t.value.length<1))&&(r.parentElement.className.indexOf("e-tooltip")<0&&this.renderToolTip(r.parentElement),e=!1)}}return e},l.prototype.refreshLevelColl=function(){this.levelColl={};var e=this.element.querySelector(".e-group-container");if(e){this.levelColl[e.id]=[0];var t={groupElement:e,level:[0]};this.refreshLevel(t)}},l.prototype.refreshLevel=function(e){var t=e.groupElement.querySelector(".e-rule-list").children,i,s=e.groupElement,a,r=t.length,n=0;for(a=0;a<r;a++)i=t[a],i.className.indexOf("e-group-container")>-1&&(e.level.push(n),this.levelColl[i.id]=e.level.slice(),n++,e.groupElement=i,e=this.refreshLevel(e));var h=k(s,".e-rule-list");return e.groupElement=h?k(h,".e-group-container"):s,e.level=this.levelColl[e.groupElement.id].slice(),e},l.prototype.groupTemplate=function(){var e,t,i,s,a,r=this.createElement("div",{attrs:{class:"e-group-container"}}),n=this.createElement("div",{attrs:{class:"e-group-header"}}),h=this.createElement("div",{attrs:{class:"e-group-body"}}),p=this.createElement("div",{attrs:{class:"e-rule-list"}});return r.appendChild(n),h.appendChild(p),r.appendChild(h),this.headerTemplate||(e=this.createElement("div",{attrs:{class:"e-lib e-btn-group",role:"group"}}),this.enableNotCondition&&(t=this.createElement("button",{attrs:{type:"button",class:"e-qb-toggle"}}),e.appendChild(t)),t=this.createElement("input",{attrs:{type:"radio",class:"e-btngroup-and",value:"AND"}}),e.appendChild(t),i=this.createElement("label",{attrs:{class:"e-lib e-btn e-btngroup-and-lbl e-small"},innerHTML:this.l10n.getConstant("AND")}),e.appendChild(i),t=this.createElement("input",{attrs:{type:"radio",class:"e-btngroup-or",value:"OR"}}),e.appendChild(t),i=this.createElement("label",{attrs:{class:"e-lib e-btn e-btngroup-or-lbl e-small"},innerHTML:this.l10n.getConstant("OR")}),e.appendChild(i),n.appendChild(e),s=this.createElement("div",{attrs:{class:"e-group-action"}}),a=this.createElement("button",{attrs:{type:"button",class:"e-add-btn"}}),s.appendChild(a),n.appendChild(s)),r},l.prototype.ruleTemplate=function(){var e,t,i,s,a=this.createElement("div"),r=this.createElement("div",{attrs:{class:"e-rule-field"}});e=this.createElement("div",{attrs:{class:"e-rule-filter"}});var n=this.createElement("input",{attrs:{type:"text",class:"e-filter-input"}});e.appendChild(n),r.appendChild(e),e=this.createElement("div",{attrs:{class:"e-rule-operator"}}),r.appendChild(e),e=this.createElement("div",{attrs:{class:"e-rule-value"}}),r.appendChild(e),e=this.createElement("div",{attrs:{class:"e-rule-value-delete"}}),this.showButtons.cloneRule?i="e-clone-rule-btn e-clone-rule e-css e-btn e-small e-round e-icon-btn":i="e-clone-rule-btn e-clone-rule e-css e-btn e-small e-round e-icon-btn e-button-hide",this.showButtons.lockRule?s="e-lock-rule-btn e-lock-rule e-css e-btn e-small e-round e-icons e-icon-btn":s="e-lock-rule-btn e-lock-rule e-css e-btn e-small e-round e-icons e-icon-btn e-button-hide";var h=this.createElement("button",{attrs:{title:this.l10n.getConstant("CloneRule"),type:"button",class:i}}),p=this.createElement("span",{attrs:{class:"e-btn-icon e-icons e-copy"}});h.appendChild(p);var o=this.createElement("button",{attrs:{title:this.l10n.getConstant("LockRule"),type:"button",class:s}});p=this.createElement("span",{attrs:{class:"e-btn-icon e-icons e-unlock"}}),o.appendChild(p),this.showButtons.ruleDelete||u(this.showButtons.ruleDelete)?t="e-removerule e-rule-delete e-css e-btn e-small":t="e-removerule e-rule-delete e-css e-btn e-small e-button-hide";var f=this.createElement("button",{attrs:{type:"button",class:t}});return e.appendChild(h),e.appendChild(o),e.appendChild(f),r.appendChild(e),a.appendChild(r),a},l.prototype.addGroupElement=function(e,t,i,s,a,r,n){var h=this,p={groupID:t.id.replace(this.element.id+"_",""),cancel:!1,type:"insertGroup"};!this.isImportRules&&!this.isInitialLoad?this.trigger("beforeChange",p,function(o){h.addGroupSuccess(o,e,t,i,s,a,r,n)}):(this.isInitialLoad=!1,this.addGroupSuccess(p,e,t,i,s,a,r,n))},l.prototype.addGroupSuccess=function(e,t,i,s,a,r,n,h){if(!e.cancel&&this.element.querySelectorAll(".e-group-container").length<=this.maxGroupCount){var p=i,o=void 0,f="";p.className.indexOf("e-group-container")<0?f=p.querySelector(".e-group-container")&&p.querySelector(".e-group-container").id:f=p.id;var c=this.groupElem.cloneNode(!0);if(c.setAttribute("id",this.element.id+"_group"+this.groupIdCounter),this.headerTemplate&&(n?(t=!1,c.setAttribute("id",this.element.id+"_group0"),this.headerTemplateFn(c,r,s,h,f),this.groupIdCounter=0):this.headerTemplateFn(c,r,s,h,f)),this.groupIdCounter++,!this.headerTemplate){var v=c.querySelector(".e-btngroup-and"),S=c.querySelector(".e-btngroup-or"),b=c.querySelector(".e-btngroup-and-lbl"),w=c.querySelector(".e-btngroup-or-lbl");v.setAttribute("id",this.element.id+"_and"+this.btnGroupId),S.setAttribute("id",this.element.id+"_or"+this.btnGroupId),v.setAttribute("name",this.element.id+"_and"+this.btnGroupId),S.setAttribute("name",this.element.id+"_and"+this.btnGroupId),b.setAttribute("for",this.element.id+"_and"+this.btnGroupId),w.setAttribute("for",this.element.id+"_or"+this.btnGroupId),this.btnGroupId++}if(t){var x=void 0;this.showButtons.groupDelete||u(this.showButtons.groupDelete)?x="e-deletegroup":x="e-deletegroup e-button-hide",o=this.createElement("button",{attrs:{type:"button",class:x}});var E=new di({iconCss:"e-icons e-delete-icon",cssClass:"e-small e-round"});E.appendTo(o),o.setAttribute("title",this.l10n.getConstant("DeleteGroup")),He(o,{selector:".deletegroup"});for(var N=p.querySelector(".e-rule-list"),R=N.children,F=0,H=0,ae=R.length;H<ae;H++)R[H].className.indexOf("e-group-container")>-1&&(F+=1);this.showButtons.cloneGroup&&this.cloneGrpBtnClick?this.groupIndex===R.length-1?(N.appendChild(c),this.isLastGroup=!0):(R[this.groupIndex+1].parentNode.insertBefore(c,R[this.groupIndex+1]),this.isMiddleGroup=!0):N.appendChild(c);var ze=this.levelColl[p.id].slice(0);if(ze.push(F),this.levelColl[c.id]=ze,this.groupIndex>-1&&this.refreshLevelColl(),this.isImportRules||(this.isAddSuccess=!0,this.addGroups([],p.id.replace(this.element.id+"_","")),this.isAddSuccess=!1,a&&this.addRuleToNewGroups&&this.addRuleElement(c,{})),!this.headerTemplate){var se="";this.showButtons.cloneGroup?se="e-clone-grp-btn e-css e-btn e-small e-round e-icons e-icon-btn":se="e-clone-grp-btn e-css e-btn e-small e-round e-icons e-icon-btn e-button-hide";var Ge=this.createElement("button",{attrs:{title:this.l10n.getConstant("CloneGroup"),type:"button",class:se}}),Ue=this.createElement("span",{attrs:{class:"e-btn-icon e-icons e-copy"}});Ge.appendChild(Ue),c.querySelector(".e-group-action").appendChild(Ge),this.showButtons.lockGroup?se="e-lock-grp-btn e-css e-btn e-small e-round e-icons e-icon-btn":se="e-lock-grp-btn e-css e-btn e-small e-round e-icons e-icon-btn e-button-hide";var re=this.createElement("button",{attrs:{title:this.l10n.getConstant("LockGroup"),type:"button",class:se}}),_e=this.createElement("span",{attrs:{class:"e-btn-icon e-icons e-unlock"}});re.appendChild(_e),c.querySelector(".e-group-action").appendChild(re),c.querySelector(".e-group-action").appendChild(o)}}else{if(!this.headerTemplate){var se="";this.showButtons.lockGroup?se="e-lock-grp-btn e-css e-btn e-small e-round e-icons e-icon-btn":se="e-lock-grp-btn e-css e-btn e-small e-round e-icons e-icon-btn e-button-hide";var re=this.createElement("button",{attrs:{title:this.l10n.getConstant("LockGroup"),type:"button",class:se}}),Ue=this.createElement("span",{attrs:{class:"e-btn-icon e-icons e-unlock"}});re.appendChild(Ue),c.querySelector(".e-group-action").appendChild(re)}p.appendChild(c),this.levelColl[c.id]=[0]}if(this.enableNotCondition&&!this.headerTemplate){var Le=c.querySelector(".e-qb-toggle"),Ye=new di({content:this.l10n.getConstant("NOT"),cssClass:"e-btn e-small"});Ye.appendTo(Le),c.querySelector(".e-btngroup-and-lbl").classList.add("e-not"),this.updatedRule&&this.updatedRule.not&&g([Le],"e-active-toggle")}if(this.updatedRule=null,this.headerTemplate){var be={requestType:"header-template-create",ruleID:c.id,condition:s,notCondition:this.enableNotCondition?r:void 0};this.trigger("actionBegin",be)}else{var me=c.querySelector(".e-add-btn"),Be=new Rs({items:this.items,cssClass:"e-round e-small e-caret-hide e-addrulegroup",iconCss:"e-icons e-add-icon",beforeOpen:this.selectBtn.bind(this,me),select:this.selectBtn.bind(this,me)});Be.appendTo(me),me.setAttribute("title",this.l10n.getConstant("AddButton"))}if(!this.isImportRules){var xt=p.id.replace(this.element.id+"_",""),rt=c.id.replace(this.element.id+"_","");this.trigger("change",{groupID:xt,type:"insertGroup",childGroupID:rt})}}},l.prototype.headerTemplateFn=function(e,t,i,s,a){var r,n=this.element.id+"_header",h,p=e.querySelector(".e-group-header");if(this.headerTemplate){if(h={requestType:"header-template-initialize",ruleID:e.id,notCondition:this.enableNotCondition?t:void 0,condition:i,rule:this.getRuleCollection(s,!0),groupID:a},this.trigger("actionBegin",h),this.headerFn=this.templateParser(this.headerTemplate),this.isReact)r=this.headerFn(h,this,e.id,n)[0],p.appendChild(r);else if(this.isAngular){var o=this.headerFn(h,this,e.id,n);r=o[0].nodeType===3?o[1]:o[0],p.appendChild(r)}else this.isVue3?(r=this.headerFn(h,this,e.id,n),Z(r,p)):(r=this.headerFn(h,this,"Template",n)[0],p.appendChild(r));this.renderReactTemplates()}return e},l.prototype.notifyChange=function(e,t,i){var s=k(t,".e-group-container"),a=this.getParentGroup(s),r=k(t,".e-rule-container"),n=0;if(i==="not"){a.not=e;return}if(i==="condition"){a.condition=e;return}for(;r&&r.previousElementSibling!==null;)r=r.previousElementSibling,n++;var h=a.rules[n],p=this.getColumn(h.field),o=this.getFormat(p.format);if(p.type==="date"){if(e instanceof Date)e=this.intl.formatDate(e,o);else if(e instanceof Array)for(var f=0;f<e.length;f++)e[f]&&e[f]instanceof Date&&(e[f]=this.intl.formatDate(e[f],o))}p.ruleTemplate?this.templateChange(t,e,i):(this.isNotified=!0,this.updateRules(t,e),this.isNotified=!1)},l.prototype.templateChange=function(e,t,i){var s=k(e,".e-group-container"),a,r=this.getParentGroup(s),n=k(e,".e-rule-container"),h=0;for(this.allowValidation&&this.validateValue(r,n);n&&n.previousElementSibling!==null;)n=n.previousElementSibling,h++;var p=r.rules[h];i==="field"?this.selectedColumn=this.getColumn(t):p&&(this.selectedColumn=this.getColumn(p.field));var o;this.previousColumn=this.getColumn(p.field);var f=this.getValidRules(this.rule);this.selectedColumn&&(this.selectedColumn.operators?o=this.selectedColumn.operators:o=this.customOperators[this.selectedColumn.type+"Operator"]);var c=["in","notin","between","notbetween"],v;switch(i){case"field":p.field=t,p.label=this.selectedColumn.label,p.type=this.selectedColumn.type,p.value="",p.operator=o[0].value;break;case"operator":v=p.operator,p.operator=t,c.indexOf(p.operator)>-1?p.value=[]:c.indexOf(v)>-1&&(p.value="");break;case"value":p.value=t}if(this.changeRuleTemplate(this.selectedColumn,e),this.filterRules(f,this.getValidRules(this.rule),i),this.selectedColumn&&this.selectedColumn.ruleTemplate&&(i==="field"||i==="operator")){var S=k(e,".e-rule-container");this.destroyControls(S,!0),I(S.querySelector(".e-rule-field"));var b=this.appendRuleElem(k(S,".e-group-container"),this.selectedColumn,"change",S.id,i,p);this.displayMode==="Vertical"||this.element.className.indexOf("e-device")>-1?b.className="e-rule-container e-vertical-mode":b.className="e-rule-container e-horizontal-mode",b.previousElementSibling&&b.previousElementSibling.className.indexOf("e-rule-container")>-1&&(b.className.indexOf("e-joined-rule")<0&&(b.className+=" e-joined-rule"),b.previousElementSibling.className.indexOf("e-prev-joined-rule")<0&&(b.previousElementSibling.className+=" e-prev-joined-rule")),b.previousElementSibling&&b.previousElementSibling.className.indexOf("e-group-container")>-1&&b.className.indexOf("e-separate-rule")<0&&(b.className+=" e-separate-rule");var w={requestType:"template-create",action:i,ruleID:S.id,fields:this.fields,rule:p};a={groupID:s.id.replace(this.element.id+"_",""),ruleID:S.id.replace(this.element.id+"_",""),value:p.field,type:"field"},this.trigger("actionBegin",w),this.trigger("change",a)}},l.prototype.changeValue=function(e,t){var i=this,s;if(t.element&&t.element.classList.contains("e-multiselect")){var a=t;s=a.element}else t.event?s=t.event.target:s=t.element;if(s.className.indexOf("e-day")>-1||s.className.indexOf("e-today")>-1||s.className.indexOf("e-cell")>-1){var r=t;s=r.element}var n=k(s,".e-group-container"),h=k(s,".e-rule-container"),p=n&&n.id.replace(this.element.id+"_",""),o=h.id.replace(this.element.id+"_",""),f=t,c;f.element&&f.element.className.indexOf("e-datepicker")>-1&&(s=f.element,c=T(k(s,".e-rule-container").querySelector(".e-filter-input"),"dropdownlist"),c&&(this.selectedColumn=c.getDataByValue(c.value)),c=T(k(s,".e-rule-container").querySelector(".e-filter-input"),"dropdowntree"),c&&(this.selectedColumn=this.getColumn(c.value[0])));var v,S;if(s.className.indexOf("e-radio")>-1)if(S=parseInt(s.id.split("valuekey")[1],0),this.fieldMode==="Default"?(c=T(k(s,".e-rule-container").querySelector(".e-filter-input"),"dropdownlist"),this.selectedColumn=c.getDataByValue(c.value),this.selectedColumn.columns&&(c=T(k(s,".e-rule-container").querySelector(".e-rule-sub-filter .e-dropdownlist"),"dropdownlist"),this.selectedColumn=this.getColumn(c.value))):(c=T(k(s,".e-rule-container").querySelector(".e-filter-input"),"dropdowntree"),this.selectedColumn=this.getColumn(c.value[0])),this.selectedColumn.values)v=this.selectedColumn.values[S];else{var b=[!0,!1];v=b[S]}else s.className.indexOf("e-multiselect")>-1?v=T(s,"multiselect").value:v=t.value;t.name==="input"&&this.immediateModeDelay?(window.clearInterval(this.timer),this.timer=window.setInterval(function(){i.filterValue(p,o,v,e,s)},this.immediateModeDelay)):this.filterValue(p,o,v,e,s)},l.prototype.filterValue=function(e,t,i,s,a){var r=this,n={groupID:e,ruleID:t,value:i,cancel:!1,type:"value"};window.clearInterval(this.timer),this.isImportRules?this.changeValueSuccessCallBack(n,a,s,e,t):this.trigger("beforeChange",n,function(h){r.changeValueSuccessCallBack(h,a,s,e,t)})},l.prototype.changeValueSuccessCallBack=function(e,t,i,s,a){e.cancel||(this.updateRules(t,e.value,i),this.isImportRules||this.trigger("change",{groupID:s,ruleID:a,value:e.value,cancel:!1,type:"value"}))},l.prototype.fieldClose=function(e){if(!(this.isFieldChange||this.isDestroy)){this.isFieldClose=!0;var t=T(e,"dropdownlist"),i=t.popupObj.element.querySelector(".e-active"),s=t.getItemData();t.value=s.value;var a={element:t.element,value:s.value,isInteracted:!0,previousItemData:this.prevItemData,previousItem:null,item:i,itemData:s,event:null,e:null};t.previousValue!==t.value&&this.changeField(a),this.isFieldChange=!1}},l.prototype.changeField=function(e){if(e.isInteracted){if(u(e.value))return;this.isFieldChange=!0,this.prevItemData=e.itemData;var t=k(e.element,".e-rule-filter")||k(e.element,".e-rule-sub-filter"),i=this.fieldMode==="DropdownTree"?this.getColumn(e.value[0]):this.getColumn(e.value);if(this.fieldMode==="DropdownTree"&&t!==null){var s=t.querySelector(".e-dropdowntree.e-control"),a=T(s,"dropdowntree");if(i){if(i.type==="object"){if(a.value=e.oldValue,a.dataBind(),u(e.oldValue))s.value="";else{var r=this.getLabelFromColumn(e.oldValue[0]);s.value=r}return}else if(!u(e.value[0])){a.value=e.value[0],a.dataBind();var r=this.getLabelFromColumn(e.value[0]);s.value=r}}else return}if(this.destroySubFields(t),this.subFieldElem=null,this.isNotValueChange=!0,i&&i.ruleTemplate)this.templateChange(e.element,i.field,"field");else if(i&&i.columns&&i.columns[0].ruleTemplate)this.templateChange(e.element,i.columns[0].field,"field");else{for(var n=k(e.element,".e-group-container"),h=this.getParentGroup(n),p=k(e.element,".e-rule-container"),o=0;p&&p.previousElementSibling!==null;)p=p.previousElementSibling,o++;h.rules[o].value="",this.changeRule(h.rules[o],e)}}},l.prototype.changeRule=function(e,t){if(!t.itemData)if(this.fieldMode==="DropdownTree"){var i=T(t.element,"dropdowntree");if(i.value==null)return}else return;var s={},a=k(t.element,".e-rule-filter");a=a||k(t.element,".e-rule-sub-filter");var r=T(t.element,"dropdownlist");this.fieldMode==="DropdownTree"&&a!==null&&(r=T(t.element,"dropdowntree"));var n=k(t.element,".e-group-container"),h=n.id.replace(this.element.id+"_","");this.changeFilter(a,r,h,e,s,t)},l.prototype.changeFilter=function(e,t,i,s,a,r){var n=this;if(e){var h=void 0;this.fieldMode==="DropdownTree"?h=t.value[0]:h=this.isImportRules?this.GetRootColumnName(t.value):t.value,this.selectedColumn=this.getColumn(h);var p=k(e,".e-rule-container"),o=p.id.replace(this.element.id+"_",""),f={groupID:i,ruleID:o,selectedField:this.fieldMode==="DropdownTree"?t.value[0]:t.value,cancel:!1,type:"field"};this.isImportRules?this.fieldChangeSuccess(f,a,e,s,r):this.trigger("beforeChange",f,function(v){n.fieldChangeSuccess(v,a,e,s,r)})}else{var c=k(r.element,".e-rule-operator");this.changeOperator(e,c,t,i,s,a,r)}},l.prototype.changeOperator=function(e,t,i,s,a,r,n){var h=this,p,o,f;t?(p=k(t,".e-rule-container"),o=p.id.replace(this.element.id+"_",""),f={groupID:s,ruleID:o,selectedIndex:i.index,cancel:!1,type:"operator"},this.isImportRules?this.operatorChangeSuccess(f,e,r,a,n):this.trigger("beforeChange",f,function(c){h.operatorChangeSuccess(c,e,r,a,n)})):this.changeRuleValues(e,a,r,n)},l.prototype.fieldChangeSuccess=function(e,t,i,s,a){for(var r=k(i,".e-rule-container"),n=k(a.element,".e-rule-operator"),h=k(a.element,".e-group-container"),p=h.id.replace(this.element.id+"_",""),o=T(a.element,"dropdownlist"),f=r.querySelectorAll(".e-tooltip.e-input-group"),c=0;c<f.length;c++)T(f[c],"tooltip").destroy();if(e.cancel)this.changeOperator(i,n,o,p,s,t,a);else{if(u(this.selectedColumn))return;if(t.type=this.selectedColumn.type,r.querySelector(".e-template")&&(s.value=""),this.selectedColumn.type==="object"&&this.fieldMode==="Default")for(t.type=this.selectedColumn.columns[0].type;this.selectedColumn.columns;)this.createSubFields(i,s,t,a);else this.destroySubFields(i),this.changeOperator(i,n,o,p,s,t,a)}},l.prototype.destroySubFields=function(e){for(;e&&e.nextElementSibling.classList.contains("e-rule-sub-filter");)this.destroyControls(e),e.nextElementSibling.remove()},l.prototype.createSubFields=function(e,t,i,s){var a=!1,r=k(e,".e-rule-field"),n=this.createElement("div",{attrs:{class:"e-rule-sub-filter",id:"subfilter"+this.subFilterCounter}});r.insertBefore(n,r.querySelector(".e-rule-operator"));var h=k(n,".e-rule-container").id,p=this.createElement("input",{attrs:{type:"text",id:h+"_subfilterkey"+this.subFilterCounter}});n.appendChild(p);var o=this.element.className.indexOf("e-device")>-1?"250px":"200px",f=Object.keys(this.selectedColumn.columns[0]),c;c={dataSource:this.selectedColumn.columns,fields:this.fields,placeholder:this.l10n.getConstant("SelectField"),popupHeight:f.length>5?o:"auto",change:this.changeField.bind(this),index:0,open:this.popupOpen.bind(this,!1)},this.fieldModel&&(c=ne({},c,this.fieldModel));var v=new ot(c);if(v.appendTo("#"+h+"_subfilterkey"+this.subFilterCounter),this.isImportRules||this.previousColumn&&this.previousColumn.ruleTemplate&&this.GetRootColumnName(t.field)===this.GetRootColumnName(this.previousColumn.field)){for(var S=this.selectedColumn.columns,b=0;b<S.length;b++)if(t.field===S[b].field){v.value=S[b].field,this.selectedColumn=S[b],a=!0;break}}this.subFilterCounter++,this.subFieldElem=p,s.itemData=s.itemData,!a&&this.selectedColumn.columns&&(!a&&this.isImportRules&&(v.value=null),this.selectedColumn=this.selectedColumn.columns[0]),this.previousColumn=this.selectedColumn,this.selectedColumn.columns||this.changeRuleValues(n,t,i,s)},l.prototype.operatorChangeSuccess=function(e,t,i,s,a){if(!e.cancel){var r=k(a.element,".e-rule-operator"),n=r.nextElementSibling,h=T(a.element,"dropdownlist"),p=s.operator?s.operator.toString().toLowerCase():"";i.operator=h.value.toString();var o=i.operator.toLowerCase();if(i.operator.toLowerCase().indexOf("between")>-1||i.operator.toLowerCase().indexOf("in")>-1&&i.operator.toLowerCase().indexOf("contains")<0?(t=r.previousElementSibling,i.type=s.type,(i.operator.toLowerCase().indexOf("in")<0||p.indexOf("in")<0)&&(s.value=[])):typeof s.value=="object"&&s.value!==null&&(s.value=s.value.length>0?s.value[0]:s.type==="number"?0:""),a.previousItemData){var f=a.previousItemData.value.toString().toLowerCase();(f.indexOf("between")>-1||(f.indexOf("in")>-1||f.indexOf("null")>-1||f.indexOf("empty")>-1)&&f.indexOf("contains")<0)&&(t=r.previousElementSibling,i.type=s.type)}if(p.indexOf("in")>-1&&p.indexOf("in")<5&&o.indexOf("in")>-1&&o.indexOf("in")<5&&(t=null),i.operator.indexOf("null")>-1||i.operator.indexOf("empty")>-1){var c=r.parentElement.querySelector(".e-rule-value"),v=c.querySelector(".e-tooltip.e-input-group");v&&T(v,"tooltip").destroy(),C([c],"e-show"),g([c],"e-hide")}n&&this.getColumn(s.field).template&&(t=r.previousElementSibling),n.children.length==0&&(t=r.previousElementSibling),this.changeRuleValues(t,s,i,a)}},l.prototype.changeRuleValues=function(e,t,i,s){var a=k(s.element,".e-rule-operator"),r,n,h,p;if(e)if(a=e.nextElementSibling,e.classList.contains("e-rule-sub-filter")&&(i.type=this.selectedColumn.type,r=a.classList.contains("e-rule-sub-filter"),a=r?a.nextElementSibling:a),g([a],"e-operator"),a.childElementCount){n=T(a.querySelector(".e-dropdownlist"),"dropdownlist"),i.operator=n.value;var o=void 0;this.fieldMode==="DropdownTree"?o=T(e.querySelector(".e-dropdowntree"),"dropdowntree"):o=T(e.querySelector(".e-dropdownlist"),"dropdownlist"),i.type=this.fieldMode==="DropdownTree"?this.getColumn(o.value[0]).type:this.getColumn(o.value).type;var f=s.itemData;n.value!==""&&this.renderValues(a,f,s.previousItemData,!0,t,i,s.element)}else{var c=k(a,".e-rule-container").id;p=this.createElement("input",{attrs:{type:"text",id:c+"_operatorkey"}}),a.appendChild(p),this.selectedColumn.operators?h=this.selectedColumn.operators:s.itemData&&(h=this.customOperators[this.selectedColumn.type+"Operator"]);var v=this.element.className.indexOf("e-device")>-1?"250px":"200px",S=h[0].value,b=0;this.autoSelectOperator||(S="",b=-1),(this.isImportRules||this.ruleIndex>-1||this.groupIndex>-1)&&(S=t&&t.operator?t.operator:S);var w=void 0;w={dataSource:h,fields:{text:"key",value:"value"},placeholder:this.l10n.getConstant("SelectOperator"),popupHeight:h.length>5?v:"auto",change:this.changeField.bind(this),index:b,value:S,open:this.popupOpen.bind(this,!1)},this.operatorModel&&(w=ne({},w,this.operatorModel));var x=new ot(w);x.appendTo("#"+c+"_operatorkey"),i.operator=t&&t.operator!==""&&!u(t.operator)?t.operator:h[0].value,this.isImportRules&&(i.type=this.selectedColumn.type,i.operator=t.operator),!u(S)&&S!==""?this.renderValues(a,this.selectedColumn,s.previousItemData,!1,t,i,s.element):this.autoSelectField&&this.autoSelectOperator&&this.renderValues(a,this.selectedColumn,s.previousItemData,!1,t,i,s.element)}this.isImportRules||this.updateRules(s.element,s.item)},l.prototype.popupOpen=function(e,t){this.enableRtl&&g([t.popup.element],"e-rtl"),e&&(this.isFieldClose=!1)},l.prototype.destroyControls=function(e,t){for(var i=t?e:e.nextElementSibling,s=i.querySelectorAll("input.e-control"),a=i.querySelectorAll("div.e-control:not(.e-handle)"),r=this.columns,n=0,h=s.length;n<h;n++){if(s[n].classList.contains("e-textbox"))T(s[n],"textbox").destroy(),I(X("input#"+s[n].id,i));else if(s[n].classList.contains("e-dropdownlist"))this.allowValidation&&s[n].parentElement.className.indexOf("e-tooltip")>-1&&T(s[n].parentElement,"tooltip").destroy(),T(s[n],"dropdownlist").destroy();else if(s[n].classList.contains("e-radio"))T(s[n],"radio").destroy();else if(s[n].classList.contains("e-numerictextbox"))T(s[n],"numerictextbox").destroy(),I(X("input#"+s[n].id,i));else if(s[n].classList.contains("e-datepicker"))T(s[n],"datepicker").destroy();else if(s[n].classList.contains("e-multiselect"))T(s[n],"multiselect").destroy();else if(s[n].className.indexOf("e-template")>-1){for(var p=s[n].className,o=0,f=r.length;o<f;o++)if(r[o].template&&p.indexOf(r[o].field)>-1){this.templateDestroy(r[o],s[n].id);break}}document.getElementById(s[n].id)&&I(s[n])}for(var n=0,h=a.length;n<h;n++){if(a[n].className.indexOf("e-template")>-1){for(var p=a[n].className,o=0,f=r.length;o<f;o++)if(r[o].template&&p.indexOf(r[o].field)>-1){this.templateDestroy(r[o],a[n].id);break}}I(a[n])}for(var c=i.querySelectorAll(".e-template:not(.e-control)"),n=0,h=c.length;n<h;n++)I(c[n])},l.prototype.templateDestroy=function(e,t){var i;if(typeof e.template!="string"||e.template.destroy===void 0)i=e.template;else return;var s=i.destroy;if(i.destroy){var a=void 0;document.getElementById(t)&&(a=k(document.getElementById(t),".e-rule-field").querySelectorAll(".e-template")),typeof s=="string"?(s=O(s,window),s({field:e.field,elementId:t,elements:a})):i.destroy({field:e.field,elementId:t,elements:a})}},l.prototype.getValues=function(e){var t={},i=[],s,a=[];this.separator.length>0&&(a=e.split(this.separator));var r=this.dataColl;if(this.dataColl[1])for(var n=0,h=r.length;n<h;n++){var p={};if(a.length>1)for(var o=r[n],f=void 0,c=0,v=a.length;c<v;c++)f=a[c],a.length===c+1?(s=o[""+f],Number(o[""+f])===o[""+f]&&o[""+f]%1!==0&&(s=o[""+f].toString())):o=o[""+f];else s=r[n][""+e],Number(r[n][""+e])===r[n][""+e]&&r[n][""+e]%1!==0&&(s=r[n][""+e].toString());s in t||(t[""+s]=1,a.length>1?this.createNestedObject(p,a,s):p[""+e]=s,i.push(p))}return i},l.prototype.createNestedObject=function(e,t,i){for(var s,a=t.length-1,r=0;r<a;++r)s=t[r],s in e||(e[""+s]={}),e=e[""+s];e[t[a]]=i},l.prototype.getDistinctValues=function(e,t){for(var i={},s=[],a=[],r="",n=t.indexOf(this.separator),h=function(c,v){n===0?r=e[c][""+t]:(a=t.split(p.separator),a.forEach(function(b){r?r=r[""+b]:r=e[c][""+b]})),Number(e[c][""+t])===e[c][""+t]&&e[c][""+t]%1!==0&&(r=e[c][""+t].toString());var S={};r in i||(i[""+r]=1,n===0?S[""+t]=r:S[a[a.length-1]]=r,s.push(S))},p=this,o=0,f=e.length;o<f;o++)h(o);return s},l.prototype.renderMultiSelect=function(e,t,i,s,a){var r=!1,n,h=!1;this.isGetNestedData=!1,this.dataColl[1]&&Object.keys(this.dataColl[1]).indexOf(e.field)>-1&&(r=!0,n=this.getDistinctValues(this.dataColl,e.field)),r=e.columns?!1:r,!this.dataColl.length&&a.length&&(h=!0);var p=this.selectedRule.field,o=this.selectedRule.field.indexOf(this.separator);if(o!==0&&this.fieldMode!=="DropdownTree"){var f=this.selectedRule.field.split(this.separator);p=f[f.length-1]}var c;c={dataSource:h?a:r?n:this.dataManager,query:new J([e.field]),fields:{text:p,value:p},placeholder:this.l10n.getConstant("SelectValue"),value:s,mode:"CheckBox",width:"100%",change:this.changeValue.bind(this,i),close:this.closePopup.bind(this,i),actionBegin:this.multiSelectOpen.bind(this,t+"_valuekey"+i),open:this.popupOpen.bind(this,!1)},this.valueModel&&this.valueModel.multiSelectModel&&(c=ne({},c,this.valueModel.multiSelectModel));var v=new Gt(c);v.appendTo("#"+t+"_valuekey"+i),this.updateRules(v.element,s,0)},l.prototype.multiSelectOpen=function(e,t){if(this.dataSource instanceof j){var i=document.getElementById(e),s=T(k(i,".e-rule-container").querySelector(".e-filter-input"),"dropdownlist");this.selectedColumn=s.getDataByValue(s.value);var a=this.selectedColumn.field,r=!1;if(this.dataColl[1]){Object.keys(this.dataColl[1]).indexOf(a)>-1&&(r=!0);var n=a.indexOf(this.separator);n!==0&&this.isGetNestedData&&(r=!0)}r||(t.cancel=!0,this.bindMultiSelectData(i,a))}},l.prototype.bindMultiSelectData=function(e,t){this.getMultiSelectData(e,t)},l.prototype.getMultiSelectData=function(e,t){var i=this,s,a=new fi,r=this.dataManager.executeQuery(new J().select(t)),n=T(e,"multiselect");n.hideSpinner(),this.createSpinner(k(e,".e-multi-select-wrapper").parentElement),cs(k(e,".e-multi-select-wrapper").parentElement),r.then(function(h){h.actual&&h.actual.result?s=h.actual.result:s=h.result,i.dataColl=ie(i.dataColl,s,[],!0),n.dataSource=i.getDistinctValues(i.dataColl,t),i.isGetNestedData=!0,ds(k(e,".e-multi-select-wrapper").parentElement)}).catch(function(h){a.reject(h)})},l.prototype.createSpinner=function(e){var t=this.createElement("span",{attrs:{class:"e-qb-spinner"}});e.appendChild(t),ps({target:t,width:A.isDevice?"16px":"14px"})},l.prototype.closePopup=function(e,t){var i=document.getElementById(t.popup.element.id.replace("_popup",""));if(i){var s=T(i,"multiselect").value;this.updateRules(i,s,e)}},l.prototype.processTemplate=function(e,t,i,s){var a=k(e,".e-rule-container"),r=a.querySelectorAll(".e-template"),n=a.querySelector(".e-rule-filter .e-filter-input"),h=this.fieldMode==="DropdownTree"?T(n,"dropdowntree"):T(a.querySelector(".e-rule-filter .e-filter-input"),"dropdownlist"),p=this.fieldMode==="DropdownTree"?this.getColumn(h.value[0]):this.getColumn(h.value);if(typeof t.template=="string"||t.template.write===void 0){var o={rule:i,ruleID:a.id,operator:s.operator,field:p.field,requestType:"value-template-create"};this.trigger("actionBegin",o)}else{var f=t.template;typeof f.write=="string"?O(f.write,window)({elements:r.length>1?r:r[0],values:i.value,operator:s.operator,field:p.field,dataSource:p.values}):typeof t.template!="function"&&t.template.write({elements:r.length>1?r:r[0],values:i.value,operator:s.operator,field:p.field,dataSource:p.values})}},l.prototype.getItemData=function(e){var t=T(document.getElementById(e+"_filterkey"),"dropdownlist");return this.fieldMode==="DropdownTree"&&(t=T(document.getElementById(e+"_filterkey"),"dropdowntree")),this.fieldMode==="DropdownTree"?this.getColumn(t.value[0]):this.getColumn(t.value)},l.prototype.setDefaultValue=function(e,t,i){var s=this.getItemData(e);if(u(s.value))return i?t?[0,0]:0:t?[]:"";if(t){if(!(s.value instanceof Array))return[s.value]}else if(s.value instanceof Array)return s.value[0];return s.value},l.prototype.renderStringValue=function(e,t,i,s,a){var r,n=this.getItemData(e),h,p=typeof n.template=="string";if(this.isImportRules||this.ruleIndex>-1||this.groupIndex>-1||this.isPublic||p?h=t.value:h=this.setDefaultValue(e,!1,!1),(i==="in"||i==="notin")&&(this.dataColl.length||n.values))r=this.isImportRules||this.ruleIndex>-1||this.groupIndex>-1?t.value:this.setDefaultValue(e,!0,!1),this.renderMultiSelect(n,e,s,r,n.values),this.displayMode==="Vertical"||this.element.className.indexOf("e-device")>-1?a.style.width="100%":(a.style.width=null,a.style.minWidth="200px");else{(i==="in"||i==="notin")&&(r=this.isImportRules||this.ruleIndex>-1||this.groupIndex>-1?t.value:this.setDefaultValue(e,!0,!1),h=r.join(","));var o=void 0;o={placeholder:this.l10n.getConstant("SelectValue"),input:this.changeValue.bind(this,s)},this.valueModel&&this.valueModel.textBoxModel&&(o=ne({},o,this.valueModel.textBoxModel));var f=new Et(o);f.appendTo("#"+e+"_valuekey"+s),f.value=h,f.dataBind()}},l.prototype.renderNumberValue=function(e,t,i,s,a,r,n){var h=this.getItemData(e),p=typeof h.template=="string",o=this.isImportRules||this.ruleIndex>-1||this.groupIndex>-1||this.isPublic||p?t.value:this.setDefaultValue(e,!1,!0);if((i==="in"||i==="notin")&&(this.dataColl.length||h.values))o=this.isImportRules||this.ruleIndex>-1||this.groupIndex>-1?t.value:this.setDefaultValue(e,!0,!1),this.renderMultiSelect(h,e,s,o,h.values),this.element.className.indexOf("e-device")>-1||this.displayMode==="Vertical"?a.style.width="100%":(a.style.minWidth="200px",a.style.width=null);else if(i==="in"||i==="notin"){o=this.isImportRules||this.ruleIndex>-1||this.groupIndex>-1?t.value:this.setDefaultValue(e,!0,!1);var f=o.join(","),c=void 0;c={placeholder:this.l10n.getConstant("SelectValue"),input:this.changeValue.bind(this,s)},this.valueModel&&this.valueModel.textBoxModel&&(c=ne({},c,this.valueModel.textBoxModel));var v=new Et(c);v.appendTo("#"+e+"_valuekey"+s),v.value=f,v.dataBind()}else{r=h;var S=r.validation&&r.validation.min?r.validation.min:0,b=r.validation&&r.validation.max?r.validation.max:Number.MAX_VALUE,w=r.format?r.format:"n";n>1&&t&&(o=t.value[s]?t.value[s]:this.setDefaultValue(e,!0,!0));var x=void 0;x={value:o instanceof Array?o[s]:o,format:w,min:S,max:b,width:"100%",step:r.step?r.step:1,change:this.changeValue.bind(this,s)},this.valueModel&&this.valueModel.numericTextBoxModel&&(x=ne({},x,this.valueModel.numericTextBoxModel));var E=new bi(x);E.appendTo("#"+e+"_valuekey"+s),E.element.setAttribute("aria-label",r.label+" Value")}},l.prototype.processValueString=function(e,t){var i=[],s=e.split(",");if(t==="string")return s;for(var a=0,r=s.length;a<r;a++)i.push(Number(s[a]));return i},l.prototype.parseDate=function(e,t){var i,s;if(t){var a=this.intl.getDateParser({skeleton:"full",type:"dateTime"});i=this.getFormat(t),s=a(e),u(s)&&(s=this.intl.parseDate(e,i))}else s=new Date(e);return s},l.prototype.renderControls=function(e,t,i,s,a){if(g([e.parentElement.querySelector(".e-rule-value")],"e-value"),C([e.parentElement.querySelector(".e-rule-value")],"e-hide"),g([e.parentElement.querySelector(".e-rule-value")],"e-show"),t.template&&(t.template.create||a))this.processTemplate(e,t,i,s);else{var r;s.type==="boolean"?r=this.selectedColumn.values?this.selectedColumn.values.length:2:r=s.operator&&s.operator.toString().toLowerCase().indexOf("between")>-1?2:1;var n=k(e,".e-rule-container").id,h=void 0,p=s.operator.toString();if(e.className.indexOf("e-rule-operator")>-1||e.className.indexOf("e-rule-filter")>-1){h=e.parentElement.querySelector(".e-rule-value"),this.element.className.indexOf("e-device")>-1||this.displayMode==="Vertical"?h.style.width="100%":p!=="in"&&p!=="notin"?g([h],"e-custom-value"):C([h],"e-custom-value");for(var o=0;o<r;o++)switch(s.type){case"string":this.renderStringValue(n,i,p,o,h);break;case"number":this.renderNumberValue(n,i,p,o,h,t,r);break;case"boolean":this.processBoolValues(t,i,n,o);break;case"date":{var f=new Date,c=void 0,v=void 0,S=t.format,b=void 0,w=void 0,x=this.l10n.getConstant("SelectValue"),E=typeof t.template=="string";if(!t.field&&!t.key&&t.value&&(t.value instanceof Date?f=t.value:f=this.parseDate(t.value,t.format)),!t.format&&i&&i.field!==""&&(v=this.getColumn(i.field),S=v.format),(this.isImportRules||this.isPublic||E)&&i&&(v=this.getColumn(i.field),S=v.format,i.value?(c=r>1?i.value[o]:i.value,f=this.parseDate(c,v.format)):f=i.value),S){var N=this.getFormat(S);N.skeleton?(w={locale:this.getLocale(),value:f,placeholder:x,format:N,change:this.changeValue.bind(this,o)},this.valueModel&&this.valueModel.datePickerModel&&(w=ne({},w,this.valueModel.datePickerModel)),b=new St(w)):(w={value:f,locale:this.getLocale(),placeholder:x,format:N.format,change:this.changeValue.bind(this,o)},this.valueModel&&this.valueModel.datePickerModel&&(w=ne({},w,this.valueModel.datePickerModel)),b=new St(w))}else w={locale:this.getLocale(),value:f,placeholder:x,change:this.changeValue.bind(this,o)},this.valueModel&&this.valueModel.datePickerModel&&(w=ne({},w,this.valueModel.datePickerModel)),b=new St(w);if(b.appendTo("#"+n+"_valuekey"+o),!i.value){var R=document.getElementById(n+"_valuekey"+o);this.updateRules(R,f,null,this.isNotValueChange),this.isNotValueChange=!1}}break}}}},l.prototype.processBoolValues=function(e,t,i,s){var a=!1,r,n;u(t.type)&&e&&(t.type=e.type);var h;if(e.values){var p=e.values;t.type==="boolean"&&!u(t.value)?a=p[s].toLowerCase()===t.value.toString().toLowerCase():e.value?a=p[s].toLowerCase()===e.value.toString().toLowerCase():s===0&&(a=!0),n=r=h=p[s]}else{var p=[!0,!1];t.type==="boolean"&&!u(t.value)?a=p[s].toString().toLowerCase()===t.value.toString().toLowerCase():e.value?a=p[s].toString().toLowerCase()===e.value.toString().toLowerCase():s===0&&(a=!0),r=p[s].toString(),n=p[s],h=this.l10n.getConstant(["True","False"][s])}var o;o={label:h,name:i+"default",checked:a,value:r,change:this.changeValue.bind(this,s)},this.valueModel&&this.valueModel.radioButtonModel&&(o=ne({},o,this.valueModel.radioButtonModel));var f=new mi(o);f.appendTo("#"+i+"_valuekey"+s),a&&this.updateRules(f.element,n,0)},l.prototype.getOperatorIndex=function(e,t){var i,s=e.dataSource,a=s.length;for(i=0;i<a;i++)if(t.operator===e.dataSource[i].value)return i;return 0},l.prototype.getPreviousItemData=function(e,t){return this.isFieldClose&&e&&(e=this.getColumn(e.value)),t&&t.template&&e&&Object.keys(e).length<4&&(e.template=t.template),e},l.prototype.renderValues=function(e,t,i,s,a,r,n){var h=e.previousElementSibling,p=h.getElementsByTagName("input")[0],o=this.fieldMode==="DropdownTree"?T(p,"dropdowntree"):T(p,"dropdownlist"),f=this.fieldMode==="DropdownTree"?this.getColumn(o.value[0]):this.getColumn(o.value);this.selectedRule=f;var c=T(e.querySelector("input"),"dropdownlist");s&&(t=n.id.indexOf("operator")>-1?t:this.selectedRule,t.operators&&(c.value=null,c.dataBind(),c.dataSource=t.operators,c.index=this.getOperatorIndex(c,a),c.value=r.operator=c.dataSource[c.index].value,this.autoSelectOperator?c.dataBind():(c.index=-1,r.operator=c.value="")));var v=r.operator.toString(),S=!1;if(v.indexOf("null")>-1||v.indexOf("isempty")>-1||v.indexOf("isnotempty")>-1){var x=e.parentElement.querySelector(".e-rule-value");x&&(C([x],"e-show"),g([x],"e-hide"))}else{var b=k(e,".e-rule-container").id;if(i=this.getPreviousItemData(i,f),i&&i.template===void 0?i.columns&&(i=this.getColumn(a.field)):this.fieldMode==="DropdownTree"&&i===void 0&&(i=this.getColumn(a.field)),i&&i.template){this.templateDestroy(i,b+"_valuekey0");var w=X("#"+b+"_valuekey0",e.nextElementSibling);w&&!w.classList.contains("e-control")&&I(X("#"+b+"_valuekey0",e.nextElementSibling)),(typeof i.template=="string"||i.template.create===void 0)&&(e.nextElementSibling.classList.contains("e-template-value")&&this.clearQBTemplate([b]),e.nextElementSibling.innerHTML="")}if(s&&(this.validateValue(a,k(e,".e-rule-container")),this.destroyControls(e)),this.isImportRules||c&&c.value!==""){if(f&&(t.template=f.template),t.template&&(g([e.nextElementSibling],"e-template-value"),t.template=f.template,S=this.setColumnTemplate(t,b,f.field,t.value||v,e,a)),S){var x=e.parentElement.querySelector(".e-rule-value");this.element.className.indexOf("e-device")>-1||this.displayMode==="Vertical"?x.style.width="100%":x.style.width="200px"}else{C([e.nextElementSibling],"e-template-value");var E=1;r.type==="boolean"?E=this.selectedColumn.values?this.selectedColumn.values.length:2:E=v&&v.toLowerCase().indexOf("between")>-1?2:1;for(var N=0;N<E;N++){var R=this.createElement("input",{attrs:{type:"text",id:b+"_valuekey"+N}});e.nextElementSibling.appendChild(R)}}this.renderControls(e,t,a,r,S)}}},l.prototype.setColumnTemplate=function(e,t,i,s,a,r){var n=this,h,p=!0;if(e.template){if(typeof e.template=="string"||e.template.create===void 0)return h={requestType:"value-template-initialize",ruleID:t,field:i,operator:s,rule:r,renderTemplate:!0},this.trigger("actionBegin",h,function(S){p=n.actionBeginSuccessCallBack(S,e,t,i,a)}),p;var o=void 0,f=e.template;if(typeof f.create=="string"?o=O(f.create,window)({field:i,operator:s}):o=f.create({field:i,operator:s}),o instanceof Element)o.id=t+"_valuekey0",g([o],"e-template"),a.nextElementSibling.appendChild(o),i.indexOf(" ")<0&&g([o],"e-"+i);else if(o instanceof Array){g(o,"e-template");for(var c=0,v=o.length;c<v;c++)o[c].id=t+"_valuekey"+c,a.nextElementSibling.appendChild(o[c])}return g([a.nextElementSibling],"e-template-value"),!0}else return!0},l.prototype.actionBeginSuccessCallBack=function(e,t,i,s,a){if(e.renderTemplate){var r=void 0;this.columnTemplateFn=this.templateParser((typeof t.template=="function",t.template));var n=this.element.id+s;if(this.isReact)r=this.columnTemplateFn(e,this,i,n)[0],a.nextElementSibling.appendChild(r);else if(this.isAngular){var h=this.columnTemplateFn(e,this,i,n);r=h[0].nodeType===3?h[1]:h[0],a.nextElementSibling.appendChild(r)}else this.isVue3?(r=this.columnTemplateFn(e,this,"Template",n),Z(r,a.nextElementSibling)):(r=this.columnTemplateFn(e,this,"Template",n)[0],a.nextElementSibling.appendChild(r));return g([a.nextElementSibling],"e-template-value"),this.renderReactTemplates(),!0}else return!1},l.prototype.updateValues=function(e,t){var i=1;e.className.indexOf("e-template")>-1&&(i=3);var s=e.className.split(" e-")[i],a=parseInt(e.id.slice(-1),2);switch(s){case"checkbox":var r=T(e,s).value;t.value=r!==""?r:void 0;break;case"textbox":t.value=T(e,s).value;break;case"dropdownlist":t.value=T(e,s).value;break;case"radio":var n=T(e,s);n.checked&&(typeof t.value=="boolean"?t.value=n.value==="true":this.getColumn(t.field).values?t.value=n.value:t.value=n.value==="true"),n.refresh();break;case"numerictextbox":t.operator.indexOf("between")>-1?(typeof t.value=="string"&&(t.value=[]),t.value[a]=T(e,s).value):t.value=T(e,s).value;break;case"datepicker":var h=this.getColumn(t.field),p=this.getFormat(h.format),o=T(e,s).value;t.operator.indexOf("between")>-1?(typeof t.value=="string"&&(t.value=[]),t.value[a]=this.intl.formatDate(o,p)):u(p.format)&&o?t.value=this.intl.formatDate(o):o?t.value=this.intl.formatDate(o,p):t.value=o;break;case"multiselect":t.value=T(e,s).value;break}},l.prototype.updateRules=function(e,t,i,s){for(var a=k(e,".e-group-container"),r=this.getParentGroup(a),n=k(e,".e-rule-container"),h=0,p,o,f=a.id.replace(this.element.id+"_",""),c=this.getValidRules(this.rule);n&&n.previousElementSibling!==null;)n=n.previousElementSibling,h++;var v=r.rules[h].operator?r.rules[h].operator.toString():"";n=k(e,".e-rule-container");var S=n.id.replace(this.element.id+"_","");if(k(e,".e-rule-filter")||k(e,".e-rule-sub-filter")){this.subFieldElem&&(e=this.subFieldElem),p=this.fieldMode==="DropdownTree"?T(e,"dropdowntree"):T(e,"dropdownlist");var b=this.fieldMode==="DropdownTree"?this.getColumn(p.value[0]):this.getColumn(p.value);!this.isImportRules&&r.rules[h].field&&r.rules[h].field.toLowerCase()!==b.field.toLowerCase()&&(!n.querySelectorAll(".e-template")&&!(v.indexOf("null")>-1)||v.indexOf("empty")>-1)&&(r.rules[h].value=""),this.selectedColumn=this.getColumn(this.selectedColumn.field),r.rules[h].field=this.selectedColumn.field,r.rules[h].type=this.selectedColumn.type,r.rules[h].label=this.selectedColumn.label;var w=k(e,".e-rule-filter");w=w||k(e,".e-rule-sub-filter");var x=w.nextElementSibling.querySelector("input.e-control");x=x||w.nextElementSibling.nextElementSibling.querySelector("input.e-control"),v=T(x,"dropdownlist").value.toString(),r.rules[h].operator=v;var E=w.nextElementSibling.nextElementSibling,N=E.querySelectorAll("input.e-control");N.length<1&&(N=E.querySelectorAll("div.e-control")),N.length<1&&(N=E.querySelectorAll(".e-template")),o={groupID:f,ruleID:S,value:r.rules[h].field,type:"field"};for(var R=0;R<N.length;R++){if(v.indexOf("null")>-1||v.indexOf("empty")>-1){r.rules[h].value=null;continue}this.updateValues(N[R],r.rules[h])}this.isImportRules||this.trigger("change",o),this.allowValidation&&r.rules[h].field&&e.parentElement.className.indexOf("e-tooltip")>-1&&T(e.parentElement,"tooltip").destroy(),this.filterRules(c,this.getValidRules(this.rule),"field")}else if(k(e,".e-rule-operator")){p=T(e,"dropdownlist"),r.rules[h].operator=p.value.toString();var F=n.querySelectorAll(".e-rule-value input.e-control");o={groupID:f,ruleID:S,value:p.value,type:"operator"},this.allowValidation&&r.rules[h].operator&&e.parentElement.className.indexOf("e-tooltip")>-1&&T(e.parentElement,"tooltip").destroy(),F.length>1&&!(F[0].className.indexOf("e-template")>-1)&&(r.rules[h].value=[]);for(var H=0;H<F.length;H++){if(r.rules[h].operator.indexOf("null")>-1||r.rules[h].operator.indexOf("empty")>-1){r.rules[h].value=null;continue}else if(F[H].classList.contains("e-template"))continue;this.updateValues(F[H],r.rules[h])}this.isImportRules||this.trigger("change",o),this.filterRules(c,this.getValidRules(this.rule),"operator")}else k(e,".e-rule-value")&&(this.ruleValueUpdate(e,t,r,h,a,n,i),s||this.filterRules(c,this.getValidRules(this.rule),"value"))},l.prototype.filterRules=function(e,t,i){var s=JSON.stringify({condition:e.condition,not:e.not,rule:e.rules}),a=JSON.stringify({condition:t.condition,not:t.not,rule:t.rules});s!==a&&(this.isImportRules||this.trigger("ruleChange",{previousRule:e,rule:t,type:i}))},l.prototype.ruleValueUpdate=function(e,t,i,s,a,r,n){var h,p,o=["in","between","notin","notbetween"];if(i.rules[s].operator&&(p=i.rules[s].operator.toString().toLowerCase()),t!==null){if(e.className.indexOf("e-multiselect")>-1&&i.rules[s].type==="number"&&!this.isNotified){for(var f=[],c=t,v=0,S=c.length;v<S;v++)typeof c[v]=="string"&&f.push(parseFloat(c[v]));f.length&&(t=f)}if(this.isNotified)i.rules[s].value=t,h={groupID:a.id,ruleID:r.id,value:i.rules[s].value,type:"value"},this.isImportRules||this.trigger("change",h);else if(e.className.indexOf("e-spin")>-1||e.className.indexOf("e-numeric")>-1)o.indexOf(p)>-1?i.rules[s].value[n]=t:i.rules[s].value=t;else if(e.className.indexOf("e-radio")>-1)i.rules[s].value=t;else if(e.className.indexOf("e-multiselect")>-1)i.rules[s].value=t;else if(e.className.indexOf("e-textbox")>-1)p==="in"||p==="notin"?i.rules[s].type==="string"?i.rules[s].value=this.processValueString(t,i.rules[s].type):i.rules[s].value=this.processValueString(t,i.rules[s].type):i.rules[s].value=t;else if(e.className.indexOf("e-datepicker")>-1){var b=this.getFormat(this.getColumn(this.selectedColumn.field).format);b.type&&(o.indexOf(p)>-1?(typeof i.rules[s].value=="string"&&(i.rules[s].value=[]),i.rules[s].value[n]=this.intl.formatDate(t,b)):i.rules[s].value=this.intl.formatDate(t,b))}this.validateValue(i,r,s)}else e.className.indexOf("e-datepicker")>-1&&o.indexOf(p)>-1?(typeof i.rules[s].value=="string"&&(i.rules[s].value=[]),i.rules[s].value[n]=t):i.rules[s].value=t},l.prototype.validateValue=function(e,t,i){u(i)||(e=e.rules[i]);var s=typeof e.value=="object";if(this.allowValidation&&(u(i)||(s?e.value.length>0:e.value))){var a=t.querySelectorAll(".e-rule-value .e-control");a.length>0&&(a[0].className.indexOf("e-tooltip")>-1?T(a[0],"tooltip").destroy():a[0].parentElement.className.indexOf("e-tooltip")>-1&&T(a[0].parentElement,"tooltip").destroy(),a[1]&&a[1].parentElement.className.indexOf("e-tooltip")>-1&&T(a[1].parentElement,"tooltip").destroy())}},l.prototype.getFormat=function(e){var t;return e?typeof e=="string"?(t={type:"dateTime"},e==="short"||e==="yMd"?(t.type="date",t.skeleton=e):t.format=e):t={type:"dateTime",skeleton:e.skeleton}:t={type:"date",skeleton:"yMd"},t},l.prototype.findGroupByIdx=function(e,t,i){var s=t.rules,a=[];if(!i){for(var r=0,n=s.length;r<n;r++)t=s[r],t.rules&&a.push(t);return a[e]}return t},l.prototype.destroy=function(){this.isDestroy=!0;var e=this.element;if(e){var t,i,s,a;d.prototype.destroy.call(this);var r;for(t=this.element.querySelectorAll(".e-addrulegroup"),s=t.length,i=0;i<s;i++)T(t[i],"dropdown-btn").destroy(),I(t[i]);for(a=this.element.querySelectorAll(".e-rule-filter .e-control.e-tooltip"),i=0;i<a.length;i++)T(a[i],"tooltip").destroy();for(t=this.element.querySelectorAll(".e-rule-filter .e-control:not(.e-tooltip)"),s=t.length,i=0;i<s;i++)T(t[i],"dropdownlist")?T(t[i],"dropdownlist").destroy():T(t[i],"dropdowntree").destroy(),I(t[i]);for(a=this.element.querySelectorAll(".e-rule-operator .e-control.e-tooltip"),i=0;i<a.length;i++)T(a[i],"tooltip").destroy();for(t=this.element.querySelectorAll(".e-rule-operator .e-control:not(.e-tooltip)"),s=t.length,i=0;i<s;i++)T(t[i],"dropdownlist")&&(T(t[i],"dropdownlist").destroy(),I(t[i]));for(a=this.element.querySelectorAll(".e-rule-value .e-control.e-tooltip"),i=0;i<a.length;i++)T(a[i],"tooltip").destroy();if(this.isImportRules=!1,this.unWireEvents(),this.levelColl[this.element.id+"_group0"]=[0],this.element.innerHTML="",this.portals&&this.portals.length&&this.clearQBTemplate(),r=document.querySelectorAll(".qb-dropdownlist"),r)for(i=0;i<r.length;i++)r[i].remove();Ts(this.element,[],["e-rtl","e-responsive","e-device"]),this.isDestroy=!1}},l.prototype.addRules=function(e,t){t=this.element.id+"_"+t,this.isPublic=!0;for(var i=0,s=e.length;i<s;i++)this.addRuleElement(document.getElementById(t),e[i]);this.isPublic=!1},l.prototype.addGroups=function(e,t){if(this.isAddSuccess||this.element.querySelectorAll(".e-group-container").length<=this.maxGroupCount){t=this.element.id+"_"+t;var i=document.getElementById(t),s=this.getParentGroup(i),a=e.length;if(a){this.isPublic=!0;for(var r=0,n=e.length;r<n;r++)this.updatedRule={isLocked:e[r].isLocked,condition:e[r].condition,not:e[r].not},this.importRules(e[r],i,!1,e[r].not);this.isPublic=!1}else{var h="and",p=!1,o=!1;this.updatedRule&&(h=this.updatedRule.condition,p=this.updatedRule.not,o=this.updatedRule.isLocked),this.groupIndex<0?this.enableNotCondition?s.rules.push({condition:h,not:p,rules:[]}):s.rules.push({condition:h,rules:[]}):this.enableNotCondition?s.rules.splice(this.groupIndex+1,0,{condition:h,not:p,rules:[],isLocked:o}):s.rules.splice(this.groupIndex+1,0,{condition:h,rules:[],isLocked:o})}this.headerTemplate||this.disableRuleCondition(i,s)}},l.prototype.initWrapper=function(){if(this.isInitialLoad=!0,this.cssClass&&g([this.element],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.enableRtl&&g([this.element],"e-rtl"),this.width&&(this.element.style.width=this.width),this.height&&(this.element.style.height=this.height),this.rule.rules.length?this.isImportRules=!0:this.addGroupElement(!1,this.element),A.isDevice||this.displayMode==="Vertical"?(A.isDevice&&(this.element.style.width="100%",this.element.classList.add("e-device")),C(this.element.querySelectorAll(".e-rule-container"),"e-horizontal-mode"),g(this.element.querySelectorAll(".e-rule-container"),"e-vertical-mode"),this.displayMode="Vertical"):this.displayMode="Horizontal",this.summaryView)this.isImportRules?this.renderSummary():this.renderSummaryCollapse();else{if(this.columns.length&&this.isImportRules){this.addGroupElement(!1,this.element,this.rule.condition,!1,this.rule.not,!1,this.rule);var e=ie({},this.rule,{},!0);this.isRefreshed=!0,this.setGroupRules(e),this.isRefreshed=!1}else this.columns.length&&this.addRuleElement(this.element.querySelector(".e-group-container"),{});this.notGroupRtl(),this.readonly&&this.enableReadonly();for(var t=this.element.querySelectorAll("label.e-btn"),i=void 0,s=0;s<t.length;s++)i=t.item(s),He(i,{selector:".e-btn"})}},l.prototype.renderSummary=function(){var e=this.createElement("div",{attrs:{class:"e-summary-content",id:this.element.id+"_summary_content"}}),t=this.createElement("textarea",{attrs:{class:"e-summary-text",readonly:"true"},styles:"max-height:500px"}),i=this.createElement("button",{attrs:{type:"button",class:"e-edit-rule e-css e-btn e-small e-flat e-primary"}}),s=this.createElement("div",{attrs:{class:"e-summary-btndiv"}});e.appendChild(t),t.textContent=this.getSqlFromRules(this.rule),i.textContent=this.l10n.getConstant("Edit"),s.appendChild(i),e.appendChild(s),this.element.appendChild(e)},l.prototype.renderSummaryCollapse=function(){var e=this.createElement("div",{attrs:{class:"e-collapse-rule e-icons",title:this.l10n.getConstant("SummaryViewTitle")}});this.element.querySelector(".e-group-header").appendChild(e)},l.prototype.columnSort=function(){this.sortDirection.toLowerCase()==="descending"?this.columns=new j(this.columns).executeLocal(new J().sortByDesc("field")):this.sortDirection.toLowerCase()==="ascending"&&(this.columns=new j(this.columns).executeLocal(new J().sortBy("field")))},l.prototype.onChangeNotGroup=function(){if(this.element.innerHTML="",this.groupIdCounter=0,!this.headerTemplate)if(this.enableNotCondition){if(this.enableNotCondition){var e=this.createElement("button",{attrs:{type:"button",class:"e-qb-toggle"}});this.groupElem.querySelector(".e-btn-group").insertBefore(e,this.groupElem.querySelector(".e-btngroup-and"))}}else this.groupElem.querySelector(".e-qb-toggle").remove();this.setProperties({rule:this.checkNotGroup(this.rule)},!0),this.initWrapper()},l.prototype.notGroupRtl=function(){this.enableRtl?g(this.element.querySelectorAll(".e-btn-group"),"e-rtl"):C(this.element.querySelectorAll(".e-btn-group"),"e-rtl")},l.prototype.checkNotGroup=function(e){var t;if(e.rules)for(var i=0;i<e.rules.length;i++)t=e.rules[i],t=this.checkNotGroup(t),e.rules[i]=t;return u(e.not)?this.enableNotCondition&&!u(e.condition)&&(e.not=!1):(this.enableNotCondition&&(e.not=!1),delete e.not),e},l.prototype.onPropertyChanged=function(e,t){for(var i=Object.keys(e),s=0,a=i;s<a.length;s++){var r=a[s];switch(r){case"summaryView":var n=this.element.querySelector(".e-group-container"),h=this.element.querySelector(".e-summary-content");e.summaryView?(n.style.display="none",this.element.querySelectorAll(".e-summary-content").length<1?(this.renderSummary(),h=this.element.querySelector(".e-summary-content")):this.element.querySelector(".e-summary-text").textContent=this.getSqlFromRules(this.rule),h.style.display="block"):(n.querySelectorAll(".e-collapse-rule").length>-1&&this.renderSummaryCollapse(),n.style.display="block",h.style.display="none");break;case"displayMode":this.refresh();break;case"showButtons":u(e.showButtons.lockGroup)||(e.showButtons.lockGroup?C(this.element.querySelectorAll(".e-lock-grp-btn"),"e-button-hide"):g(this.element.querySelectorAll(".e-lock-grp-btn"),"e-button-hide")),u(e.showButtons.lockRule)||(e.showButtons.lockRule?C(this.element.querySelectorAll(".e-lock-rule-btn"),"e-button-hide"):g(this.element.querySelectorAll(".e-lock-rule-btn"),"e-button-hide")),u(e.showButtons.cloneGroup)||(e.showButtons.cloneGroup?C(this.element.querySelectorAll(".e-clone-grp-btn"),"e-button-hide"):g(this.element.querySelectorAll(".e-clone-grp-btn"),"e-button-hide")),u(e.showButtons.cloneRule)||(e.showButtons.cloneRule?C(this.element.querySelectorAll(".e-clone-rule-btn"),"e-button-hide"):g(this.element.querySelectorAll(".e-clone-rule-btn"),"e-button-hide")),u(e.showButtons.ruleDelete)||(e.showButtons.ruleDelete?C(this.element.querySelectorAll(".e-rule-delete"),"e-button-hide"):g(this.element.querySelectorAll(".e-rule-delete"),"e-button-hide")),u(e.showButtons.groupDelete)||(e.showButtons.groupDelete?C(this.element.querySelectorAll(".e-deletegroup"),"e-button-hide"):g(this.element.querySelectorAll(".e-deletegroup"),"e-button-hide"));break;case"cssClass":t.cssClass&&C([this.element],t.cssClass.split(" ")),e.cssClass&&g([this.element],e.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":e.enableRtl?(g([this.element],"e-rtl"),this.notGroupRtl()):(C([this.element],"e-rtl"),this.notGroupRtl());break;case"enablePersistence":this.enablePersistence=e.enablePersistence;break;case"dataSource":this.dataSource=e.dataSource,this.refresh();break;case"columns":this.columns=e.columns,this.columnSort(),this.updateSubFieldsFromColumns(this.columns);break;case"sortDirection":this.sortDirection=e.sortDirection,this.columnSort();break;case"maxGroupCount":this.maxGroupCount=e.maxGroupCount;break;case"height":this.height=e.height,this.element.style.height=this.height;break;case"rule":this.rule.rules.length===0&&!u(this.rule)&&this.reset(),this.setProperties({rule:e.rule},!0),e.rule=this.getRuleCollection(this.rule,!1),this.setRules(this.rule);break;case"width":this.width=e.width,this.element.style.width=this.width;break;case"locale":this.locale=e.locale,this.intl=new ue(this.locale),this.isLocale=!0,this.refresh(),this.isLocale=!1;break;case"enableNotCondition":this.onChangeNotGroup();break;case"readonly":this.isReadonly=e.readonly,this.enableReadonly();break}}},l.prototype.preRender=function(){this.element.id=this.element.id||de("ej2-querybuilder"),this.defaultLocale={StartsWith:"Starts With",DoesNotStartWith:"Does Not Start With",EndsWith:"Ends With",DoesNotEndWith:"Does Not End With",Contains:"Contains",DoesNotContain:"Does Not Contain",NotLike:"Not Like",Like:"Like",Equal:"Equal",NotEqual:"Not Equal",LessThan:"Less Than",LessThanOrEqual:"Less Than Or Equal",GreaterThan:"Greater Than",GreaterThanOrEqual:"Greater Than Or Equal",Between:"Between",NotBetween:"Not Between",In:"In",NotIn:"Not In",Remove:"REMOVE",SelectField:"Select a field",SelectOperator:"Select operator",DeleteRule:"Remove this condition",DeleteGroup:"Delete group",AddGroup:"Add Group",AddCondition:"Add Condition",Edit:"EDIT",ValidationMessage:"This field is required",SummaryViewTitle:"Summary View",OtherFields:"Other Fields",AND:"AND",OR:"OR",NOT:"NOT",SelectValue:"Enter Value",IsEmpty:"Is Empty",IsNotEmpty:"Is Not Empty",IsNull:"Is Null",IsNotNull:"Is Not Null",True:"true",False:"false",AddButton:"Add Group/Condition",CloneGroup:"Clone Group",LockGroup:"Lock Group",CloneRule:"Clone Rule",LockRule:"Lock Rule",UnlockRule:"Unlock Rule",UnlockGroup:"Unlock Group"},this.l10n=new fe("querybuilder",this.defaultLocale,this.locale),this.intl=new ue(this.locale),this.groupIdCounter=0,this.subFilterCounter=0,this.ruleIdCounter=0,this.btnGroupId=0,this.isImportRules=!1,this.parser=[],this.customOperators={stringOperator:[{value:"startswith",key:this.l10n.getConstant("StartsWith")},{value:"notstartswith",key:this.l10n.getConstant("DoesNotStartWith")},{value:"endswith",key:this.l10n.getConstant("EndsWith")},{value:"notendswith",key:this.l10n.getConstant("DoesNotEndWith")},{value:"contains",key:this.l10n.getConstant("Contains")},{value:"notcontains",key:this.l10n.getConstant("DoesNotContain")},{value:"equal",key:this.l10n.getConstant("Equal")},{value:"notequal",key:this.l10n.getConstant("NotEqual")},{value:"in",key:this.l10n.getConstant("In")},{value:"notin",key:this.l10n.getConstant("NotIn")},{value:"isempty",key:this.l10n.getConstant("IsEmpty")},{value:"isnotempty",key:this.l10n.getConstant("IsNotEmpty")}],dateOperator:[{value:"equal",key:this.l10n.getConstant("Equal")},{value:"greaterthan",key:this.l10n.getConstant("GreaterThan")},{value:"greaterthanorequal",key:this.l10n.getConstant("GreaterThanOrEqual")},{value:"lessthan",key:this.l10n.getConstant("LessThan")},{value:"lessthanorequal",key:this.l10n.getConstant("LessThanOrEqual")},{value:"notequal",key:this.l10n.getConstant("NotEqual")},{value:"between",key:this.l10n.getConstant("Between")},{value:"notbetween",key:this.l10n.getConstant("NotBetween")}],booleanOperator:[{value:"equal",key:this.l10n.getConstant("Equal")},{value:"notequal",key:this.l10n.getConstant("NotEqual")}],numberOperator:[{value:"equal",key:this.l10n.getConstant("Equal")},{value:"greaterthanorequal",key:this.l10n.getConstant("GreaterThanOrEqual")},{value:"greaterthan",key:this.l10n.getConstant("GreaterThan")},{value:"between",key:this.l10n.getConstant("Between")},{value:"lessthan",key:this.l10n.getConstant("LessThan")},{value:"notbetween",key:this.l10n.getConstant("NotBetween")},{value:"lessthanorequal",key:this.l10n.getConstant("LessThanOrEqual")},{value:"notequal",key:this.l10n.getConstant("NotEqual")},{value:"in",key:this.l10n.getConstant("In")},{value:"notin",key:this.l10n.getConstant("NotIn")}]},this.operators={equal:"=",notequal:"!=",greaterthan:">",greaterthanorequal:">=",lessthan:"<",in:"IN",notin:"NOT IN",lessthanorequal:"<=",startswith:"LIKE",endswith:"LIKE",between:"BETWEEN",notbetween:"NOT BETWEEN",contains:"LIKE",isnull:"IS NULL",isnotnull:"IS NOT NULL",isempty:"IS EMPTY",isnotempty:"IS NOT EMPTY",notstartswith:"NOT LIKE",notendswith:"NOT LIKE",notcontains:"NOT LIKE"},this.sqlOperators={equal:"=",notequal:"!=",greaterthan:">",greaterthanorequal:">=",lessthan:"<",in:this.l10n.getConstant("In").toUpperCase(),notin:this.l10n.getConstant("NotIn").toUpperCase(),lessthanorequal:"<=",startswith:this.l10n.getConstant("Like").toUpperCase(),endswith:this.l10n.getConstant("Like").toUpperCase(),between:this.l10n.getConstant("Between").toUpperCase(),notbetween:this.l10n.getConstant("NotBetween").toUpperCase(),contains:this.l10n.getConstant("Like").toUpperCase(),isnull:this.l10n.getConstant("IsNull").toUpperCase(),isnotnull:this.l10n.getConstant("IsNotNull").toUpperCase(),isempty:this.l10n.getConstant("IsEmpty").toUpperCase(),isnotempty:this.l10n.getConstant("IsNotEmpty").toUpperCase(),notstartswith:this.l10n.getConstant("NotLike").toUpperCase(),notendswith:this.l10n.getConstant("NotLike").toUpperCase(),notcontains:this.l10n.getConstant("NotLike").toUpperCase()},this.fields||(this.fields={text:"label",value:"field"})},l.prototype.render=function(){this.levelColl={},this.items=[{text:this.l10n.getConstant("AddGroup"),iconCss:"e-icons e-add-icon e-addgroup"},{text:this.l10n.getConstant("AddCondition"),iconCss:"e-icons e-add-icon e-addrule"}],this.ruleElem=this.ruleTemplate(),this.groupElem=this.groupTemplate();var e=[{value:"isnull",key:this.l10n.getConstant("IsNull")},{value:"isnotnull",key:this.l10n.getConstant("IsNotNull")}],t=[{value:"isnull",key:this.l10n.getConstant("IsNull")},{value:"isnotnull",key:this.l10n.getConstant("IsNotNull")}];this.customOperators.stringOperator=this.customOperators.stringOperator.concat(e),this.customOperators.numberOperator=this.customOperators.numberOperator.concat(t),this.dataSource instanceof j?(this.dataManager=this.dataSource,this.executeDataManager(new J().take(1))):(this.dataManager=new j(this.dataSource),this.dataColl=this.dataManager.executeLocal(new J),this.initControl()),this.renderComplete()},l.prototype.templateParser=function(e){if(e)try{return typeof e!="function"&&document.querySelectorAll(e).length?le(document.querySelector(e).innerHTML.trim()):le(e)}catch{return le(e)}},l.prototype.executeDataManager=function(e){var t=this,i=this.dataManager.executeQuery(e),s=new fi;i.then(function(a){a.actual&&a.actual.result?t.dataColl=a.actual.result:t.dataColl=a.result,t.initControl()}).catch(function(a){s.reject(a)})},l.prototype.initControl=function(){this.initialize(),this.initWrapper(),this.wireEvents()},l.prototype.wireEvents=function(){var e=this.getWrapper();y.add(e,"click",this.clickEventHandler,this),y.add(e,"focusout",this.focusEventHandler,this),y.add(e,"focusin",this.focusEventHandler,this),y.add(this.element,"keydown",this.keyBoardHandler,this)},l.prototype.unWireEvents=function(){var e=this.getWrapper();y.remove(e,"click",this.clickEventHandler),y.remove(e,"focusout",this.focusEventHandler),y.remove(e,"focusin",this.focusEventHandler),y.remove(this.element,"keydown",this.keyBoardHandler)},l.prototype.getParentGroup=function(e,t){for(var i=e instanceof Element?this.levelColl[e.id]:this.levelColl[""+e],s=t?i.length-1:i.length,a=this.rule,r=0;r<s;r++)a=this.findGroupByIdx(i[r],a,r===0);return a},l.prototype.deleteGroup=function(e){var t=this,i=e,s;typeof e=="string"?(s=this.element.id+"_"+e,e=document.getElementById(s)):s=i.id.replace(this.element.id+"_","");var a={groupID:s,cancel:!1,type:"deleteGroup"};this.isImportRules?this.deleteGroupSuccessCallBack(a,e):this.trigger("beforeChange",a,function(r){t.deleteGroupSuccessCallBack(r,e)})},l.prototype.deleteGroupSuccessCallBack=function(e,t){if(!e.cancel){var i=t,s=this.getParentGroup(i,!0),a=0,r=void 0,n=void 0,h=this.getValidRules(this.rule),p=i.nextElementSibling,o=i.previousElementSibling,f=i.querySelectorAll(".e-group-container"),c=i.querySelectorAll(".e-tooltip");for(n=c.length,r=0;r<n;r++)T(c[r],"tooltip").destroy();for(r=0,n=f.length;r<n;r++)delete this.levelColl[f[r].id];for(;i.previousElementSibling!==null;)i=i.previousElementSibling,a++;p&&p.className.indexOf("e-separate-rule")>-1&&(C([p],"e-separate-rule"),g([p],"e-joined-rule"),o&&o.className.indexOf("e-rule-container")>-1&&g([o],"e-prev-joined-rule"));var v=i.parentElement.parentElement.parentElement,S=[];if(this.isReact||this.isAngular){var b=s.rules[a],w=t.querySelectorAll(".e-rule-container");if(b&&b.rules)for(var x=0;x<b.rules.length;x++){var E=this.getColumn(b.rules[x].field);if(w[x]){var N=w[x].querySelector(".e-template-value");E&&(E.ruleTemplate||this.isPlatformTemplate(E)&&N)&&S.push(w[x].id)}}}I(t),this.headerTemplate&&this.clearQBTemplate([t.id]),S.length&&this.clearQBTemplate(S),s.rules.splice(a,1),delete this.levelColl[e.groupID],this.refreshLevelColl(),this.disableRuleCondition(v,s),this.isImportRules||this.trigger("change",e),this.filterRules(h,this.getValidRules(this.rule),"deleteGroup")}},l.prototype.isPlatformTemplate=function(e){var t=!1;return t=e.template&&(typeof e.template=="string"||e.template.create===void 0),t},l.prototype.deleteRule=function(e){var t=this,i=k(e,".e-group-container"),s=i.id.replace(this.element.id+"_",""),a=k(e,".e-rule-container").id.replace(this.element.id+"_",""),r={groupID:s,ruleID:a,cancel:!1,type:"deleteRule"};this.isImportRules?this.deleteRuleSuccessCallBack(r,e):this.trigger("beforeChange",r,function(n){t.deleteRuleSuccessCallBack(n,e)})},l.prototype.deleteRuleSuccessCallBack=function(e,t){if(!e.cancel){var i=k(t,".e-group-container"),s=this.getParentGroup(i),a=k(t,".e-rule-container"),r=this.getValidRules(this.rule),n=a,h=a.nextElementSibling,p=a.previousElementSibling,o=0,f=a.querySelectorAll(".e-tooltip"),c=void 0,v=f.length;for(c=0;c<v;c++)T(f[c],"tooltip").destroy();for(;a.previousElementSibling!==null;)a=a.previousElementSibling,o++;var S=this.getColumn(s.rules[o].field);S&&S.template&&n.querySelector(".e-template")&&this.templateDestroy(S,n.querySelector(".e-template").id),(!p||p.className.indexOf("e-rule-container")<0)&&h&&C([h],"e-joined-rule"),(!h||h.className.indexOf("e-rule-container")<0)&&p&&C([p],"e-prev-joined-rule");var b=n.querySelector(".e-template-value");try{I(n)}catch(N){N=[];var w="error";N[w]=w}S&&S.ruleTemplate&&this.clearQBTemplate([n.id]),S&&this.isPlatformTemplate(S)&&b&&this.clearQBTemplate([n.id]),s.rules.splice(o,1),s.rules[0]&&s.rules[0].rules||this.disableRuleCondition(i,s);for(var x=this.element.querySelectorAll(".e-tooltip"),E=0;E<x.length;E++)T(x[E],"tooltip").refresh(x[E]);this.isImportRules||this.trigger("change",e),this.filterRules(r,this.getValidRules(this.rule),"deleteRule")}},l.prototype.setGroupRules=function(e,t){if(this.headerTemplate&&t&&(this.isRoot=!0),this.reset(),this.groupIdCounter=1,this.ruleIdCounter=0,this.isImportRules=!0,this.setProperties({rule:e},!0),e=this.getRuleCollection(this.rule,!1),this.importRules(this.rule,this.element.querySelector(".e-group-container"),!0,this.rule.not,t),e.isLocked){var i=this.element.querySelector(".e-group-container").querySelector(".e-lock-grp-btn");this.groupLock(i)}this.isImportRules=!1},l.prototype.keyBoardHandler=function(e){this.readonly&&(e.keyCode===38||e.keyCode===40||e.keyCode===13)&&e.preventDefault()},l.prototype.clearQBTemplate=function(e){(this.isReact||this.isAngular)&&this.clearTemplate(e)},l.prototype.disableRuleCondition=function(e,t){if(!this.headerTemplate){if(this.readonly)return;var i=e.querySelector(".e-rule-list").childElementCount,s=e.querySelector(".e-btngroup-and"),a=e.querySelector(".e-btngroup-or");i>1?(s.disabled=!1,a.disabled=!1,(a.nextElementSibling.classList.contains("e-btn-disable")||s.nextElementSibling.classList.contains("e-btn-disable"))&&(a.nextElementSibling.classList.remove("e-btn-disable"),s.nextElementSibling.classList.remove("e-btn-disable")),t&&t.condition==="or"?a.checked=!0:s.checked=!0):(s.checked=!1,s.disabled=!0,a.checked=!1,a.disabled=!0,t&&(a.nextElementSibling.classList.add("e-btn-disable"),s.nextElementSibling.classList.add("e-btn-disable")))}},l.prototype.getValidRules=function(e){e||(e=this.getRules());var t=e.condition,i=e.not,s=ie([],e.rules,[],!0),a=this.getRuleCollection({condition:t,rules:s,not:i},!0);return a},l.prototype.getRuleCollection=function(e,t){if(u(e))return null;var i;if(e.rules&&e.rules.length&&(Object.keys(e.rules[0]).length>6||t))for(var s=e.rules.length,a=0;a<s;a++)i=e.rules[a],i=this.getRuleCollection(i,t),e.rules[a]=i,Object.keys(i).length<1&&t&&(e.rules.splice(a,1),a--,s--);var r=e.custom;if(e.field&&e.field!==""&&(u(r)||r&&r.type!=="question"&&r.type!=="answer"))if(e.operator&&(e.operator.toString().indexOf("null")>-1||e.operator.toString().indexOf("empty")>-1)&&(e.value=null),this.isRefreshed&&this.enablePersistence||e.field!==""&&e.operator!==""&&e.value!==""&&e.value!==void 0||r&&r.isQuestion){var n=e.condition;e={label:e.label,field:e.field,operator:e.operator,type:e.type,value:e.value,isLocked:e.isLocked},n&&(e.condition=n),r&&(e.custom=r),(e.operator==="in"||e.operator==="notin")&&e.value&&e.value.length===0&&(e={})}else e={};else if(r&&(r.type==="question"||r.type==="answer")){var h=e.not;e={label:e.label,field:e.field,operator:e.operator,type:e.type,value:e.value,condition:e.condition,rules:e.rules},e.custom=r,this.enableNotCondition&&(e.not=h)}else u(e.condition)&&u(e.rules)?e={}:(this.enableNotCondition?e={condition:e.condition,rules:e.rules,not:e.not,isLocked:e.isLocked}:e={condition:e.condition,rules:e.rules,isLocked:e.isLocked},r&&(e.custom=r),e.rules.length===0&&(e={}));return e},l.prototype.setRules=function(e){var t=ie({},e,{},!0);this.headerTemplate?this.setGroupRules(t,!0):this.setGroupRules(t)},l.prototype.getRules=function(){var e;return this.enableNotCondition?e={condition:this.rule.condition,rules:this.rule.rules,not:this.rule.not}:e={condition:this.rule.condition,rules:this.rule.rules},this.rule.custom&&(e.custom=this.rule.custom),e},l.prototype.getRule=function(e){var t,i,s=0;if(e instanceof HTMLElement?t=k(e,".e-rule-container"):(i=this.element.id+"_"+e,t=document.getElementById(i)),u(t))return null;for(var a=k(t,".e-group-container"),r=this.getParentGroup(a);t.previousElementSibling!==null;)t=t.previousElementSibling,s++;return r.rules[s]},l.prototype.getGroup=function(e){e instanceof Element&&e.className.indexOf("e-group-container")<1&&(e=k(e,".e-group-container"));var t=e instanceof Element?e.id:this.element.id+"_"+e,i=this.getParentGroup(t);return i},l.prototype.deleteGroups=function(e){var t,i=e.length,s;for(t=0;t<i;t++)s=this.element.id+"_"+e[t],this.deleteGroup(document.getElementById(s))},l.prototype.getFilteredRecords=function(){var e=this.getPredicate(this.getValidRules(this.rule)),t=u(e)?new J:new J().where(e);return this.dataManager.executeQuery(t)},l.prototype.deleteRules=function(e){var t,i=e.length,s;for(t=0;t<i;t++)s=this.element.id+"_"+e[t],this.deleteRule(document.getElementById(s))},l.prototype.getDataManagerQuery=function(e){for(var t=this.getPredicate(e),i,s=[],a=0,r=Object.keys(this.columns);a<r.length;a++)s.push(this.columns[a].field);return e.rules.length?i=new J().select(s).where(t):i=new J().select(s),i},l.prototype.getPredicate=function(e){var t=e.rules,i,s,a,r=!1,n;if(!t)return i;for(var h=0,p=t.length;h<p;h++){var o=t[h].operator;o==="notstartswith"?o="doesnotstartwith":o==="notendswith"?o="doesnotendwith":o==="notcontains"&&(o="doesnotcontain");var f=Object.keys(t[h]);if(r=!1,f.indexOf("rules")>-1&&t[h].rules)s=this.getPredicate(t[h]),s&&(i?e.condition==="and"?i=i.and(s):i=i.or(s):i=s);else if(!u(o)&&!u(o.length)){var c=t[h].operator.toLowerCase(),v=!1,S=["equal","notequal","greaterthan","greaterthanorequal","lessthan","lessthanorequal"];if(t[h].type==="string"&&(r=!this.matchCase),t[h].type==="date"&&S.indexOf(c)>-1&&(r=!0),n=this.getColumn(t[h].field),c.indexOf("null")>-1||c.indexOf("empty")>-1)t[h].value=null;else if(t[h].type==="date"&&!(t[h].value instanceof Array)){var b=this.getFormat(n.format);u(t[h].value)?a=null:(a=this.getDate(t[h].value,b),S.indexOf(c)>-1&&!this.isTime(t[h].value)&&(v=!0))}else a=t[h].value;if(h===0)if(v||(c.indexOf("in")>-1||c.indexOf("between")>-1||c.indexOf("null")>-1||c.indexOf("empty")>-1)&&c.indexOf("contain")<0)i=v?this.datePredicate(t[h],a):this.arrayPredicate(t[h]);else{var w=a;w!==""&&(i=new K(t[h].field,o,a,r))}else if(v||(c.indexOf("in")>-1||c.indexOf("between")>-1||c.indexOf("null")>-1||c.indexOf("empty")>-1)&&c.indexOf("contain")<0)i=v?this.datePredicate(t[h],a,i,e.condition):this.arrayPredicate(t[h],i,e.condition);else if(e.condition==="and"){var w=a;i&&w!==""?i=i.and(t[h].field,o,a,r):w!==""&&(i=new K(t[h].field,o,a,r))}else{var w=a;i&&w!==""?i=i.or(t[h].field,o,a,r):w!==""&&(i=new K(t[h].field,o,a,r))}}}return this.dataSource instanceof j&&!u(i)&&(i.operator==="isnull"||i.operator==="isnotnull")&&(i.operator=i.operator==="isnull"?"equal":"notequal"),i},l.prototype.getLocale=function(){var e=".dates.calendars.gregorian.days.format.short",t=this.locale,i="main.",s=O(i+""+this.locale+e,hs);return s||(t="en"),t},l.prototype.getColumn=function(e,t){var i=this.columns,s;i=t||i;for(var a=0,r=i.length;a<r;a++)if(i[a].field===e){s=i[a];break}else if(i[a].columns){if(s=this.getColumn(e,i[a].columns),s)break}else if(e&&e.indexOf(this.separator)>-1&&this.separator!==""&&i[a].field===e.split(this.separator)[0]){s=i[a];break}return s},l.prototype.getOperators=function(e){var t=this.getColumn(e);return t.operators},l.prototype.setTime=function(e,t){return t?e.setHours(0,0,0):e.setHours(23,59,59),e},l.prototype.datePredicate=function(e,t,i,s){var a,r=this.setTime(new Date(t.getTime()),!0),n=this.setTime(t);switch(e.operator){case"equal":a=new K(e.field,"greaterthanorequal",r),a=a.and(e.field,"lessthanorequal",n);break;case"notequal":a=new K(e.field,"lessthan",r),a=a.or(e.field,"greaterthan",n);break;case"greaterthan":a=new K(e.field,"greaterthan",n);break;case"greaterthanorequal":a=new K(e.field,"greaterthanorequal",r);break;case"lessthan":a=new K(e.field,"lessthan",r);break;case"lessthanorequal":a=new K(e.field,"lessthanorequal",n);break}return a&&(i?s==="and"?i=i.and(a):s==="or"&&(i=i.or(a)):i=a),i},l.prototype.arrayPredicate=function(e,t,i){var s=e.value,a=e.operator.toString(),r=e.value,n,h=this.getColumn(e.field),p=this.getFormat(h.format);if(a.indexOf("null")>-1||a.indexOf("empty")>-1)switch(a){case"isnull":n=new K(e.field,"isnull",r);break;case"isnotnull":n=new K(e.field,"isnotnull",r);break;case"isempty":n=new K(e.field,"equal","");break;case"isnotempty":n=new K(e.field,"notequal","");break}if(!(a.indexOf("null")>-1||a.indexOf("empty")>-1)){for(var o=0,f=s.length;o<f;o++)if(s[o]!==""||(a==="in"||a==="notin")&&h.type==="string")if(o===0){var c="greaterthanorequal";switch(a){case"between":h.type!=="date"?n=new K(e.field,c,s[o]):n=new K(e.field,c,s[o]?this.isTime(s[o])?this.getDate(s[o],p):this.setTime(this.getDate(s[o],p),!0):null);break;case"notbetween":h.type==="date"?n=new K(e.field,"lessthan",s[o]?this.isTime(s[o])?this.getDate(s[o],p):this.setTime(this.getDate(s[o],p),!0):null):n=new K(e.field,"lessthan",s[o]);break;case"in":n=new K(e.field,"equal",s[o]);break;case"notin":n=new K(e.field,"notequal",s[o]);break}}else{var v="greaterthan";switch(e.operator){case"between":h.type==="date"?n=n.and(e.field,"lessthanorequal",s[o]?this.isTime(s[o])?this.getDate(s[o],p):this.setTime(this.getDate(s[o],p)):s[o]):n=n.and(e.field,"lessthanorequal",s[o]);break;case"notbetween":h.type==="date"?n=n.or(e.field,v,s[o]?this.isTime(s[o])?this.getDate(s[o],p):this.setTime(this.getDate(s[o],p)):s[o]):n=n.or(e.field,"greaterthan",s[o]);break;case"in":n=n.or(e.field,"equal",s[o]);break;case"notin":n=n.and(e.field,"notequal",s[o]);break}}}return n&&(t?i==="and"?t=t.and(n):i==="or"&&(t=t.or(n)):t=n),t},l.prototype.getDate=function(e,t){var i=this.intl.parseDate(e,t);return e.indexOf(":")>-1&&e.indexOf("/")<0&&e.indexOf(",")<0&&e.indexOf("-")<0&&(i=new Date,i.setHours(parseInt(e.split(":")[0])),i.setMinutes(parseInt(e.split(":")[1])),e.split(":")[2]&&i.setSeconds(parseInt(e.split(":")[2]))),i},l.prototype.isTime=function(e){return!!(e&&e.indexOf(":")>-1)},l.prototype.importRules=function(e,t,i,s,a){if(!i)t=this.renderGroup(e,e.condition,t,s);else{if(e.rules.length>1&&!this.headerTemplate){var r=t.querySelector(".e-btngroup-or"),n=t.querySelector(".e-btngroup-and");r.disabled=!1,n.disabled=!1,e.condition==="or"?r.checked=!0:n.checked=!0}else this.disableRuleCondition(t);if(this.headerTemplate&&a&&(t=this.renderGroup(e,e.condition,this.element,e.not,a)),this.enableNotCondition&&!this.headerTemplate){var h=t.querySelector(".e-qb-toggle");e.not?g([h],"e-active-toggle"):C([h],"e-active-toggle")}}e.rules.length===0&&this.headerTemplate&&(e.rules[0]={label:"",field:"",operator:"",type:"",value:""});var p=e.rules;if(!u(p))for(var o=0,f=p.length;o<f;o++){var c=Object.keys(p[o]);if(!u(p[o].rules)&&c.indexOf("rules")>-1&&p[o].rules.length!==0){if(this.element.querySelectorAll(".e-group-container").length>this.maxGroupCount)return null;t=this.renderGroup(p[o],p[o].condition,t,p[o].not),t=this.importRules(p[o],t,!0)}else this.renderRule(p[o],t);if(!u(p[o].rules)&&p[o].isLocked){var v=t.querySelector(".e-rule-list").children[o].querySelector(".e-lock-grp-btn");this.groupLock(v)}if(u(p[o].rules)&&p[o].isLocked){var S=t.querySelector(".e-rule-list").children[o].querySelector(".e-lock-rule-btn");this.ruleLock(S)}}return t&&(t=k(t,".e-rule-list")),t&&(t=k(t,".e-group-container")),t},l.prototype.renderGroup=function(e,t,i,s,a){this.addGroupElement(!0,i,t,!1,s,a,e);var r=i.querySelectorAll(".e-group-container"),n=i.querySelector(".e-rule-list").children;return this.showButtons.cloneGroup&&this.cloneGrpBtnClick&&this.isMiddleGroup?(this.isMiddleGroup=!1,this.cloneGrpBtnClick=!1,n[this.groupIndex+1]):this.showButtons.cloneGroup&&this.cloneGrpBtnClick&&this.isLastGroup?(this.isLastGroup=!1,this.cloneGrpBtnClick=!1,n[n.length-1]):r[r.length-1]},l.prototype.renderRule=function(e,t){t.className.indexOf("e-group-container")>-1?this.addRuleElement(t,e):this.addRuleElement(t.querySelector(".e-group-container"),e)},l.prototype.enableReadonly=function(){for(var e=this.element,t=e.querySelectorAll(".e-dropdownlist, .e-dropdowntree, .e-numerictextbox, .e-textbox, .e-datepicker, .e-multiselect .e-lib, .e-radio"),i=0;i<t.length;i++)if(t[i].classList.contains("e-dropdownlist")){var s=Oe(t[i],ot);s.readonly=this.isReadonly}else if(t[i].classList.contains("e-dropdowntree")){var a=T(t[i],"dropdowntree");a.readonly=this.isReadonly}else if(t[i].classList.contains("e-numerictextbox")){var r=Oe(t[i],bi);r.readonly=this.isReadonly}else if(t[i].classList.contains("e-textbox")){var n=Oe(t[i],Et);n.readonly=this.isReadonly}else if(t[i].classList.contains("e-datepicker")){var h=Oe(t[i],St);h.readonly=this.isReadonly}else if(t[i].classList.contains("e-multiselect")){var p=Oe(t[i],Gt);p.readonly=this.isReadonly}else if(t[i].classList.contains("e-radio")){var o=Oe(t[i],mi);o.checked||(this.isReadonly?t[i].parentElement.style.display="none":t[i].parentElement.style.display="inherit")}var f=this.element.querySelectorAll(".e-deletegroup"),c=this.element.querySelectorAll(".e-addrulegroup"),v=this.element.querySelectorAll(".e-removerule");!this.isReadonly&&this.ruleElem.classList.contains("e-readonly")&&this.ruleElem.classList.remove("e-readonly");for(var S=[f,c,v],i=0;i<S.length;i++)S[i].forEach(function(w){w.classList.contains("e-readonly")?w.classList.remove("e-readonly"):w.classList.add("e-readonly")});this.enableBtnGroup()},l.prototype.enableBtnGroup=function(){var e=this,t=this.element.querySelectorAll(".e-btngroup-and-lbl, .e-btngroup-or-lbl, .e-qb-toggle"),i=!1;t.forEach(function(s){s.classList.contains("e-qb-toggle")&&!s.classList.contains("e-active-toggle")&&!s.classList.contains("e-readonly")?(s.classList.add("e-readonly"),i=!1):s.classList.contains("e-qb-toggle")&&s.classList.contains("e-not-readonly")?s.classList.remove("e-not-readonly"):s.classList.contains("e-qb-toggle")&&s.classList.contains("e-readonly")?s.classList.remove("e-readonly"):s.classList.contains("e-active-toggle")?(s.classList.add("e-not-readonly"),i=!0):s.previousElementSibling.checked||s.classList.contains("e-readonly")?(s.classList.remove("e-readonly"),i?s.textContent==="AND"?s.classList.add("e-readonly-and"):s.classList.add("e-readonly-or"):(s.textContent==="AND"&&e.isReadonly?(s.classList.remove("e-not"),s.classList.add("e-readonly-and")):(e.enableNotCondition&&s.classList.add("e-not"),s.classList.remove("e-readonly-and")),s.textContent==="OR"&&e.isReadonly?s.classList.add("e-readonly-or-not"):s.classList.remove("e-readonly-or-not"))):s.classList.contains("e-btn-disable")||s.classList.add("e-readonly")})},l.prototype.isDateFunction=function(e){for(var t=["date","time","day","week","month","year","hour","minute","second","now","quarter","period","extract"],i=0,s=t.length;i<s;i++)if(e.toLowerCase().indexOf(t[i])>-1)return!0;return!1},l.prototype.getSqlString=function(e,t,i,s){var a=!1;!i&&i!==""?(i="",a=!0):i+="(";var r=e.condition;if(e.not){var n=void 0;a?(n=s?this.l10n.getConstant("NOT").toUpperCase()+" (":"NOT (",i+=n):(n=s?" "+this.l10n.getConstant("NOT").toUpperCase()+" (":" NOT (",i+=n)}if(e.rules)for(var h=0,p=e.rules.length;h<p;h++){if(e.rules[h].rules)i=this.getSqlString(e.rules[h],t,i,s);else{var o=e.rules[h],f="",c=s?this.sqlOperators[o.operator]:this.operators[o.operator];if(o.value instanceof Array)if(o.operator.toString().indexOf("between")>-1){var v=s?" "+this.l10n.getConstant("AND").toUpperCase()+" ":" AND ";o.type==="date"&&!this.isDateFunction(o.value[0])?f+='"'+o.value[0]+'"'+v+'"'+o.value[1]+'"':f+=o.value[0]+v+o.value[1]}else if(typeof o.value[0]=="string"&&o.value!==null){f+='("'+o.value[0]+'"';for(var S=1,b=o.value.length;S<b;S++)f+=',"'+o.value[S]+'"';f+=")"}else f+="("+o.value+")";else o.operator.toString().indexOf("startswith")>-1?f+=o.value?'("'+o.value+'%")':"("+o.value+")":o.operator.toString().indexOf("endswith")>-1?f+=o.value?'("%'+o.value+'")':"("+o.value+")":o.operator.toString().indexOf("contains")>-1?f+=o.value?'("%'+o.value+'%")':"("+o.value+")":o.type==="number"||typeof o.value=="boolean"||o.value===null&&o.operator.toString().indexOf("empty")<-1?f+=o.value:o.operator.toString().indexOf("empty")>-1?f+='""':f+='"'+o.value+'"';if(o.operator.toString().indexOf("null")>-1)t?o.field="`"+o.field+"`":o.field.indexOf(" ")>-1&&(o.field='"'+o.field+'"'),i+=o.field+" "+c;else{var w=c;o.operator==="isempty"?w="=":o.operator==="isnotempty"&&(w="!="),t?o.field="`"+o.field+"`":o.field.indexOf(" ")>-1&&(o.field='"'+o.field+'"'),i+=o.field+" "+w+" "+f}o.condition&&o.condition!==""&&(r=o.condition)}if(h!==p-1){var o=e.rules[h];(r===""||o&&o.condition!==""&&o.custom&&o.custom.isCustom)&&(r=o.condition),r=s?this.l10n.getConstant(r.toUpperCase()).toUpperCase():r.toUpperCase(),i+=" "+r+" "}}return a||(i+=")"),e.not&&(i+=")"),i},l.prototype.setRulesFromSql=function(e,t){e=e.replace(/`/g,"");var i=this.getRulesFromSql(e,t);this.setRules({condition:i.condition,not:i.not,rules:i.rules})},l.prototype.getRulesFromSql=function(e,t){this.parser=[],this.sqlParser(e,t),this.setProperties({rule:{condition:"and",not:!1,rules:[]}},!0);var i=this.processParser(this.parser,this.rule,[0],t);return this.enableNotCondition?{condition:i.condition,not:i.not,rules:i.rules}:{condition:i.condition,rules:i.rules}},l.prototype.getSqlFromRules=function(e,t,i){e||(e=this.getValidRules()),e=this.getRuleCollection(e,!1);var s=this.getSqlString(this.getValidRules(e),t,null,i).replace(/"/g,"'");return s},l.prototype.getParameterizedSql=function(e){e||(e=this.getValidRules());var t={sql:null};return this.notify("query-library",{prop:"getParameterSql",onPropertyChange:!1,value:{rule:e,obj:t}}),t.sql},l.prototype.setParameterizedSql=function(e){var t={sql:null};this.notify("query-library",{prop:"convertParamSqlToSql",onPropertyChange:!1,value:{sql:e,obj:t}});var i=t.sql;if(i){i=i.replace(/`/g,"");var s=this.getRulesFromSql(i);this.setRules({condition:s.condition,not:s.not,rules:s.rules})}},l.prototype.getParameterizedNamedSql=function(e){e||(e=this.getValidRules());var t={sql:null};return this.notify("query-library",{prop:"getNamedParameterSql",onPropertyChange:!1,value:{rule:e,obj:t}}),t.sql},l.prototype.setParameterizedNamedSql=function(e){var t={sql:null};this.notify("query-library",{prop:"convertNamedParamSqlToSql",onPropertyChange:!1,value:{sql:e,obj:t}});var i=t.sql;if(i){i=i.replace(/`/g,"");var s=this.getRulesFromSql(i);this.setRules({condition:s.condition,not:s.not,rules:s.rules})}},l.prototype.setMongoQuery=function(e,t){this.rule={condition:"and",not:!1,rules:[]},this.notify("query-library",{prop:"mongoParser",onPropertyChange:!1,value:{mongoQuery:JSON.parse(e),rule:this.rule,mongoLocale:t}})},l.prototype.getMongoQuery=function(e){e||(e=this.getValidRules());var t={mongoQuery:null};return this.notify("query-library",{prop:"getMongoFromRules",onPropertyChange:!1,value:{rule:e,mongoQuery:"",obj:t}}),t.mongoQuery},l.prototype.cloneRule=function(e,t,i){var s=this.getRule(e.replace(this.element.id+"_",""));t=t.replace(this.element.id+"_",""),this.ruleIndex=i,this.cloneRuleBtnClick=!0,this.showButtons.cloneRule=!0,this.addRules([{label:s.label,field:s.field,type:s.type,operator:s.operator,value:s.value}],t),this.ruleIndex=-1,this.cloneRuleBtnClick=!1,this.showButtons.cloneRule=!1},l.prototype.cloneGroup=function(e,t,i){t=t.replace(this.element.id+"_","");var s=this.getGroup(t);e=e.replace(this.element.id+"_",""),this.groupIndex=i,this.cloneGrpBtnClick=!0,this.showButtons.cloneGroup=!0,this.addGroups([{condition:s.condition,not:s.not,rules:s.rules}],e),this.groupIndex=-1,this.cloneGrpBtnClick=!1,this.showButtons.cloneGroup=!1},l.prototype.lockRule=function(e){var t=document.getElementById(e).querySelectorAll(".e-lock-rule-btn")[0];this.ruleLock(t)},l.prototype.lockGroup=function(e){var t=document.getElementById(e).querySelectorAll(".e-lock-grp-btn")[0];this.groupLock(t)},l.prototype.sqlParser=function(e,t){var i=0,s;do s=e.slice(i),i+=this.parseSqlStrings(s,t);while(s!=="");return this.parser},l.prototype.parseSqlStrings=function(e,t){var i=["=","!=","<=",">=","<",">"],s;t?s=[this.l10n.getConstant("AND").toUpperCase(),this.l10n.getConstant("OR").toUpperCase(),this.l10n.getConstant("NOT").toUpperCase()]:s=["AND","OR","NOT"];var a;t?a=[this.l10n.getConstant("In").toUpperCase(),this.l10n.getConstant("NotIn").toUpperCase(),this.l10n.getConstant("Like").toUpperCase(),this.l10n.getConstant("NotLike").toUpperCase(),this.l10n.getConstant("Between").toUpperCase(),this.l10n.getConstant("NotBetween").toUpperCase(),this.l10n.getConstant("IsNull").toUpperCase(),this.l10n.getConstant("IsNotNull").toUpperCase(),this.l10n.getConstant("IsEmpty").toUpperCase(),this.l10n.getConstant("IsNotEmpty").toUpperCase()]:a=["IN","NOT IN","LIKE","NOT LIKE","BETWEEN","NOT BETWEEN","IS NULL","IS NOT NULL","IS EMPTY","IS NOT EMPTY"];for(var r,n,h,p=0,o=i.length;p<o;p++)if(r=/^\w+$/.test(i[p])?"\\b":"",n=new RegExp("^("+i[p]+")"+r,"ig"),n.exec(e))return this.parser.push(["Operators",i[p].toLowerCase()]),i[p].length;var f=this.parser[this.parser.length-1];if(!f||f&&f[0]!=="Literal"){for(var p=0,o=s.length;p<o;p++)if(r=/^\w+$/.test(s[p])?"\\b":"",n=new RegExp("^("+s[p]+")"+r,"ig"),n.exec(e))return this.parser.push(["Conditions",s[p].toLowerCase()]),s[p].length}for(var p=0,o=a.length;p<o;p++)if(r=/^\w+$/.test(a[p])?"\\b":"",n=new RegExp("^("+a[p]+")"+r,"ig"),n.exec(e))return this.parser.push(["SubOperators",a[p].toLowerCase()]),a[p].length;if(/^\(/.exec(e))return this.parser.push(["Left","("]),1;if(/^\)/.exec(e))return this.parser.push(["Right",")"]),1;if(/^(true|false)/.exec(e))return h=/^(true|false)/.exec(e)[0],this.parser.push(["String",h]),h.length;if(/^null/.exec(e))return h=/^null/.exec(e)[0],this.parser.push(["String",null]),h.length;if(/^`?([a-z_][a-z0-9_.\[\]\(\)]{0,}(\:(number|float|string|date|boolean))?)`?/i.exec(e))return h=/^`?([a-zåäö_][a-z0-9åäö_.\[\]\(\)]{0,}(\:(number|float|string|date|boolean))?)`?/i.exec(e)[1],this.parser.push(["Literal",h]),h.length;if(this.checkLiteral()&&/^'?([a-z_][a-z0-9 _.\[\]\(\)]{0,}(\:(number|float|string|date|boolean))?)'?/i.exec(e))return h=/^'?([a-z_][a-z0-9 _.\[\]\(\)]{0,}(\:(number|float|string|date|boolean))?)'?/i.exec(e)[1],this.parser.push(["Literal",h]),h.length+2;if(this.checkNumberLiteral(e,t))return h=/^[0-9]+(\.[0-9]+)?/.exec(e)[0],this.parser.push(["Literal",h]),h.length;if(/^'((?:[^\\']+?|\\.|'')*)'(?!')/.exec(e)){if(h=/^'((?:[^\\']+?|\\.|'')*)'(?!')/.exec(e)[0],h[h.length-2]==="(")for(var c=!1,v=h.length;v<e.length&&(h+=e[v],e[v]===")"&&(c=!0),!(c&&e[v]==="'"));v++);return this.parser.push(["String",h]),h.length}return/^"([^\\"]*(?:\\.[^\\"]*)*)"/.exec(e)?(h=/^"([^\\"]*(?:\\.[^\\"]*)*)"/.exec(e)[0],this.parser.push(["DoubleString",h]),h.length):/^[0-9]+(\.[0-9]+)?/.exec(e)?(h=/^[0-9]+(\.[0-9]+)?/.exec(e)[0],this.parser.push(["Number",h]),h.length):/^-?[0-9]+(\.[0-9]+)?/.exec(e)?(h=/^-?[0-9]+(\.[0-9]+)?/.exec(e)[0],this.parser.push(["Number",h]),h.length):1},l.prototype.checkLiteral=function(){var e=this.parser[this.parser.length-1];if(e){var t=this.parser[this.parser.length-2],i=this.parser[this.parser.length-3];if(e[0]==="Left"&&t&&t[0]==="Conditions")return!0;var s="between";if(e[0]==="Conditions"&&i&&i[1].indexOf(s)<0)return!0}else return!0;return!1},l.prototype.checkNumberLiteral=function(e,t){var i=this.parser[this.parser.length-1];if(i){if(/^[0-9]+(\.[0-9]+)?/.exec(e)){var s=this.parser[this.parser.length-2],a=this.parser[this.parser.length-3];if(i[0]==="Left"&&s&&s[0]==="Conditions")return!0;var r=t?this.l10n.getConstant("Between").toLowerCase():"between";if(i[0]==="Conditions"&&a&&a[1].indexOf(r)<0)return!0}}else return!0;return!1},l.prototype.getOperator=function(e,t,i){var s={"=":"equal","!=":"notequal","<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal",in:"in","not in":"notin",between:"between","not between":"notbetween","is empty":"isempty","is null":"isnull","is not null":"isnotnull","is not empty":"isnotempty"};if(i){for(var a=Object.keys(this.sqlOperators),r=0;r<a.length;r++)if(this.sqlOperators[a[r]]===t.toUpperCase())return e&&e.indexOf("%")===0&&e[e.length-1]==="%"?t.toUpperCase()==="NOT LIKE"?"notcontains":"contains":e&&e.indexOf("%")!==0&&e.indexOf("%")===e.length-1?t.toUpperCase()==="NOT LIKE"?"notstartswith":"startswith":e&&e.indexOf("%")===0&&e.indexOf("%")!==e.length-1?t.toUpperCase()==="NOT LIKE"?"notendswith":"endswith":a[r];return null}if(e){if(e.indexOf("%")===0&&e[e.length-1]==="%")return t==="not like"?"notcontains":"contains";if(e.indexOf("%")!==0&&e.indexOf("%")===e.length-1)return t==="not like"?"notstartswith":"startswith";if(e.indexOf("%")===0&&e.indexOf("%")!==e.length-1)return t==="not like"?"notendswith":"endswith"}else{if(t==="not like")return"notequal";if(t==="like")return"equal"}return s[""+t]},l.prototype.getTypeFromColumn=function(e){var t=this.getColumn(e.field);return u(t)?null:t.type},l.prototype.getLabelFromColumn=function(e){var t="",i=0;if(this.separator!==""){for(var s=e.split(this.separator),a=0;a<s.length;a++)t+=this.getLabelFromField(s,a+1),i++,i<s.length&&(t+=this.separator);return t}else{var r=this.getColumn(e).label;return r}},l.prototype.getLabelFromField=function(e,t){for(var i="",s=0,a=0;a<t;a++)i+=e[a],s++,s<t&&(i+=this.separator);return this.getColumn(i).label},l.prototype.processParser=function(e,t,i,s){for(var a,r,n,h,p=[],o=[],f,c,v,S,b,w,x=!1,E=0,N=e.length;E<N;E++)if(e[E][0]==="Literal"){var R=this.getColumn(e[E][1]);if(n={label:R&&R.label?R.label:e[E][1],field:e[E][1]},e[E+1][0]==="SubOperators"){if(e[E+1][1].indexOf("null")>-1||e[E+1][1].indexOf("empty")>-1)n.operator=this.getOperator(" ",e[E+1][1],s),n.value=null,n.type=this.getTypeFromColumn(n);else{var F=e[E+3][1]?e[E+3][1].replace(/'/g,""):e[E+3][1];n.operator=this.getOperator(F,e[E+1][1],s)}for(w=e[E+1][1],E++,a=E+1,r=N,s&&n.operator==="contains"||n.operator==="startswith"||n.operator==="endswith"?w="like":s&&n.operator==="notcontains"||n.operator==="notstartswith"||n.operator==="notendswith"?w="not like":s&&(w=n.operator),a=E+1;a<r;a++)if(w.indexOf("between")<0&&e[a][0]==="Left")x=!0;else if(e[a][0]==="Right"&&x){E=a,x=!1;break}else{if(w.indexOf("null")>-1||w.indexOf("empty")>-1)break;if(w.indexOf("like")>-1&&e[a][0]==="String"){var H=e[a][1];e[a][1]&&e[a][1][0]==="'"&&(H=e[a][1].substring(1,e[a][1].length-1)),H=H?H.replace(/%/g,""):e[a][1],n.value=H,n.type="string"}else if(w.indexOf("between")>-1){if(e[a][0]==="Literal"||e[a][0]==="Left")break;if(e[a][0]==="Number")p.push(Number(e[a][1]));else if(e[a][0]==="String"){var H=e[a][1];e[a][1]&&e[a][1][0]==="'"&&(H=e[a][1].substring(1,e[a][1].length-1)),o.push(H)}}else if(e[a][0]==="Number")p.push(Number(e[a][1]));else if(e[a][0]==="String"){var H=e[a][1];e[a][1]&&e[a][1][0]==="'"&&(H=e[a][1].substring(1,e[a][1].length-1)),o.push(H)}n.type=this.getTypeFromColumn(n)}w.indexOf("like")<0&&(e[a-1][0]==="Number"?(n.value=p,n.type="number"):e[a-1][0]==="String"?(n.value=o,n.type="string"):w.indexOf("between")>-1&&e[a-1][0]==="Conditions"&&(o.length!==0?(n.value=o,n.type="string"):(n.value=p,n.type="number")),p=[],o=[],n.type=this.getTypeFromColumn(n))}else e[E+1][0]==="Operators"&&(n.operator=this.getOperator(e[E+2][1],e[E+1][1],s),n.operator=="equal"&&e[E+2][0]==="String"&&e[E+2][1]==="''"?n.operator="isempty":n.operator=="notequal"&&e[E+2][0]==="String"&&e[E+2][1]==="''"&&(n.operator="isnotempty"),e[E+2][0]==="Number"?(n.type="number",n.value=Number(e[E+2][1])):(n.type="string",n.value=e[E+2][1]?e[E+2][1].replace(/'/g,""):e[E+2][1]),n.type=this.getTypeFromColumn(n));t.rules.push(n)}else if(e[E][0]==="Left"){if(e[0][0]!=="Left"&&(e[E-1][1]==="not"||s&&this.l10n.getConstant("NOT").toLowerCase()===e[E-1][1]))continue;for(this.parser=e.splice(E+1,N-(E+1)),this.enableNotCondition?h={condition:"and",rules:[],not:!1}:h={condition:"and",rules:[]},b=0,c=t.rules.length,f=0;f<c;f++)t.rules[f].rules&&b++;return i.push(b),t.rules.push(h),h=this.processParser(this.parser,h,i,s),t}else if(e[E][0]==="Conditions")e[E][1]==="not"||s&&this.l10n.getConstant("NOT").toLowerCase()===e[E][1]?t.not=!0:t.condition=e[E][1];else if(e[E][0]==="Right"){for(this.parser=e.splice(E+1,N-(E+1)),i.pop(),t=this.rule,S=i.length,v=0;v<S;v++)t=this.findGroupByIdx(i[v],t,v===0);return this.processParser(this.parser,t,i,s)}return t},l.prototype.groupClone=function(e){var t=e.closest(".e-rule-list").closest(".e-group-container"),i,s;typeof e=="string"?(s=this.element.id+"_"+e,e=document.getElementById(s)):(i=e.id.replace(this.element.id+"_",""),s=t.id.replace(this.element.id+"_",""));var a=this.getGroup(i);this.groupIndex=Array.prototype.indexOf.call(e.closest(".e-rule-list").children,e.closest(".e-group-container")),this.addGroups([{condition:a.condition,not:a.not,rules:a.rules}],s),this.groupIndex=-1},l.prototype.ruleClone=function(e){for(var t=k(e,".e-rule-container"),i=e.closest(".e-rule-list").closest(".e-group-container"),s=this.getRule(e),a=i.id.replace(this.element.id+"_",""),r=i.querySelectorAll(".e-rule-container"),n=0,h=r.length;n<h;n++)t.id===r[n].id&&(this.ruleIndex=n);this.addRules([{label:s.label,field:s.field,type:s.type,operator:s.operator,value:s.value}],a),this.ruleIndex=-1},l.prototype.ruleLock=function(e){var t=k(e,".e-rule-container"),i=this.getRule(t.id.replace(this.element.id+"_",""));t.classList.contains("e-disable")?(i.isLocked=!1,this.lockItems=this.lockItems.filter(function(s){return s!==t.id}),t.classList.remove("e-disable"),this.disableRuleControls(e,t,!1),e.children[0].classList.add("e-unlock"),e.children[0].classList.remove("e-lock"),e.setAttribute("title",this.l10n.getConstant("LockRule"))):(i.isLocked=!0,this.lockItems.indexOf(t.id)<0&&this.lockItems.splice(this.lockItems.length-1,0,t.id),t.classList.add("e-disable"),this.disableRuleControls(e,t,!0),e.children[0].classList.add("e-lock"),e.children[0].classList.remove("e-unlock"),e.setAttribute("title",this.l10n.getConstant("UnlockRule")))},l.prototype.groupLock=function(e){var t=k(e,".e-group-container"),i=this.getGroup(t.id.replace(this.element.id+"_","")),s=t.id.indexOf("group0")>-1;if(t.classList.contains("e-disable")){if(s){var a={};a.condition=i.condition,a.not=i.not,a.isLocked=!1,this.setProperties({rule:a},!0)}else i.isLocked=!1;this.lockItems=this.lockItems.filter(function(r){return r!==t.id}),t.classList.remove("e-disable"),this.disableHeaderControls(e,t,!1),e.children[0].classList.add("e-unlock"),e.children[0].classList.remove("e-lock"),e.setAttribute("title",this.l10n.getConstant("LockGroup")),this.updateLockItems()}else{if(s){var a={};a.condition=i.condition,a.not=i.not,a.isLocked=!0,this.setProperties({rule:a},!0)}else i.isLocked=!0;this.lockItems.indexOf(t.id)<0&&this.lockItems.splice(this.lockItems.length-1,0,t.id),t.classList.add("e-disable"),this.disableHeaderControls(e,t,!0),e.children[0].classList.add("e-lock"),e.children[0].classList.remove("e-unlock"),e.setAttribute("title",this.l10n.getConstant("UnlockGroup"))}},l.prototype.updateLockItems=function(){for(var e=0;e<this.lockItems.length;e++){var t=this.lockItems[e].split("_");if(t.length>2){var i=this.element.querySelector("#"+this.lockItems[e]),s=i.querySelector(".e-lock-rule-btn");i=k(s,".e-rule-container"),i.classList.contains("e-disable")||this.ruleLock(s)}else{var a=this.element.querySelector("#"+this.lockItems[e]),s=a.querySelector(".e-lock-grp-btn");a=k(s,".e-group-container"),a.classList.contains("e-disable")||this.groupLock(s)}}},l.prototype.disableHeaderControls=function(e,t,i){for(var s=t.querySelectorAll(".e-btngroup-and"),a=t.querySelectorAll(".e-btngroup-or"),r=t.querySelectorAll(".e-qb-toggle"),n=t.querySelectorAll(".e-add-btn"),h=t.querySelectorAll(".e-deletegroup"),p=t.querySelectorAll(".e-lock-grp-btn"),o=t.querySelectorAll(".e-clone-grp-btn"),f=t.querySelectorAll(".e-group-container"),c=0;c<s.length;c++)i?(f[c]&&f[c].classList.contains("e-disable")&&f[c].classList.add("e-disable"),s[c].disabled=!0,a[c].disabled=!0,n[c].disabled=!0,r[c]&&(r[c].disabled=!0),h[c]&&(h[c].disabled=!0),o[c]&&(o[c].disabled=!0),s[c].parentElement.classList.add("e-disabled"),p[c]!==e&&(p[c].disabled=!0,p[c].children[0].classList.remove("e-unlock"),p[c].children[0].classList.add("e-lock"))):(f[c]&&f[c].classList.remove("e-disable"),s[c].disabled=!1,a[c].disabled=!1,n[c].disabled=!1,p[c].disabled=!1,r[c]&&(r[c].disabled=!1),h[c]&&(h[c].disabled=!1),o[c]&&(o[c].disabled=!1),s[c].parentElement.classList.remove("e-disabled"),p[c].children[0].classList.remove("e-lock"),p[c].children[0].classList.add("e-unlock"));this.disableRuleControls(e,t,i)},l.prototype.disableRuleControls=function(e,t,i){for(var s=t.querySelectorAll(".e-control.e-dropdownlist"),a=t.querySelectorAll(".e-control.e-numerictextbox"),r=t.querySelectorAll(".e-control.e-textbox"),n=t.querySelectorAll(".e-control.e-datepicker"),h=t.querySelectorAll(".e-control.e-checkbox"),p=t.querySelectorAll(".e-control.e-radio"),o=t.querySelectorAll(".e-control.e-multiselect"),f=t.querySelectorAll(".e-rule-delete"),c=t.querySelectorAll(".e-lock-rule"),v=t.querySelectorAll(".e-clone-rule"),S=t.querySelectorAll(".e-rule-container"),b=0;b<f.length;b++)i?(S[b]&&S[b].classList.contains("e-disable")&&S[b].classList.add("e-disable"),f[b].disabled=!0,v[b]&&(v[b].disabled=!0),c[b]!==e&&(c[b].disabled=!0,c[b].children[0].classList.remove("e-unlock"),c[b].children[0].classList.add("e-lock"))):(S[b]&&S[b].classList.remove("e-disable"),v[b]&&(v[b].disabled=!1),f[b].disabled=!1,c[b].disabled=!1,c[b].children[0].classList.remove("e-lock"),c[b].children[0].classList.add("e-unlock"));for(var w,x,E,N,R,F,H,b=0;b<s.length;b++)w=T(s[b],"dropdownlist"),i?w.enabled=!1:w.enabled=!0;for(var b=0;b<a.length;b++)x=T(a[b],"numerictextbox"),i?x.enabled=!1:x.enabled=!0;for(var b=0;b<r.length;b++)E=T(r[b],"textbox"),i?E.enabled=!1:E.enabled=!0;for(var b=0;b<n.length;b++)N=T(n[b],"datepicker"),i?N.enabled=!1:N.enabled=!0;for(var b=0;b<h.length;b++)R=T(h[b],"checkbox"),i?R.disabled=!0:R.disabled=!1;for(var b=0;b<p.length;b++)F=T(p[b],"radio"),i?F.disabled=!0:F.disabled=!1;for(var b=0;b<o.length;b++)H=T(o[b],"multiselect"),i?H.enabled=!1:H.enabled=!0},B([P()],l.prototype,"created",void 0),B([P()],l.prototype,"actionBegin",void 0),B([P()],l.prototype,"beforeChange",void 0),B([P()],l.prototype,"change",void 0),B([P()],l.prototype,"dataBound",void 0),B([P()],l.prototype,"ruleChange",void 0),B([tt({},Ea)],l.prototype,"showButtons",void 0),B([m(!1)],l.prototype,"summaryView",void 0),B([m(!1)],l.prototype,"allowValidation",void 0),B([m("Default")],l.prototype,"fieldMode",void 0),B([m([])],l.prototype,"columns",void 0),B([m(null)],l.prototype,"fieldModel",void 0),B([m(null)],l.prototype,"operatorModel",void 0),B([m(null)],l.prototype,"valueModel",void 0),B([m()],l.prototype,"headerTemplate",void 0),B([m("")],l.prototype,"cssClass",void 0),B([m([])],l.prototype,"dataSource",void 0),B([m("Horizontal")],l.prototype,"displayMode",void 0),B([m(!1)],l.prototype,"enablePersistence",void 0),B([m("Default")],l.prototype,"sortDirection",void 0),B([m(5)],l.prototype,"maxGroupCount",void 0),B([m("auto")],l.prototype,"height",void 0),B([m("auto")],l.prototype,"width",void 0),B([m(!1)],l.prototype,"matchCase",void 0),B([m(0)],l.prototype,"immediateModeDelay",void 0),B([m(!1)],l.prototype,"enableNotCondition",void 0),B([m(!1)],l.prototype,"readonly",void 0),B([m(!0)],l.prototype,"addRuleToNewGroups",void 0),B([m(!1)],l.prototype,"autoSelectField",void 0),B([m(!0)],l.prototype,"autoSelectOperator",void 0),B([m("")],l.prototype,"separator",void 0),B([tt({condition:"and",rules:[]},wa)],l.prototype,"rule",void 0),l=B([we],l),l}(lt),Da=li({inject:{custom:{default:null}},render:function(d){if(!Te){var l=Te?d:fs,e=null;return u(this.$slots.default)||(e=Te?this.$slots.default:this.$slots.default()),l("div",{class:"e-directive"},e)}},updated:function(){!Te&&this.custom&&this.custom()},methods:{getTag:function(){return"e-columns"}}}),Aa=li({render:function(){},methods:{getTag:function(){return"e-column"}}}),vs=["isLazyUpdate","plugins","addRuleToNewGroups","allowValidation","autoSelectField","autoSelectOperator","columns","cssClass","dataSource","displayMode","enableNotCondition","enablePersistence","enableRtl","fieldMode","fieldModel","headerTemplate","height","immediateModeDelay","locale","matchCase","maxGroupCount","operatorModel","readonly","rule","separator","showButtons","sortDirection","summaryView","valueModel","width","actionBegin","beforeChange","change","created","dataBound","ruleChange"],gs=[],ys=Hs({props:vs}),Oa=ys[0],bs=ys[1],ri=Object.keys(bs);ri.push("modelchanged","update:modelValue");for(var Zt=0,os=gs;Zt<os.length;Zt++){var Ta=os[Zt];ri.push("update:"+Ta)}var Ia=li({name:"QueryBuilderComponent",mixins:[qs],props:Oa,watch:bs,emits:ri,provide:function(){return{custom:this.custom}},data:function(){return{ej2Instances:new xa({}),propKeys:vs,models:gs,hasChildDirective:!0,hasInjectedModules:!0,tagMapper:{"e-columns":"e-column"},tagNameMapper:{},isVue3:!Te,templateCollection:{}}},created:function(){this.bindProperties(),this.ej2Instances._setProperties=this.ej2Instances.setProperties,this.ej2Instances.setProperties=this.setProperties,this.ej2Instances.clearTemplate=this.clearTemplate,this.updated=this.updated},render:function(d){var l=Te?d:fs,e=null;return u(this.$slots.default)||(e=Te?this.$slots.default:this.$slots.default()),l("div",e)},methods:{clearTemplate:function(d){if(d||(d=Object.keys(this.templateCollection||{})),d.length&&this.templateCollection)for(var l=0,e=d;l<e.length;l++){var t=e[l],i=this.templateCollection[t];if(i&&i.length){for(var s=0,a=i;s<a.length;s++){var r=a[s],n=O("__vue__.$destroy",r);n&&r.__vue__.$destroy(),r.innerHTML&&(r.innerHTML="")}delete this.templateCollection[t]}}},setProperties:function(d,l){var e=this;this.isVue3&&(this.models=this.models?this.models:this.ej2Instances.referModels),this.ej2Instances&&this.ej2Instances._setProperties&&this.ej2Instances._setProperties(d,l),d&&this.models&&this.models.length&&Object.keys(d).map(function(t){e.models.map(function(i){t===i&&!/datasource/i.test(t)&&(e.isVue3?e.ej2Instances.vueInstance.$emit("update:"+t,d[t]):(e.$emit("update:"+t,d[t]),e.$emit("modelchanged",d[t])))})})},custom:function(){this.updated()},addGroups:function(d,l){return this.ej2Instances.addGroups(d,l)},addRules:function(d,l){return this.ej2Instances.addRules(d,l)},cloneGroup:function(d,l,e){return this.ej2Instances.cloneGroup(d,l,e)},cloneRule:function(d,l,e){return this.ej2Instances.cloneRule(d,l,e)},deleteGroup:function(d){return this.ej2Instances.deleteGroup(d)},deleteGroups:function(d){return this.ej2Instances.deleteGroups(d)},deleteRules:function(d){return this.ej2Instances.deleteRules(d)},getDataManagerQuery:function(d){return this.ej2Instances.getDataManagerQuery(d)},getFilteredRecords:function(){return this.ej2Instances.getFilteredRecords()},getGroup:function(d){return this.ej2Instances.getGroup(d)},getMongoQuery:function(d){return this.ej2Instances.getMongoQuery(d)},getOperators:function(d){return this.ej2Instances.getOperators(d)},getParameterizedNamedSql:function(d){return this.ej2Instances.getParameterizedNamedSql(d)},getParameterizedSql:function(d){return this.ej2Instances.getParameterizedSql(d)},getPredicate:function(d){return this.ej2Instances.getPredicate(d)},getRule:function(d){return this.ej2Instances.getRule(d)},getRules:function(){return this.ej2Instances.getRules()},getRulesFromSql:function(d,l){return this.ej2Instances.getRulesFromSql(d,l)},getSqlFromRules:function(d,l,e){return this.ej2Instances.getSqlFromRules(d,l,e)},getValidRules:function(d){return this.ej2Instances.getValidRules(d)},getValues:function(d){return this.ej2Instances.getValues(d)},lockGroup:function(d){return this.ej2Instances.lockGroup(d)},lockRule:function(d){return this.ej2Instances.lockRule(d)},notifyChange:function(d,l,e){return this.ej2Instances.notifyChange(d,l,e)},requiredModules:function(){return this.ej2Instances.requiredModules()},reset:function(){return this.ej2Instances.reset()},setMongoQuery:function(d,l){return this.ej2Instances.setMongoQuery(d,l)},setParameterizedNamedSql:function(d){return this.ej2Instances.setParameterizedNamedSql(d)},setParameterizedSql:function(d){return this.ej2Instances.setParameterizedSql(d)},setRules:function(d){return this.ej2Instances.setRules(d)},setRulesFromSql:function(d,l){return this.ej2Instances.setRulesFromSql(d,l)},validateFields:function(){return this.ej2Instances.validateFields()}}});const La={components:{"ejs-querybuilder":Ia,"e-column":Aa,"e-columns":Da},mounted(){this.loadTheme()},data:function(){return{dataSource:Ba,values:["Mr.","Mrs."],importRules:{condition:"and",rules:[{label:"Employee ID",field:"EmployeeID",type:"number",operator:"equal",value:1},{label:"Title",field:"Title",type:"string",operator:"equal",value:"Sales Manager"}]}}},methods:{loadTheme(){if((window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")==="dark"){let l=document.createElement("link");l.rel="stylesheet",l.href="./node_modules/@syncfusion/ej2-dropdowns/styles/tailwind-dark.css",document.head.appendChild(l);let e=document.createElement("link");e.rel="stylesheet",e.href="./assets/css/dark/tailwind-dark.css",document.head.appendChild(e);let t=document.createElement("link");t.rel="stylesheet",t.href="./node_modules/@syncfusion/ej2-icons/styles/fluent.css",document.head.appendChild(t);let i=document.createElement("link");i.rel="stylesheet",i.href="./node_modules/@syncfusion/ej2-inputs/styles/tailwind-dark.css",document.head.appendChild(i);let s=document.createElement("link");s.rel="stylesheet",s.href="./node_modules/@syncfusion/ej2-popups/styles/tailwind-dark.css",document.head.appendChild(s);let a=document.createElement("link");a.rel="stylesheet",a.href="./node_modules/@syncfusion/ej2-buttons/styles/tailwind-dark.css",document.head.appendChild(a);let r=document.createElement("link");r.rel="stylesheet",r.href="./node_modules/@syncfusion/ej2-splitbuttons/styles/tailwind-dark.css",document.head.appendChild(r);let n=document.createElement("link");n.rel="stylesheet",n.href="./node_modules/@syncfusion/ej2-navigations/styles/tailwind-dark.css",document.head.appendChild(n);let h=document.createElement("link");h.rel="stylesheet",h.href="./node_modules/@syncfusion/ej2-layouts/styles/tailwind-dark.css",document.head.appendChild(h);let p=document.createElement("link");p.rel="stylesheet",p.href="./node_modules/@syncfusion/ej2-grids/styles/tailwind-dark.css",document.head.appendChild(p);let o=document.createElement("link");o.rel="stylesheet",o.href="./node_modules/@syncfusion/ej2-querybuilder/styles/tailwind-dark.css",document.head.appendChild(o)}else{let l=document.createElement("link");l.rel="stylesheet",l.href="./node_modules/@syncfusion/ej2-dropdowns/styles/tailwind.css",document.head.appendChild(l);let e=document.createElement("link");e.rel="stylesheet",e.href="./assets/css/light/tailwind-light.min.css",document.head.appendChild(e);let t=document.createElement("link");t.rel="stylesheet",t.href="./node_modules/@syncfusion/ej2-icons/styles/fluent.css",document.head.appendChild(t);let i=document.createElement("link");i.rel="stylesheet",i.href="./node_modules/@syncfusion/ej2-inputs/styles/tailwind.css",document.head.appendChild(i);let s=document.createElement("link");s.rel="stylesheet",s.href="./node_modules/@syncfusion/ej2-popups/styles/tailwind.css",document.head.appendChild(s);let a=document.createElement("link");a.rel="stylesheet",a.href="./node_modules/@syncfusion/ej2-buttons/styles/tailwind.css",document.head.appendChild(a);let r=document.createElement("link");r.rel="stylesheet",r.href="./node_modules/@syncfusion/ej2-splitbuttons/styles/tailwind.css",document.head.appendChild(r);let n=document.createElement("link");n.rel="stylesheet",n.href="./node_modules/@syncfusion/ej2-navigations/styles/tailwind.css",document.head.appendChild(n);let h=document.createElement("link");h.rel="stylesheet",h.href="./node_modules/@syncfusion/ej2-layouts/styles/tailwind.css",document.head.appendChild(h);let p=document.createElement("link");p.rel="stylesheet",p.href="./node_modules/@syncfusion/ej2-grids/styles/tailwind.css",document.head.appendChild(p);let o=document.createElement("link");o.rel="stylesheet",o.href="./node_modules/@syncfusion/ej2-querybuilder/styles/tailwind.css",document.head.appendChild(o)}}}};var Ba=[{EmployeeID:1,FirstName:"Nancy",Title:"Sales Representative",TitleOfCourtesy:"Ms.",HireDate:"22/07/2001",City:"Seattle",Country:"USA"},{EmployeeID:2,FirstName:"Andrew",Title:"Vice President",TitleOfCourtesy:"Dr.",HireDate:"21/04/2003",City:"Tacoma",Country:"USA"},{EmployeeID:3,FirstName:"Janet",Title:"Sales Representative",TitleOfCourtesy:"Ms.",HireDate:"22/07/2001",City:"Kirkland",Country:"USA"}];const Na={class:"w-screen"},Ma={class:"control-section"},Va={class:"w-full querybuilder-control"};function Wa(d,l,e,t,i,s){const a=Dt("e-column"),r=Dt("e-columns"),n=Dt("ejs-querybuilder");return Ls(),Bs("div",Na,[ui("div",Ma,[ui("div",Va,[ve(n,{dataSource:d.dataSource,rule:d.importRules,width:"70%"},{default:pi(()=>[ve(r,null,{default:pi(()=>[ve(a,{field:"EmployeeID",label:"Employee ID",type:"number"}),ve(a,{field:"FirstName",label:"First Name",type:"string"}),ve(a,{field:"TitleOfCourtesy",label:"Title Of Courtesy",type:"boolean",values:d.values},null,8,["values"]),ve(a,{field:"Title",label:"Title",type:"string"}),ve(a,{field:"HireDate",label:"Hire Date",type:"date",format:"dd/MM/yyyy"}),ve(a,{field:"Country",label:"Country",type:"string"}),ve(a,{field:"City",label:"City",type:"string"})]),_:1})]),_:1},8,["dataSource","rule"])])])])}const Ra=Is(La,[["render",Wa]]);export{Ra as default};
