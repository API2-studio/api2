import{_ as g,a0 as y,N as k,o as i,c as u,a as o,G as r,T as _,U as f,a1 as m,d as b,g as h,I as v,a2 as w,D as x,F as T,b as C,V as q,W as O,t as a,A as N}from"./index-eedfe929.js";const E={data(){return{stay_on_page:"false",table_column_error:!1,table_name:"",parent_table_name:"",table_column_name:"",table_column_type:"",table_column_options:{required:"false",unique:"false",foreign_key:"false",references_table:"",references_column:"",relation_type:"",default:""},table_columns:[]}},methods:{addTableColumn(){this.tableColmnError!=!0&&(this.table_columns.push({name:this.table_column_name,type:this.table_column_type,options:this.table_column_options}),this.table_column_name="",this.table_column_type="",this.clearOptions())},removeTableColumn(){this.table_columns.pop()},options(){document.getElementById("menu-full-dropdown").classList.toggle("hidden")},closeOptions(){document.getElementById("menu-full-dropdown").classList.add("hidden")},updateOptions(s,e,p,c,t,n,l){const d={required:s,unique:e,foreign_key:p,references_table:c,references_column:t,relation_type:n,default:l};this.table_column_options=d},saveOptions(s,e,p,c,t,n,l){this.closeOptions();const d={required:s,unique:e,foreign_key:p,references_table:c,references_column:t,relation_type:n,default:l};this.table_column_options=d,console.log(this.table_column_options)},removeTableColumnAt(s){this.table_columns.splice(s,1)},createTable(){this.table_columns.forEach(e=>{for(const[p,c]of Object.entries(e.options))c=="true"&&(e.options[p]=!0),c=="false"&&(e.options[p]=!1);e.options.required==!1&&e.options.unique==!1&&delete e.options.default,e.options.foreign_key==!1?(delete e.options.foreign_key,delete e.options.references_table,delete e.options.references_column,delete e.options.relation_type):(delete e.options.required,delete e.options.unique,delete e.options.default)});const s={name:this.table_name,parent:this.parent_table_name,schema:this.table_columns};console.log(s),y(s).then(e=>{console.log(e),this.stay_on_page=="true"?this.$router.push({name:"CreateTable",query:{stay_on_page:"true"}}):this.$router.push({name:"Tables"})}).catch(e=>{console.log(e),k().$patch({message:e.response.data.message,status:e.response.status,error:e.response.data.error})})},disableDefault(){return this.table_column_options.required=="true"&&this.table_column_options.default==""},validateNameUnique(){this.table_columns.forEach(s=>{s.name==this.table_column_name&&(this.table_column_name="",k().$patch({message:"Column name must be unique",status:"400",error:"Column name must be unique"}),this.tableColmnError=!0)})},clearOptions(){this.table_column_options={required:"false",unique:"false",foreign_key:"false",references_table:"",references_column:"",relation_type:"",default:""},this.tableColmnError=!1}},mounted(){this.$route.query.stay_on_page=="true"&&(this.stay_on_page="true")}},U=o("h1",{class:"text-3xl font-bold my-4 mx-10"},"Create Tables",-1),R=o("h3",{class:"text-lg mb-6 mx-10"},"Use this form for creating tables",-1),S={class:"mb-4"},V=o("label",{for:"table_name",class:"block text-sm font-medium"},"Table Name",-1),A={class:"mb-4"},M=o("label",{for:"parent_table_name",class:"block text-sm font-medium"},"Parent",-1),D={class:"mb-4"},I=o("label",{for:"table_columns",class:"block text-sm font-medium"},"Table Schema",-1),B={class:"flex space-x-4"},F=N('<option value="" selected disabled>Select a type</option><option value="varchar">String</option><option value="integer">Integer</option><option value="timestamptz">UTC timestamps</option><option value="timestamp">timestamp</option><option value="bigint">Big Integer</option><option value="boolean">Boolean</option><option value="date">Date</option><option value="time">Time</option><option value="text">Text</option><option value="uuid">UUID</option><option value="json">JSON</option><option value="jsonb">JSONB</option><option value="float">Float</option><option value="double">Double</option><option value="decimal">Decimal</option><option value="enum">Enum</option><option value="array">Array</option><option value="geometry">Geometry</option><option value="geography">Geography</option><option value="cidr">CIDR</option><option value="inet">INET</option><option value="macaddr">MACADDR</option><option value="tsvector">TSVECTOR</option><option value="tsquery">TSQUERY</option><option value="int4range">INT4RANGE</option><option value="int8range">INT8RANGE</option><option value="numrange">NUMRANGE</option><option value="tsrange">TSRANGE</option><option value="tstzrange">TSTZRANGE</option><option value="daterange">DATERANGE</option><option value="int2">INT2</option><option value="int4">INT4</option><option value="int8">INT8</option><option value="float4">FLOAT4</option><option value="float8">FLOAT8</option><option value="numeric">NUMERIC</option><option value="money">MONEY</option><option value="char">CHAR</option><option value="serial">SERIAL</option>',40),G=[F],z=o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-rock-blue-500"},[o("path",{"fill-rule":"evenodd",d:"M12 3a9 9 0 100 18 9 9 0 000-18zM7 9a1 1 0 011-1h8a1 1 0 110 2H8a1 1 0 01-1-1zm1 4a1 1 0 100 2h6a1 1 0 100-2H8z","clip-rule":"evenodd"})],-1),j=[z],H=o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),L=[H],K=o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18 12H6"})],-1),J=[K],W={id:"menu-full-dropdown",class:"hidden"},Y={key:0,class:"bg-rock-blue-200 dark:bg-pickled-600 shadow px-4 py-3 rounded-md w-[330px] absolute mx-auto right-1/3 z-10 menu-for-fk"},P={class:"space-y-2"},Q={class:"border-b border-pickled-200 flex"},Z=o("a",{href:"#",class:"w-[100] block px-4 py-2 text-sm dark:text-rock-blue-100 text-pickled-900 flex-1"},"Required",-1),X=o("option",{value:"true"},"True",-1),$=o("option",{value:"false"},"False",-1),ee=[X,$],oe={class:"border-b border-pickled-200 flex"},te=o("a",{href:"#",class:"w-[100] block px-4 py-2 text-sm text-pickled-900 dark:text-rock-blue-100 flex-1"},"Unique",-1),le=o("option",{value:"true"},"True",-1),ne=o("option",{value:"false"},"False",-1),se=[le,ne],re={class:"border-b border-pickled-200 flex"},ie=o("a",{href:"#",class:"W-[100] block px-4 py-2 text-sm dark:text-rock-blue-100 text-pickled-900 flex-1"},"Foreign Key",-1),ue=o("option",{value:"true"},"True",-1),ae=o("option",{value:"false"},"False",-1),pe=[ue,ae],ce={class:"flex"},de=o("a",{href:"#",class:"px-4 py-2 text-sm text-pickled-900 dark:text-rock-blue-100 w-[100] flex-1"},"Default",-1),_e={key:0,class:"border-b border-pickled-200 flex"},be=o("a",{href:"#",class:"px-4 py-2 text-sm text-pickled-900 dark:text-rock-blue-100 w-[100] flex-1"},"References Table",-1),me={key:1,class:"border-b border-pickled-200 flex"},ke=o("a",{href:"#",class:"px-4 py-2 text-sm text-pickled-900 dark:text-rock-blue-100 w-[100] flex-1"},"References Column",-1),fe={key:2,class:"border-b border-pickled-200 flex"},xe=o("a",{href:"#",class:"px-4 py-2 text-sm text-pickled-900 dark:text-rock-blue-100 w-[100] flex-1"},"Reference Type",-1),ge=o("option",{value:"one-to-one"},"One to One",-1),ye=o("option",{value:"one-to-many"},"One to Many",-1),he=o("option",{value:"many-to-one"},"Many to One",-1),ve=o("option",{value:"many-to-many"},"Many to Many",-1),we=[ge,ye,he,ve],Te={key:0,class:"table-auto mx-10 bg-rock-blue-300 dark:bg-pickled-800 dark:text-rock-blue-300"},Ce=o("thead",{class:"text-xs text-pickled-500 uppercase bg-rock-blue-200 dark:bg-pickled-900 dark:text-pickled-200 sticky table-sticky z-20"},[o("tr",null,[o("th",{class:"px-4 py-2 text-ellipsis max-w-[100]"},"Column Name"),o("th",{class:"px-4 py-2"},"Column Type"),o("th",{class:"px-4 py-2"},"Required"),o("th",{class:"px-4 py-2"},"Unique"),o("th",{class:"px-4 py-2"},"Foreign Key"),o("th",{class:"px-4 py-2"},"Reference Table"),o("th",{class:"px-4 py-2"},"Reference Column"),o("th",{class:"px-4 py-2"},"Reference Type"),o("th",{class:"px-4 py-2"},"Default"),o("th",{class:"px-4 py-2"},"Remove")])],-1),qe={class:"px-4 py-2"},Oe={class:"px-4 py-2"},Ne={class:"px-4 py-2"},Ee={class:"px-4 py-2"},Ue={class:"px-4 py-2"},Re={class:"px-4 py-2"},Se={class:"px-4 py-2"},Ve={class:"px-4 py-2"},Ae={class:"px-4 py-2"},Me={class:"px-4 py-2"},De=["onClick"],Ie=o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M18 12H6"})],-1),Be=[Ie],Fe={class:"mb-4 mx-10 mt-5"},Ge={class:"flex items-center mb-4"},ze=o("label",{for:"default-checkbox",class:"ms-2 text-sm font-medium text-pickled-900 dark:text-pickled-300"},"Stay on form?",-1),je=["disabled"];function He(s,e,p,c,t,n){return i(),u("div",null,[U,R,o("form",{onSubmit:e[26]||(e[26]=x((...l)=>n.createTable&&n.createTable(...l),["prevent"])),class:"mx-10"},[o("div",S,[V,r(o("input",{type:"text",class:"mt-1 p-2 border rounded-md w-full bg-rock-blue-300 dark:bg-pickled-600 text-pickled-900 dark:text-rock-blue-100 focus:ring-rock-blue-400 dark:focus:ring-rock-blue-400 dark:ring-offset-pickled-800 focus:ring-2",id:"table_name","onUpdate:modelValue":e[0]||(e[0]=l=>t.table_name=l),placeholder:"Enter table name"},null,512),[[_,t.table_name]])]),o("div",A,[M,r(o("input",{type:"text",class:"mt-1 p-2 border rounded-md w-full bg-rock-blue-300 dark:bg-pickled-600 text-pickled-900 dark:text-rock-blue-100 focus:ring-rock-blue-400 dark:focus:ring-rock-blue-400 dark:ring-offset-pickled-800 focus:ring-2",id:"parent_table_name","onUpdate:modelValue":e[1]||(e[1]=l=>t.parent_table_name=l),placeholder:"Enter table name"},null,512),[[_,t.parent_table_name]])]),o("div",D,[I,o("div",B,[r(o("input",{onKeyup:[e[2]||(e[2]=f((...l)=>n.addTableColumn&&n.addTableColumn(...l),["enter"])),e[3]||(e[3]=f((...l)=>n.clearOptions&&n.clearOptions(...l),["esc"]))],onClick:e[4]||(e[4]=(...l)=>n.clearOptions&&n.clearOptions(...l)),onBlur:e[5]||(e[5]=(...l)=>n.clearOptions&&n.clearOptions(...l)),onFocus:e[6]||(e[6]=(...l)=>n.clearOptions&&n.clearOptions(...l)),onChange:e[7]||(e[7]=l=>n.validateNameUnique()),type:"text",class:"mt-1 p-2 border rounded-md w-1/4 bg-rock-blue-300 dark:bg-pickled-600 text-pickled-900 dark:text-rock-blue-100 focus:ring-rock-blue-400 dark:focus:ring-rock-blue-400 dark:ring-offset-pickled-800 focus:ring-2",id:"table_column_name","onUpdate:modelValue":e[8]||(e[8]=l=>t.table_column_name=l),placeholder:"Column name"},null,544),[[_,t.table_column_name]]),r(o("select",{class:"mt-1 p-2 border rounded-md w-[200] bg-rock-blue-300 dark:bg-pickled-600 text-pickled-900 dark:text-rock-blue-100 focus:ring-rock-blue-400 dark:focus:ring-rock-blue-400 dark:ring-offset-pickled-800 focus:ring-2",id:"table_column_type","onUpdate:modelValue":e[9]||(e[9]=l=>t.table_column_type=l),onChange:e[10]||(e[10]=(...l)=>n.options&&n.options(...l)),"aria-placeholder":"Select type of column",placeholder:"Select"},G,544),[[m,t.table_column_type]]),o("button",{id:"menu-full-dropdown-button",onClick:e[11]||(e[11]=(...l)=>n.options&&n.options(...l)),type:"button",class:"px-2 py-2 bg-rock-blue text-rock-blue-100 rounded-full"},j),o("button",{type:"button",class:"px-2 py-2 bg-rock-blue text-pickled-800 rounded-full",onClick:e[12]||(e[12]=(...l)=>n.addTableColumn&&n.addTableColumn(...l))},L),t.table_columns.length>0?(i(),u("button",{key:0,type:"button",class:"px-2 py-2 bg-rock-blue text-pickled-800 rounded-full",onClick:e[13]||(e[13]=(...l)=>n.removeTableColumn&&n.removeTableColumn(...l))},J)):b("",!0),o("div",W,[h(w,{type:"transition",name:"slide_down","enter-active-class":"animate__fadeInDownBig","leave-active-class":"animate__fadeOutUpBig"},{default:v(()=>[t.table_column_type?(i(),u("div",Y,[o("ul",P,[o("li",Q,[Z,r(o("select",{class:"mt-0 p-2 border rounded-lg w-[100] bg-rock-blue-300 dark:bg-pickled-600 dark:text-rock-blue-100 text-pickled-900 flex-end focus:ring-rock-blue-400 dark:focus:ring-rock-blue-400 dark:ring-offset-pickled-800 focus:ring-2",id:"table_column_options.required","onUpdate:modelValue":e[14]||(e[14]=l=>t.table_column_options.required=l),onChange:e[15]||(e[15]=l=>n.updateOptions(t.table_column_options.required,t.table_column_options.unique,t.table_column_options.foreign_key,t.table_column_options.references_table,t.table_column_options.references_column,t.table_column_options.relation_type,t.table_column_options.default)),type:"checkbox"},ee,544),[[m,t.table_column_options.required]])]),o("li",oe,[te,r(o("select",{class:"mt-0 p-2 border rounded-lg w-[100] bg-rock-blue-300 dark:bg-pickled-600 dark:text-rock-blue-100 text-pickled-900 flex-end focus:ring-rock-blue-400 dark:focus:ring-rock-blue-400 dark:ring-offset-pickled-800 focus:ring-2",id:"table_column_options.unique","onUpdate:modelValue":e[16]||(e[16]=l=>t.table_column_options.unique=l),onChange:e[17]||(e[17]=l=>n.updateOptions(t.table_column_options.required,t.table_column_options.unique,t.table_column_options.foreign_key,t.table_column_options.references_table,t.table_column_options.references_column,t.table_column_options.relation_type,t.table_column_options.default)),type:"checkbox"},se,544),[[m,t.table_column_options.unique]])]),o("li",re,[ie,r(o("select",{class:"mt-0 p-2 border rounded-lg w-[100] bg-rock-blue-300 dark:bg-pickled-600 dark:text-rock-blue-100 text-pickled-900 flex-end",id:"table_column_options.foreign_key","onUpdate:modelValue":e[18]||(e[18]=l=>t.table_column_options.foreign_key=l),onChange:e[19]||(e[19]=l=>n.updateOptions(t.table_column_options.required,t.table_column_options.unique,t.table_column_options.foreign_key,t.table_column_options.references_table,t.table_column_options.references_column,t.table_column_options.relation_type,t.table_column_options.default)),type:"checkbox"},pe,544),[[m,t.table_column_options.foreign_key]])]),o("li",ce,[de,r(o("input",{type:"text",class:"mt-1 p-2 border rounded-md w-[200] bg-rock-blue-300 dark:bg-pickled-600 text-pickled-900 dark:text-rock-blue-100",id:"table_column_options.default","onUpdate:modelValue":e[20]||(e[20]=l=>t.table_column_options.default=l),placeholder:"Default"},null,512),[[_,t.table_column_options.default]])]),t.table_column_options.foreign_key=="true"?(i(),u("li",_e,[be,r(o("input",{type:"text",class:"mt-1 p-2 border rounded-md w-[100] bg-rock-blue-300 dark:bg-pickled-600 text-pickled-900 dark:text-rock-blue-100 flex-end",id:"table_column_options.references_table","onUpdate:modelValue":e[21]||(e[21]=l=>t.table_column_options.references_table=l),placeholder:"Table to reference"},null,512),[[_,t.table_column_options.references_table]])])):b("",!0),t.table_column_options.foreign_key=="true"?(i(),u("li",me,[ke,r(o("input",{type:"text",class:"mt-1 p-2 border rounded-md w-[100] bg-rock-blue-300 dark:bg-pickled-600 text-pickled-900 dark:text-rock-blue-100 flex-end",id:"table_column_options.references_column","onUpdate:modelValue":e[22]||(e[22]=l=>t.table_column_options.references_column=l),placeholder:""},null,512),[[_,t.table_column_options.references_column]])])):b("",!0),t.table_column_options.foreign_key=="true"?(i(),u("li",fe,[xe,r(o("select",{class:"mt-0 p-2 border rounded-lg w-[100] text-pickled-900 bg-rock-blue-300 dark:bg-pickled-600 dark:text-rock-blue-100 flex-end",id:"table_column_options.relation_type","onUpdate:modelValue":e[23]||(e[23]=l=>t.table_column_options.relation_type=l),onChange:e[24]||(e[24]=l=>n.updateOptions(t.table_column_options.required,t.table_column_options.unique,t.table_column_options.foreign_key,t.table_column_options.references_table,t.table_column_options.references_column,t.table_column_options.relation_type,t.table_column_options.default)),type:"checkbox"},we,544),[[m,t.table_column_options.relation_type]])])):b("",!0)]),o("button",{type:"button",onClick:e[25]||(e[25]=x(l=>n.saveOptions(t.table_column_options.required,t.table_column_options.unique,t.table_column_options.foreign_key,t.table_column_options.references_table,t.table_column_options.references_column,t.table_column_options.relation_type,t.table_column_options.default),["prevent"])),class:"px-8 py-1 mt-5 bg-rock-blue text-rock-blue-100 rounded-md text-sm w-full text-center"}," Save ")])):b("",!0)]),_:1})])])])],32),t.table_columns.length>0?(i(),u("table",Te,[Ce,o("tbody",null,[(i(!0),u(T,null,C(t.table_columns,(l,d)=>(i(),u("tr",{key:d,class:"bg-white border-b dark:bg-pickled-800 dark:border-pickled-700"},[o("td",qe,a(l.name),1),o("td",Oe,a(l.type),1),o("td",Ne,a(l.options.required),1),o("td",Ee,a(l.options.unique),1),o("td",Ue,a(l.options.foreign_key),1),o("td",Re,a(l.options.references_table),1),o("td",Se,a(l.options.references_column),1),o("td",Ve,a(l.options.relation_type),1),o("td",Ae,a(l.options.default),1),o("td",Me,[o("button",{onClick:Le=>n.removeTableColumnAt(d),type:"button",class:"px-2 py-2 bg-rock-blue text-rock-blue-100 rounded-full"},Be,8,De)])]))),128))])])):b("",!0),o("div",Fe,[o("div",Ge,[r(o("input",{"onUpdate:modelValue":e[27]||(e[27]=l=>t.stay_on_page=l),id:"default-checkbox",type:"checkbox",value:"",class:"w-4 h-4 text-rock-blue-600 bg-pickled-800 border-pickled-300 rounded focus:ring-rock-blue-400 dark:focus:ring-rock-blue-400 dark:ring-offset-pickled-800 focus:ring-2 dark:bg-pickled-700 dark:border-pickled-600"},null,512),[[q,t.stay_on_page]]),ze])]),o("button",{disabled:t.table_columns.length==0,class:O([t.table_columns.length==0?"opacity-50":"","px-4 py-2 bg-rock-blue dark:text-rock-blue-100 text-pickled-900 rounded-md mx-10"]),onClick:e[28]||(e[28]=(...l)=>n.createTable&&n.createTable(...l)),type:"submit"}," Create Table ",10,je)])}const Je=g(E,[["render",He]]);export{Je as default};
